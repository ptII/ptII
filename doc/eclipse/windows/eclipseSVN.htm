<!-- $Id$ -->
<html>
  <head>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
    <title>Eclipse is aware of the Subversion aspects of the project.</title> 
    <link href="../../../doc/default.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1>Eclipse is aware of the Subversion aspects of the project.</h1>

    You can use both Eclipse and shell version of Subversion to update the tree.

    <br/>This choice is the <b>preferred</b> choice for collaborating with
    the Ptolemy group because it means that your Ptolemy II tree can get
    recent changes.

    <br/>The downside is that that the development tree is under
    development, so there may be bugs or instability.

    <br/>(Use both the Eclipse Subversion plug-in (Subversive) and the
    shell <code>svn</code> command).

    <p>For other ways to set up Eclipse and Ptolemy II, see
      the <a href="project.htm" target="main">Setting up Eclipse to manage your Ptolemy II development Environment</a> page.</p>

    <p>There are at least two Subversion plugins for Eclipse,
    Subversive and Subclipse.  Either will work, for a brief
    comparison,
    see <a href="http://chess.eecs.berkeley.edu/ptexternal/wiki/Main/Subversion#SubclipseVsSubversion#in_browser" target="_top">Subclipse vs. Subversion</a>.  The instructions
    below are for Subversive. To use Subclipse,
    see <a href="https://kepler-project.org/developers/reference/kepler-and-eclipse#7-installing-subversion-svn#in_browser" target="_top">Installing Subversion (SVN) into Eclipse</a>.</p>

    <p>The <a href="http://www.eclipse.org/subversive/downloads.php#in_browser" target="_top">Subversive</a> Eclipse plug-in adds Subversion to
      Eclipse.  After installation, you can use either Eclipse to manage
      your project, or the <code>svn</code> from the command line.</p>

    <p>Follow the <a href="http://www.eclipse.org/subversive/downloads.php#in_browser" target="_top">Subversive installation instructions</a> or these instructions below:</p>

    <ol>
      <li> To download Subversive, in Eclipse, follow these menus
	<br>The first time software is to be added the menu will be:
	<code>Help</code> | <code>Install New Software</code> 
      </li>
      <li>In the "Work with" field, select "Indigo - http://download.eclipse.org/releases/indigo" from the drop down.  The install facility will take a few moments to connect to the site and determine
	what is available.
      </li>
      <br>Expand the "Collaboration" tab and check the box next to
      "Subversive SVN Team Provider (Incubation)"
      
      <li>Then click <code>Next</code>, <code>Next</code> again and click
	through the license agreement and hit <code>Finish</code>.  
      </li>
      <li> When the "Software Updates" window appears and asks about a
	restart, select "Restart Now" and restart.
      </li>
      <li> When Eclipse restarts, bring up the preferences window:
	<br> <code>Eclipse</code> | <code>Preferences</code>
	<br> Then do <code>Team</code> | <code>SVN</code>.  When you click
	on the <code>SVN</code>, the "Subversion Connector Discovery" window
	will pop up.  (See <a href="http://www.polarion.com/products/svn/subversive/connector_discovery.php#in_browser" target="_top">http://www.polarion.com/products/svn/subversive/connector_discovery.php</a>
	for details.)
      </li>
      <li> In the "Subversion Connector Discovery" window, what version
	you select depends on what version of svn is installed on your
	machine.  
	<br/>To determine which version of Java is being run, start up a Terminal window
	by going to Application -> Utilities and clicking on the Terminal icon, then type:
	<pre>
	  svn --version
	</pre>
	<br/>If <code>svn --version</code> returns 1.5, then install SVN Kit 1.2.3
	<br/>If <code>svn --version</code> returns 1.6, then install SVN Kit 1.3.5

	<p>Note: if you install a more recent version of the plugin than the
	  version of the command line <code>svn</code> tool, then
	  you will not be able to use the command line <code>svn</code> to
	  update or modify the tree that is checked out by Eclipse.
	  <br>If you
	  run <code>svn</code> on a tree checked out by Eclipse and get a message 
	  <code> svn: This client is too old to work with working copy '.'; please get a newer Subversion
	    client</code>, then the solution is to
	  <a href="http://subversion.apache.org/packages.html#in_browser" target="_top">update svn</a>.</p>
	<p>Note: If you do not have the <code>svn</code> command installed, then
	  you <i>should</i> be able to download ptII using the SVN Kit supplied by Eclipse.

	<p>Then do "Finish", "Next", "Next", Accept the license and then
	  "Finish".</p>
      </li>
	
      <li>If you get a security warning about unsigned software, click
	"OK".
      </li>

      <li> When prompted for a restart, select "Restart Now".
      </li>

      <li> After Eclipse has restarted, the next steps is to download the <code>ptII</code>
	Subversion repository.

	<br/>In Eclipse, add the ptII SVN Repository:

	<br/><code>Window</code> | <code>Show View</code> | <code>Other</code> | <code>SVN</code> | <code>SVN Repositories</code>
      </li>

      <li>In the SVN Repository view, right click,
	select <code>New</code> | <code>Repository Location</code> and
	set the url.

	<br>To check out the ptII svn repository with <b>read-only</b> access:

	<pre>
	  https://source.eecs.berkeley.edu/svn/chess/ptII
	</pre>
	or
	<pre>
	  svn://source.eecs.berkeley.edu/chess/ptII
	</pre>

	<p><B>Note:</B> Most users will select <code>https://</code> or 
	  <CODE>svn://</CODE> because
	  they will be accessing the tree with <B>read-only</B> Subversion access.
	  <br>If you have an 
	  <a href="http://chess.eecs.berkeley.edu/ptexternal/#in_browser" target="_top">ssh account</a> on <code>source.eecs.berkeley.edu</code>, then check out ptII with
	  read/write access:</p>

	<pre>
	  svn+ssh://source.eecs.berkeley.edu/home/svn/chess/ptII
	</pre>
	Or, if your user id on source.eecs is different than your current user id
	on your machine:
	<pre>
	  svn co svn+ssh://<I>yourID</I>@source.eecs.berkeley.edu/chess/ptII
	</pre>
	Read/writes users may want to check "Save authentication".

	<p>Click <code>Finish</code></p>

	<p>Read/write users will be prompted for their
	  source.eecs.berkeley.edu username and password. This
	  typically happens more than once since in case the svn+ssh
	  protocol is being used passwords are not cached </p>
      </li>

      <li>If you get a "Certificate Problem" window, then select
	<code>Trust</code> or <code>Trust Always</code>.  For details and
	a workaround, see <a href="http://chess.eecs.berkeley.edu/ptexternal/wiki/Main/Subversion#svnCertficateIsNotIssuedByATrustedAuthority#in_browser" target="_top">Certificate is not issued by a trusted authority</a>.
      </li>

      <li>In the SVN Repository view, expand the repository by
	clicking in the triangle at the left, then right click
	on <code>trunk</code> and select <code>Find/Check out As</code>
      </li>

      <blockquote>
	<table border="1">
	  <tr>
	    <td>
	      Be sure to check out the <b><code>trunk</code></b> not the
	      entire tree, which include all the branches and the trunk.
	    </td>
	  </tr>
	</table>
      </blockquote>

      Follow the wizard, creating selections as follows:
      <ol>
	<li> In the "Check Out As" window, use the default, <code>Check out as a project configured using the New Project Wizard</code>, then hit <code>Finish</code>.
	</li>

	<li> In the "Select a wizard" window, select <code>Java</code> | <code>Java Project</code>, then hit <code>Next</code>.
	</li>
	<li> In the "Create a Java Project" window,
	  <br> set "Project Name" to: <CODE>ptII</CODE>
	  <br> set "Project Layout" to <code>Use project folder as root for sources and class files</code>.
	  This is done so that <code>$PTII/bin</code> will contain the Ptolemy II command line scripts instead of the
	  <code>*.class</code> files created by Eclipse.
	</li>
	<li> Click Next
	</li>
	<li> In the "New Java Project" window, select "Allow output folders for source folders", click "Finish"

	<li> If you see a Confirm Overwrite Window that says:
	  <blockquote>
	    <code>The project you created, ptII, contains resources other than the standard .project file. If any of those resources have the same name and relative location of a resource you are checking out, the local resource will be replaced with the resource from the repository</code>
	  </blockquote>
	  then you probably did not change "Project Layout" as per above.  Click cancel and recreate the Java Project.
	</li>  
	<li> In the "Open Associated Perspective?" window, click "Yes". 
	</li>
      </ol>

      <p>
	<li> Wait for the checkout to finish. <I>Go get coffee.</I>
	  <br><B>Note:</B>If you did not disable build automatically, as
	  suggested above, then Eclipse will build the project and produce
	  <B>thousands of errors</B>. This is not really a problem.  You will
	  fix the errors below with the <CODE>.classpath.default</CODE> file.
	</li>


	<li><b>If you have read/write access</b> go to <a href="setupSubversion.htm" target="main">Setup the Subversion Configuration to Sane Settings</a> so that if you commit files, they will have the appropriate settings.
	</li>

	<li>All users should go on to <a href="setupClasspath.htm" target="main">Set up the Eclipse ptII project .classpath for Ptolemy II</a>
	</li>

    </ol>
  </body>
</html>
