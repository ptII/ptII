<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="iRobotCreateCodeGenExperimental" class="ptolemy.actor.TypedCompositeActor">
    <property name="Rectangle" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[10.0, 85.0]">
        </property>
        <property name="width" class="ptolemy.data.expr.Parameter" value="691.0">
        </property>
        <property name="height" class="ptolemy.data.expr.Parameter" value="434.0">
        </property>
        <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.8,0.8,0.8,1.0}">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="_location" class="ptolemy.kernel.util.Location" value="{335, 365}">
            </property>
        </property>
    </property>
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="8.0.beta">
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={41, 136, 936, 702}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[721, 569]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{360.5, 284.5}">
    </property>
    <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textSize" class="ptolemy.data.expr.Parameter" value="12">
        </property>
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.4,0.4,0.4,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Author: Chihhong Patrick Cheng, iRobotHillClimbing model by Edward A. Lee">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{10.0, 525.0}">
        </property>
    </property>
    <property name="Annotation4" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textSize" class="ptolemy.data.expr.Parameter" value="10">
        </property>
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="For details regarding this example, please reference the technical report &#10;http://www.eecs.berkeley.edu/Pubs/TechRpts/2008/EECS-2008-41.html&#10;&#10;This is the implementation model of the model iRobotCreateVerification.xml. Perform &#10;code generation on the grey part, and we can have the control software installed to &#10;iRobot. The main difference between this model and iRobotCreateVerification.xml is &#10;that the director is different. In order to use SDF code generation, slight &#10;modifications must be made. Nevertheless, these modifications do not change the &#10;control logic. For example, we use EdgeLeft = 0 to represent NoEdgeLeft_isPresent, &#10;and EdgeLeft = 1 to represent EdgeLeft_isPresent. This is because SDF code generation &#10;requires a static firing of tokens, and for successful code gen, we need to make sure &#10;that at each iteration there is fixed number of tokens firing.&#10;&#10;Please put oi.h and iRobotFunctions.c into the ptolemy directory in order to code gen. &#10;After code gen, remove duplicate includes of iRobotFunctions.c. Also, please reorder &#10;the code of the function initialize() of the generated file such that the code in the &#10;right is in the front of the function. The result can be found in verification/demo/iRobotHillClimbing/iRobotExecution/iRobotCodeGenSDF.c&#10;&#10;         &#10;">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 275.0]">
        </property>
    </property>
    <property name="CCodeGenerator" class="ptolemy.codegen.c.kernel.CCodeGenerator">
        <property name="generateEmbeddedCode" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="overwriteFiles" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[595.0, 130.0]">
        </property>
    </property>
    <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 60.0]">
        </property>
    </property>
    <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textSize" class="ptolemy.data.expr.Parameter" value="10">
        </property>
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0,0.2,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="// Initialize the microcontroller&#10;initializeRobot();&#10;// Turn on the Create power if off&#10;powerOnRobot();&#10;// Start the open interface&#10;byteTx(CmdStart);&#10;// Change to 28800 baud&#10;baud28k();&#10;// Take full control of the Create&#10;byteTx(CmdFull);&#10;// Get rid of unwanted data in the serial port receiver&#10;flushRx();">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[440.0, 320.0]">
        </property>
    </property>
    <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textSize" class="ptolemy.data.expr.Parameter" value="10">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="After code generation, please use WinAVR for machine code compilation. &#10;An existing folder including all files is in the directory &#10;/ptolemy/verification/demo/iRobotHillClimbing/iRobotExecution&#10;&#10;Please rename makefile_iRobot into makefile for compilation.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[330.0, 170.0]">
        </property>
    </property>
    <property name="Documentation" class="ptolemy.vergil.kernel.attributes.DocumentationAttribute">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 55.0]">
        </property>
    </property>
    <property name="_documentation" class="ptolemy.data.expr.FileParameter" value="ptolemy/verification/README.html">
    </property>
    <property name="Annotation5" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.6,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This example does not simulate.&#10;It is intended for code generation&#10;only at this point.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[385.0, 15.0]">
        </property>
    </property>
    <entity name="iRobotSensorSignalProcessing" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 140.0]">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.EditorIcon">
            <property name="rectangle" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 0.0]">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="40">
                </property>
                <property name="centered" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="textSize" class="ptolemy.data.expr.Parameter" value="8">
                </property>
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="iRobot&#10;SENSOR&#10;SYSTEM">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-21.0, -18.0]">
                </property>
            </property>
        </property>
        <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-25.0, 100.0]">
            </property>
        </property>
        <port name="EdgeLeft" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[555.0, 170.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="EdgeRight" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[555.0, 330.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <entity name="Sensors" class="ptolemy.actor.lib.jni.EmbeddedCActor">
            <property name="embeddedCCode" class="ptolemy.kernel.util.StringAttribute" value="/** Output sensor data.&#10; *  FIXME: explain the sensor data.&#10; *&#10; * If there is more than one instance of this actor, then all instances&#10; * will share the same global sensor data array, and will also share the&#10; * same distance and angle records. It is up to the user to ensure that&#10; * no two such instances execute simultaneously.&#10; *  E.g.,&#10; *    - distance: An integer giving the total accumulated travel distance.&#10; *    - angle: &#10; */   &#10;&#10;/***fileDependencies***/&#10;oi.h&#10;iRobotFunctions.c&#10;/**/&#10;&#10;/***preinitBlock***/&#10;#ifndef SENSOR_ACTOR&#10;#define SENSOR_ACTOR&#10;&#10;#include &quot;iRobotFunctions.c&quot;&#10;#include &quot;oi.h&quot;&#10;&#10;//volatile int16_t distance = 0;&#10;//volatile int16_t angle = 0;&#10;//volatile uint8_t sensors[Sen0Size];&#10;#endif&#10;/**/&#10;&#10;/***initBlock***/&#10;  // Set the sensor data to be all zero.&#10;  // This initializes the buffer that gets&#10;  // filled by the interrupt service routine that&#10;  // reads from the serial port.&#10;  for(int i = 0; i &lt; Sen6Size; i++) {&#10;     sensors[i] = 0x0;&#10;  }&#10;/**/&#10;&#10;/***fireBlock***/&#10;if ($ref(trigger)) {&#10;  // Request Sensors Packet 2&#10;  byteTx(CmdSensors);&#10;  // Request packet 0, which has 26 bytes of information.&#10;  byteTx(0);&#10;&#10;  for(int i = 0; i &lt; Sen0Size; i++) {&#10;    sensors[i] = byteRx();&#10;  }&#10;&#10;  // Output sensor data.&#10;  $ref(bumpLeft) = sensors[SenBumpDrop] &amp; BumpLeft;&#10;  $ref(bumpRight) = sensors[SenBumpDrop] &amp; BumpRight;&#10;  $ref(wheelDropFront) = sensors[SenBumpDrop] &amp; WheelDropFront;            &#10;  $ref(wheelDropLeft) = sensors[SenBumpDrop] &amp; WheelDropLeft;            &#10;  $ref(wheelDropRight) = sensors[SenBumpDrop] &amp; WheelDropRight;            &#10;  $ref(wall) = sensors[SenWall];&#10;  $ref(cliffLeft) = sensors[SenCliffL];&#10;  $ref(cliffFrontLeft) = sensors[SenCliffFL];&#10;  $ref(cliffFrontRight) = sensors[SenCliffFR];&#10;  $ref(cliffRight) = sensors[SenCliffR];&#10;  $ref(virtualWall) = sensors[SenVWall];&#10;  $ref(advanceButton) = sensors[SenButton] &amp; ButtonAdvance;&#10;  $ref(playButton) = sensors[SenButton] &amp; ButtonPlay;&#10;  // Update accumulated distance and angle.&#10;  distance += (int)((sensors[SenDist1] &lt;&lt; 8) | sensors[SenDist0]);&#10;  $ref(distance) = distance;&#10;  angle += (int)((sensors[SenAng1] &lt;&lt; 8) | sensors[SenAng0]);&#10;  $ref(angle) = angle;&#10;/* FIXME: Skipped the battery state&#10;#define SenChargeState  16&#10;#define SenVolt1        17&#10;#define SenVolt0        18&#10;#define SenCurr1        19&#10;#define SenCurr0        20&#10;#define SenTemp         21&#10;#define SenCharge1      22&#10;#define SenCharge0      23&#10;#define SenCap1         24&#10;#define SenCap0         25&#10;*/&#10;&#10;}&#10;&#10;/**/&#10;&#10;/***wrapupBlock***/&#10;/**/&#10;&#10;">
            </property>
            <property name="_tableauFactory" class="ptolemy.vergil.toolbox.TextEditorTableauFactory">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="embeddedCCode">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[85.0, 225.0]">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.EditorIcon">
                <property name="rectangle" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{-24.0, -8.0}">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="104.0">
                    </property>
                    <property name="height" class="ptolemy.data.expr.Parameter" value="98.0">
                    </property>
                    <property name="centered" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="ellipse2" class="ptolemy.vergil.kernel.attributes.EllipseAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-24.0, -7.0]">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="74.0">
                    </property>
                    <property name="height" class="ptolemy.data.expr.Parameter" value="70.0">
                    </property>
                    <property name="centered" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="line" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-57.0, -21.0]">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="67.0">
                    </property>
                    <property name="y" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                </property>
                <property name="rectangle6" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-13.0, -36.0]">
                    </property>
                    <property name="lineColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0,1.0,1.0,1.0}">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="18.0">
                    </property>
                    <property name="height" class="ptolemy.data.expr.Parameter" value="10.0">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                    <property name="centered" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="rectangle2" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="-23.0, -32.0">
                    </property>
                    <property name="lineColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0,1.0,1.0,1.0}">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="72.0">
                    </property>
                    <property name="height" class="ptolemy.data.expr.Parameter" value="20.0">
                    </property>
                    <property name="centered" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="ellipse" class="ptolemy.vergil.kernel.attributes.EllipseAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="-24.0, -7.0">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="86.0">
                    </property>
                    <property name="height" class="ptolemy.data.expr.Parameter" value="81.0">
                    </property>
                    <property name="centered" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="none">
                    </property>
                    <property name="_renderLast" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                </property>
            </property>
            <port name="bumpLeft" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="bumpRight" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="wheelDropFront" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="wheelDropLeft" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="wheelDropRight" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="wall" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="cliffLeft" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="cliffFrontLeft" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="cliffFrontRight" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="cliffRight" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="virtualWall" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="advanceButton" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="playButton" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="distance" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="angle" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
            </port>
        </entity>
        <entity name="LogicFunction2" class="ptolemy.actor.lib.logic.LogicFunction">
            <property name="function" class="ptolemy.kernel.util.StringAttribute" value="or">
                <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                    <property name="and" class="ptolemy.kernel.util.StringAttribute" value="and">
                    </property>
                    <property name="or" class="ptolemy.kernel.util.StringAttribute" value="or">
                    </property>
                    <property name="xor" class="ptolemy.kernel.util.StringAttribute" value="xor">
                    </property>
                    <property name="nand" class="ptolemy.kernel.util.StringAttribute" value="nand">
                    </property>
                    <property name="nor" class="ptolemy.kernel.util.StringAttribute" value="nor">
                    </property>
                    <property name="xnor" class="ptolemy.kernel.util.StringAttribute" value="xnor">
                    </property>
                </property>
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[320.0, 330.0]">
            </property>
        </entity>
        <entity name="LogicFunction" class="ptolemy.actor.lib.logic.LogicFunction">
            <property name="function" class="ptolemy.kernel.util.StringAttribute" value="or">
                <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                    <property name="and" class="ptolemy.kernel.util.StringAttribute" value="and">
                    </property>
                    <property name="or" class="ptolemy.kernel.util.StringAttribute" value="or">
                    </property>
                    <property name="xor" class="ptolemy.kernel.util.StringAttribute" value="xor">
                    </property>
                    <property name="nand" class="ptolemy.kernel.util.StringAttribute" value="nand">
                    </property>
                    <property name="nor" class="ptolemy.kernel.util.StringAttribute" value="nor">
                    </property>
                    <property name="xnor" class="ptolemy.kernel.util.StringAttribute" value="xnor">
                    </property>
                </property>
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[310.0, 170.0]">
            </property>
        </entity>
        <entity name="Const2" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-50.0, 225.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
            </port>
        </entity>
        <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[425.0, 170.0]">
            </property>
        </entity>
        <entity name="BooleanToAnything2" class="ptolemy.actor.lib.conversions.BooleanToAnything">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 330.0]">
            </property>
        </entity>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="EdgeLeft" relation="relation2"/>
        <link port="EdgeRight" relation="relation9"/>
        <link port="Sensors.cliffLeft" relation="relation3"/>
        <link port="Sensors.cliffFrontLeft" relation="relation4"/>
        <link port="Sensors.cliffFrontRight" relation="relation7"/>
        <link port="Sensors.cliffRight" relation="relation8"/>
        <link port="Sensors.trigger" relation="relation5"/>
        <link port="LogicFunction2.input" relation="relation7"/>
        <link port="LogicFunction2.input" relation="relation8"/>
        <link port="LogicFunction2.output" relation="relation6"/>
        <link port="LogicFunction.input" relation="relation3"/>
        <link port="LogicFunction.input" relation="relation4"/>
        <link port="LogicFunction.output" relation="relation"/>
        <link port="Const2.output" relation="relation5"/>
        <link port="BooleanToAnything.input" relation="relation"/>
        <link port="BooleanToAnything.output" relation="relation2"/>
        <link port="BooleanToAnything2.input" relation="relation6"/>
        <link port="BooleanToAnything2.output" relation="relation9"/>
    </entity>
    <entity name="iRobotActuator" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[450.0, 130.0]">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.EditorIcon">
            <property name="rectangle" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{0, 0}">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="40">
                </property>
                <property name="centered" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="textSize" class="ptolemy.data.expr.Parameter" value="8">
                </property>
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="ACTUATOR&#10;SYSTEM">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-24.0, -13.0]">
                </property>
            </property>
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="12">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="The actuator should try to guarantee the &quot;contract&quot; offered by the environment:&#10;(1) When RotateCW occurs, it turns 45 degree clockwise&#10;(2) When RotateCCW occurs, it turns 45 degree counterclockwise&#10;(3) When it is heading NE, SW, NW, SE, it drives both 1.414 units both horizontally &#10;    and vertically. If it is heading N,E,S,W, it drives 1 unit. &#10;&#10;Therefore, our implementation tries to drive 7 unit no matter what direction it is heading.&#10;It is a close approximation when the unit is small enough, and can be viewed as &#10;obeying the contract.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-75.0, 370.0]">
            </property>
        </property>
        <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="9">
            </property>
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.4,0.2,1.0}">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Constant rotation speed&#10;of 20 mm/sec.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 15.0]">
            </property>
        </property>
        <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="9">
            </property>
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.4,0.2,1.0}">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Code for driving&#10;straight.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 260.0]">
            </property>
        </property>
        <property name="Annotation5" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="9">
            </property>
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.4,0.2,1.0}">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Code for rotating &#10;clockwise">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 55.0]">
            </property>
        </property>
        <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-35.0, -5.0]">
            </property>
        </property>
        <property name="Annotation4" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="9">
            </property>
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.4,0.2,1.0}">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Code for rotating &#10;counterclockwise">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 155.0]">
            </property>
        </property>
        <property name="Annotation6" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="9">
            </property>
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.4,0.2,1.0}">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Constant rotate angle&#10;of 45 degree.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, -30.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={85, 86, 815, 517}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{300.0, 200.0}">
        </property>
        <property name="Annotation7" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="9">
            </property>
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.4,0.2,1.0}">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Constant moving speed&#10;of 30 mm/sec.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 220.0]">
            </property>
        </property>
        <port name="RotateCW" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-15.0, 90.0]">
            </property>
        </port>
        <port name="RotateCCW" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-15.0, 200.0}">
            </property>
        </port>
        <port name="Drive" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-15.0, 300.0]">
            </property>
        </port>
        <entity name="Speed" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="30">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 30.0]">
            </property>
        </entity>
        <entity name="Const2" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="32768">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[155.0, 280.0]">
            </property>
        </entity>
        <entity name="Const3" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 180.0]">
            </property>
        </entity>
        <entity name="Drive2" class="ptolemy.actor.lib.jni.EmbeddedCActor">
            <property name="embeddedCCode" class="ptolemy.kernel.util.StringAttribute" value="/** Send a command to the iRobot Create to drive at&#10; *  the specified velocity, in mm per second, and at the&#10; *  specified angle, in mm.  The velocity can range from&#10; *  -500 to 500, and the radius from -2000 to 2000.&#10;&#10;FIXME: Use portParameters.&#10;FIXME: ExpertParameter STRAIGHT, etc.&#10;FIXME: Details from the manual below:&#10;&#10;The longer radii make Create drive straighter, while&#10;the shorter radii make Create turn more. The radius is&#10;measured from the center of the turning circle to the center&#10;of Create. A Drive command with a positive velocity and a&#10;positive radius makes Create drive forward while turning&#10;toward the left. A negative radius makes Create turn toward&#10;the right. Special cases for the radius make Create turn&#10;in place or drive straight, as specified below. A negative&#10;velocity makes Create drive backward.&#10;NOTE: Internal and environmental restrictions may prevent&#10;Create from accurately carrying out some drive commands.&#10;For example, it may not be possible for Create to drive at&#10;full speed in an arc with a large radius of curvature.&#10;? Serial sequence: [137] [Velocity high byte] [Velocity low byte]&#10;[Radius high byte] [Radius low byte]&#10;? Available in modes: Safe or Full&#10;? Changes mode to: No Change&#10;? Drive data byte 1: Velocity (-500 ? 500 mm/s)&#10;? Drive data byte 2: Radius (-2000 ? 2000 mm)&#10;Special cases:&#10;Straight = 32768 or 32767 = hex 8000 or 7FFF&#10;Turn in place clockwise = hex FFFF&#10;Turn in place counter-clockwise = hex 0001&#10;&#10; */&#10;&#10;/***fileDependencies***/&#10;oi.h&#10;iRobotFunctions.c&#10;/**/&#10;&#10;/***preinitBlock***/&#10;// Send Create drive commands in terms of velocity and radius&#10;#ifndef _DRIVE_DRIVE&#10;#define _DRIVE_DRIVE&#10;&#10;#include &quot;iRobotFunctions.c&quot;&#10;#include &quot;oi.h&quot;&#10;&#10;// Global variables&#10;volatile uint16_t timer_cnt = 0;&#10;volatile uint8_t timer_on = 0;&#10;volatile uint8_t sensors_flag = 0;&#10;volatile uint8_t sensors_index = 0;&#10;volatile uint8_t sensors_in[Sen6Size];&#10;volatile uint8_t sensors[Sen6Size];&#10;volatile int16_t distance = 0;&#10;volatile int16_t angle = 0;&#10;&#10;// Serial receive interrupt to store sensor values&#10;SIGNAL(SIG_USART_RECV)&#10;{&#10;  uint8_t temp;&#10;&#10;  temp = UDR0;&#10;&#10;  if(sensors_flag)&#10;  {&#10;    sensors_in[sensors_index++] = temp;&#10;    if(sensors_index &gt;= Sen6Size)&#10;      sensors_flag = 0;&#10;  }&#10;}&#10;&#10;&#10;// Timer 1 interrupt to time delays in ms&#10;SIGNAL(SIG_OUTPUT_COMPARE1A)&#10;{&#10;  if(timer_cnt)&#10;    timer_cnt--;&#10;  else&#10;    timer_on = 0;&#10;}&#10;&#10;void drive(int16_t velocity, int16_t radius)&#10;{&#10;  byteTx(CmdDrive);&#10;  byteTx((uint8_t)((velocity &gt;&gt; 8) &amp; 0x00FF));&#10;  byteTx((uint8_t)(velocity &amp; 0x00FF));&#10;  byteTx((uint8_t)((radius &gt;&gt; 8) &amp; 0x00FF));&#10;  byteTx((uint8_t)(radius &amp; 0x00FF));&#10;}&#10;&#10;// Delay for the specified time in ms and update sensor values&#10;void delayAndUpdateSensors(uint16_t time_ms)&#10;{&#10;  uint8_t temp;&#10;&#10;  timer_on = 1;&#10;  timer_cnt = time_ms;&#10;  while(timer_on)&#10;  {&#10;    if(!sensors_flag)&#10;    {&#10;      for(temp = 0; temp &lt; Sen6Size; temp++)&#10;        sensors[temp] = sensors_in[temp];&#10;&#10;      // Update running totals of distance and angle&#10;      distance += (int)((sensors[SenDist1] &lt;&lt; 8) | sensors[SenDist0]);&#10;      angle += (int)((sensors[SenAng1] &lt;&lt; 8) | sensors[SenAng0]);&#10;&#10;      byteTx(CmdSensors);&#10;      byteTx(6);&#10;      sensors_index = 0;&#10;      sensors_flag = 1;&#10;    }&#10;  }&#10;}&#10;&#10;#endif&#10;/**/&#10;&#10;/***initBlock***/&#10;  // As a precaution, stop driving.&#10;  // RadStraight = 32768, the code for no turns.&#10;  drive(0, RadStraight);&#10;/**/&#10;&#10;/***fireBlock***/&#10;if($ref(input)==1){&#10;&#10; drive($ref(velocity), $ref(radius));&#10;    while(-(angle) &lt;= $ref(RotateAngle)) {&#10;    drive($ref(velocity), $ref(radius));&#10;	  // Wait 20 ms&#10;  	delay10ms(2);&#10;  // Request Sensors Packet 2&#10;  byteTx(CmdSensors);&#10;  // Request packet 0, which has 26 bytes of information.&#10;  byteTx(0);&#10;&#10;  for(int i = 0; i &lt; Sen0Size; i++) {&#10;    sensors[i] = byteRx();&#10;  }&#10;  // Update accumulated distance and angle.&#10;  angle += (int)((sensors[SenAng1] &lt;&lt; 8) | sensors[SenAng0]);&#10;   }&#10;&#10;&#10;&#10;/*&#10;  drive($ref(velocity), $ref(radius));&#10;  while(-(angle) &lt;= $ref(RotateAngle)) {&#10;    // wait a little more than one robot tick for sensors to update&#10;    delayAndUpdateSensors(20);&#10;  }&#10;*/  &#10;&#10;  drive(0, RadStraight);&#10;  delay10ms(30);&#10;  //delayAndUpdateSensors(20);&#10;  angle=0;&#10;&#10;  $ref(done) = true;&#10;} else  {&#10;  drive(0, RadStraight);&#10;  //delayAndUpdateSensors(20);&#10;  delay10ms(30);&#10;  angle=0;&#10;  $ref(done) = true;&#10;}&#10;&#10;&#10;/**/&#10;&#10;/***wrapupBlock***/&#10;/**/&#10;&#10;">
            </property>
            <property name="_tableauFactory" class="ptolemy.vergil.toolbox.TextEditorTableauFactory">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="embeddedCCode">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{330.0, 80.0}">
            </property>
            <property name="delay" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="STRAIGHT" class="ptolemy.data.expr.ExpertParameter" value="32768">
            </property>
            <port name="velocity" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="done" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="radius" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
            </port>
            <port name="RotateAngle" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Const4" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 70.0]">
            </property>
        </entity>
        <entity name="Drive3" class="ptolemy.actor.lib.jni.EmbeddedCActor">
            <property name="embeddedCCode" class="ptolemy.kernel.util.StringAttribute" value="/** Send a command to the iRobot Create to drive at&#10; *  the specified velocity, in mm per second, and at the&#10; *  specified angle, in mm.  The velocity can range from&#10; *  -500 to 500, and the radius from -2000 to 2000.&#10;&#10;FIXME: Use portParameters.&#10;FIXME: ExpertParameter STRAIGHT, etc.&#10;FIXME: Details from the manual below:&#10;&#10;The longer radii make Create drive straighter, while&#10;the shorter radii make Create turn more. The radius is&#10;measured from the center of the turning circle to the center&#10;of Create. A Drive command with a positive velocity and a&#10;positive radius makes Create drive forward while turning&#10;toward the left. A negative radius makes Create turn toward&#10;the right. Special cases for the radius make Create turn&#10;in place or drive straight, as specified below. A negative&#10;velocity makes Create drive backward.&#10;NOTE: Internal and environmental restrictions may prevent&#10;Create from accurately carrying out some drive commands.&#10;For example, it may not be possible for Create to drive at&#10;full speed in an arc with a large radius of curvature.&#10;? Serial sequence: [137] [Velocity high byte] [Velocity low byte]&#10;[Radius high byte] [Radius low byte]&#10;? Available in modes: Safe or Full&#10;? Changes mode to: No Change&#10;? Drive data byte 1: Velocity (-500 ? 500 mm/s)&#10;? Drive data byte 2: Radius (-2000 ? 2000 mm)&#10;Special cases:&#10;Straight = 32768 or 32767 = hex 8000 or 7FFF&#10;Turn in place clockwise = hex FFFF&#10;Turn in place counter-clockwise = hex 0001&#10;&#10; */&#10;&#10;/***fileDependencies***/&#10;oi.h&#10;iRobotFunctions.c&#10;/**/&#10;&#10;/***preinitBlock***/&#10;// Send Create drive commands in terms of velocity and radius&#10;#ifndef _DRIVE_DRIVE&#10;#define _DRIVE_DRIVE&#10;&#10;#include &quot;iRobotFunctions.c&quot;&#10;#include &quot;oi.h&quot;&#10;&#10;// Global variables&#10;volatile uint16_t timer_cnt = 0;&#10;volatile uint8_t timer_on = 0;&#10;volatile uint8_t sensors_flag = 0;&#10;volatile uint8_t sensors_index = 0;&#10;volatile uint8_t sensors_in[Sen6Size];&#10;volatile uint8_t sensors[Sen6Size];&#10;volatile int16_t distance = 0;&#10;volatile int16_t angle = 0;&#10;&#10;// Serial receive interrupt to store sensor values&#10;SIGNAL(SIG_USART_RECV)&#10;{&#10;  uint8_t temp;&#10;&#10;&#10;  temp = UDR0;&#10;&#10;  if(sensors_flag)&#10;  {&#10;    sensors_in[sensors_index++] = temp;&#10;    if(sensors_index &gt;= Sen6Size)&#10;      sensors_flag = 0;&#10;  }&#10;}&#10;&#10;// Timer 1 interrupt to time delays in ms&#10;SIGNAL(SIG_OUTPUT_COMPARE1A)&#10;{&#10;  if(timer_cnt)&#10;    timer_cnt--;&#10;  else&#10;    timer_on = 0;&#10;}&#10;&#10;void drive(int16_t velocity, int16_t radius)&#10;{&#10;  byteTx(CmdDrive);&#10;  byteTx((uint8_t)((velocity &gt;&gt; 8) &amp; 0x00FF));&#10;  byteTx((uint8_t)(velocity &amp; 0x00FF));&#10;  byteTx((uint8_t)((radius &gt;&gt; 8) &amp; 0x00FF));&#10;  byteTx((uint8_t)(radius &amp; 0x00FF));&#10;}&#10;&#10;// Delay for the specified time in ms and update sensor values&#10;void delayAndUpdateSensors(uint16_t time_ms)&#10;{&#10;  uint8_t temp;&#10;&#10;  timer_on = 1;&#10;  timer_cnt = time_ms;&#10;  while(timer_on)&#10;  {&#10;    if(!sensors_flag)&#10;    {&#10;      for(temp = 0; temp &lt; Sen6Size; temp++)&#10;        sensors[temp] = sensors_in[temp];&#10;&#10;      // Update running totals of distance and angle&#10;      distance += (int)((sensors[SenDist1] &lt;&lt; 8) | sensors[SenDist0]);&#10;      angle += (int)((sensors[SenAng1] &lt;&lt; 8) | sensors[SenAng0]);&#10;&#10;      byteTx(CmdSensors);&#10;      byteTx(6);&#10;      sensors_index = 0;&#10;      sensors_flag = 1;&#10;    }&#10;  }&#10;}&#10;&#10;#endif&#10;/**/&#10;&#10;/***initBlock***/&#10;  // As a precaution, stop driving.&#10;  // RadStraight = 32768, the code for no turns.&#10;  drive(0, RadStraight);&#10;/**/&#10;&#10;/***fireBlock***/&#10;if($ref(input)==1){&#10;&#10; drive($ref(velocity), $ref(radius));&#10;    while(angle &lt;= $ref(RotateAngle)) {&#10;    drive($ref(velocity), $ref(radius));&#10;	  // Wait 20 ms&#10;  	delay10ms(2);&#10;  // Request Sensors Packet 2&#10;  byteTx(CmdSensors);&#10;  // Request packet 0, which has 26 bytes of information.&#10;  byteTx(0);&#10;&#10;  for(int i = 0; i &lt; Sen0Size; i++) {&#10;    sensors[i] = byteRx();&#10;  }&#10;  // Update accumulated distance and angle.&#10;  angle += (int)((sensors[SenAng1] &lt;&lt; 8) | sensors[SenAng0]);&#10;   }&#10;&#10;/*&#10;  drive($ref(velocity), $ref(radius));&#10;  while(angle &lt;= $ref(RotateAngle)) {&#10;    // wait a little more than one robot tick for sensors to update&#10;    delayAndUpdateSensors(20);&#10;  }&#10;*/  &#10;  drive(0, RadStraight);&#10;  delay10ms(30);&#10;  //delayAndUpdateSensors(20);&#10;  angle=0;&#10;&#10;  $ref(done) = true;&#10;} else {&#10;  drive(0, RadStraight);&#10;  //delayAndUpdateSensors(20);&#10;  delay10ms(30);&#10;  angle=0;&#10;}&#10;&#10;&#10;/**/&#10;&#10;/***wrapupBlock***/&#10;/**/&#10;&#10;">
            </property>
            <property name="_tableauFactory" class="ptolemy.vergil.toolbox.TextEditorTableauFactory">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="embeddedCCode">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[325.0, 190.0]">
            </property>
            <property name="delay" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="STRAIGHT" class="ptolemy.data.expr.ExpertParameter" value="32768">
            </property>
            <port name="velocity" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="done" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="radius" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
            </port>
            <port name="RotateAngle" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Drive4" class="ptolemy.actor.lib.jni.EmbeddedCActor">
            <property name="embeddedCCode" class="ptolemy.kernel.util.StringAttribute" value="/** Send a command to the iRobot Create to drive at&#10; *  the specified velocity, in mm per second, and at the&#10; *  specified angle, in mm.  The velocity can range from&#10; *  -500 to 500, and the radius from -2000 to 2000.&#10;&#10;FIXME: Use portParameters.&#10;FIXME: ExpertParameter STRAIGHT, etc.&#10;FIXME: Details from the manual below:&#10;&#10;The longer radii make Create drive straighter, while&#10;the shorter radii make Create turn more. The radius is&#10;measured from the center of the turning circle to the center&#10;of Create. A Drive command with a positive velocity and a&#10;positive radius makes Create drive forward while turning&#10;toward the left. A negative radius makes Create turn toward&#10;the right. Special cases for the radius make Create turn&#10;in place or drive straight, as specified below. A negative&#10;velocity makes Create drive backward.&#10;NOTE: Internal and environmental restrictions may prevent&#10;Create from accurately carrying out some drive commands.&#10;For example, it may not be possible for Create to drive at&#10;full speed in an arc with a large radius of curvature.&#10;? Serial sequence: [137] [Velocity high byte] [Velocity low byte]&#10;[Radius high byte] [Radius low byte]&#10;? Available in modes: Safe or Full&#10;? Changes mode to: No Change&#10;? Drive data byte 1: Velocity (-500 ? 500 mm/s)&#10;? Drive data byte 2: Radius (-2000 ? 2000 mm)&#10;Special cases:&#10;Straight = 32768 or 32767 = hex 8000 or 7FFF&#10;Turn in place clockwise = hex FFFF&#10;Turn in place counter-clockwise = hex 0001&#10;&#10; */&#10;&#10;/***fileDependencies***/&#10;oi.h&#10;iRobotFunctions.c&#10;/**/&#10;&#10;/***preinitBlock***/&#10;// Send Create drive commands in terms of velocity and radius&#10;#ifndef _DRIVE_DRIVE&#10;#define _DRIVE_DRIVE&#10;#include &quot;iRobotFunctions.c&quot;&#10;#include &quot;oi.h&quot;&#10;// Global variables&#10;volatile uint16_t timer_cnt = 0;&#10;volatile uint8_t timer_on = 0;&#10;volatile uint8_t sensors_flag = 0;&#10;volatile uint8_t sensors_index = 0;&#10;volatile uint8_t sensors_in[Sen6Size];&#10;volatile uint8_t sensors[Sen6Size];&#10;volatile int16_t distance = 0;&#10;volatile int16_t angle = 0;&#10;&#10;// Serial receive interrupt to store sensor values&#10;SIGNAL(SIG_USART_RECV)&#10;{&#10;  uint8_t temp;&#10;  temp = UDR0;&#10;  if(sensors_flag)&#10;  {&#10;    sensors_in[sensors_index++] = temp;&#10;    if(sensors_index &gt;= Sen6Size)&#10;      sensors_flag = 0;&#10;  }&#10;}&#10;&#10;&#10;&#10;&#10;// Timer 1 interrupt to time delays in ms&#10;SIGNAL(SIG_OUTPUT_COMPARE1A)&#10;{&#10;  if(timer_cnt)&#10;    timer_cnt--;&#10;  else&#10;    timer_on = 0;&#10;}&#10;&#10;void drive(int16_t velocity, int16_t radius)&#10;{&#10;  byteTx(CmdDrive);&#10;  byteTx((uint8_t)((velocity &gt;&gt; 8) &amp; 0x00FF));&#10;  byteTx((uint8_t)(velocity &amp; 0x00FF));&#10;  byteTx((uint8_t)((radius &gt;&gt; 8) &amp; 0x00FF));&#10;  byteTx((uint8_t)(radius &amp; 0x00FF));&#10;}&#10;&#10;// Delay for the specified time in ms and update sensor values&#10;void delayAndUpdateSensors(uint16_t time_ms)&#10;{&#10;  uint8_t temp;&#10;&#10;  timer_on = 1;&#10;  timer_cnt = time_ms;&#10;  while(timer_on)&#10;  {&#10;    if(!sensors_flag)&#10;    {&#10;      for(temp = 0; temp &lt; Sen6Size; temp++)&#10;        sensors[temp] = sensors_in[temp];&#10;&#10;      // Update running totals of distance and angle&#10;      distance += (int)((sensors[SenDist1] &lt;&lt; 8) | sensors[SenDist0]);&#10;      angle += (int)((sensors[SenAng1] &lt;&lt; 8) | sensors[SenAng0]);&#10;&#10;      byteTx(CmdSensors);&#10;      byteTx(6);&#10;      sensors_index = 0;&#10;      sensors_flag = 1;&#10;    }&#10;  }&#10;}&#10;#endif&#10;/**/&#10;&#10;/***initBlock***/&#10;  // As a precaution, stop driving.&#10;  // RadStraight = 32768, the code for no turns.&#10;  drive(0, RadStraight);&#10;/**/&#10;&#10;/***fireBlock***/&#10;if($ref(input)==1){&#10;&#10; drive($ref(velocity)*5, $ref(radius));&#10;    while(distance &lt;= $ref(UnitDistance)){&#10;	drive($ref(velocity)*5, $ref(radius));&#10;	  // Wait 20 ms&#10;  	delay10ms(5);&#10;  // Request Sensors Packet 2&#10;  byteTx(CmdSensors);&#10;  // Request packet 0, which has 26 bytes of information.&#10;  byteTx(0);&#10;&#10;  for(int i = 0; i &lt; Sen0Size; i++) {&#10;    sensors[i] = byteRx();&#10;  }&#10;  // Update accumulated distance and angle.&#10;  distance += (int)((sensors[SenDist1] &lt;&lt; 8) | sensors[SenDist0]);&#10;   }&#10;&#10;/*&#10;  drive($ref(velocity), $ref(radius));&#10;	&#10;    //while(distance &lt;= $ref(UnitDistance)){&#10;      //while(distance &lt;= 20){&#10;      //drive($ref(velocity), $ref(radius));&#10;      //delayAndUpdateSensors(20);&#10;   //}&#10;*/&#10;  drive(0, RadStraight);&#10;  //delayAndUpdateSensors(20);&#10;  delay10ms(30);&#10;  distance = 0;&#10;&#10;  $ref(done) = true;&#10;&#10;} else if($ref(input)==1.414){&#10;&#10; drive($ref(velocity)*5, $ref(radius));&#10;    while(distance &lt;= $ref(UnitDistance)* 1.414){&#10;	drive($ref(velocity)*5, $ref(radius));&#10;	  // Wait 20 ms&#10;  	delay10ms(5);&#10;  // Request Sensors Packet 2&#10;  byteTx(CmdSensors);&#10;  // Request packet 0, which has 26 bytes of information.&#10;  byteTx(0);&#10;&#10;  for(int i = 0; i &lt; Sen0Size; i++) {&#10;    sensors[i] = byteRx();&#10;  }&#10;  // Update accumulated distance and angle.&#10;  distance += (int)((sensors[SenDist1] &lt;&lt; 8) | sensors[SenDist0]);&#10;   }&#10;&#10;&#10;/*&#10;  drive($ref(velocity), $ref(radius));&#10;  //while(distance &lt;= $ref(UnitDistance) * 1.414){&#10;     while(distance &lt;= 20){&#10;    // drive($ref(velocity), $ref(radius));&#10;    delayAndUpdateSensors(20);&#10;}&#10;&#10;*/&#10;  drive(0, RadStraight);&#10;  //delayAndUpdateSensors(20);&#10;  delay10ms(30);&#10;  distance = 0;&#10;&#10;  $ref(done) = true;&#10;&#10;} else {&#10;  drive(0, RadStraight);&#10;  //delayAndUpdateSensors(20);&#10;  delay10ms(30);&#10;  angle=0;&#10;  $ref(done) = true;&#10;}&#10;&#10;&#10;/**/&#10;&#10;/***wrapupBlock***/&#10;/**/&#10;&#10;">
            </property>
            <property name="_tableauFactory" class="ptolemy.vergil.toolbox.TextEditorTableauFactory">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="embeddedCCode">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[325.0, 290.0]">
            </property>
            <property name="delay" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="STRAIGHT" class="ptolemy.data.expr.ExpertParameter" value="32768">
            </property>
            <port name="velocity" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="done" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="radius" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
                </property>
            </port>
            <port name="UnitDistance" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="RotateAngle" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="22.5">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, -15.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
                </property>
            </port>
        </entity>
        <entity name="UnitDistance" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="10">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[150.0, 335.0]">
            </property>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[215.0, 30.0]">
            </vertex>
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[235.0, 100.0]">
            </vertex>
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="RotateCW" relation="relation"/>
        <link port="RotateCCW" relation="relation2"/>
        <link port="Drive" relation="relation8"/>
        <link port="Speed.output" relation="relation4"/>
        <link port="Const2.output" relation="relation7"/>
        <link port="Const3.output" relation="relation5"/>
        <link port="Drive2.velocity" relation="relation4"/>
        <link port="Drive2.radius" relation="relation6"/>
        <link port="Drive2.input" relation="relation"/>
        <link port="Drive2.RotateAngle" relation="relation9"/>
        <link port="Const4.output" relation="relation6"/>
        <link port="Drive3.velocity" relation="relation4"/>
        <link port="Drive3.radius" relation="relation5"/>
        <link port="Drive3.input" relation="relation2"/>
        <link port="Drive3.RotateAngle" relation="relation9"/>
        <link port="Drive4.velocity" relation="relation4"/>
        <link port="Drive4.radius" relation="relation7"/>
        <link port="Drive4.input" relation="relation8"/>
        <link port="Drive4.UnitDistance" relation="relation10"/>
        <link port="RotateAngle.output" relation="relation9"/>
        <link port="UnitDistance.output" relation="relation10"/>
    </entity>
    <entity name="iRobotCtrl" class="ptolemy.domains.fsm.modal.ModalModel">
        <property name="_tableauFactory" class="ptolemy.vergil.fsm.modal.ModalTableauFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[270.0, 140.0]">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.EditorIcon">
            <property name="ellipse" class="ptolemy.vergil.kernel.attributes.EllipseAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 1.0]">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="69.0">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="57.0">
                </property>
                <property name="centered" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="rectangle" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[1.0, -3.0]">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="43.0">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="10.0">
                </property>
                <property name="centered" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.4,1.0,0.0,1.0}">
                </property>
            </property>
        </property>
        <port name="AccLC" class="ptolemy.domains.fsm.modal.ModalPort">
            <property name="input"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="AccLN" class="ptolemy.domains.fsm.modal.ModalPort">
            <property name="input"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="AccLS" class="ptolemy.domains.fsm.modal.ModalPort">
            <property name="input"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="AccRC" class="ptolemy.domains.fsm.modal.ModalPort">
            <property name="input"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="AccRN" class="ptolemy.domains.fsm.modal.ModalPort">
            <property name="input"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="AccRS" class="ptolemy.domains.fsm.modal.ModalPort">
            <property name="input"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="RotateCW" class="ptolemy.domains.fsm.modal.ModalPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="RotateCCW" class="ptolemy.domains.fsm.modal.ModalPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="Drive" class="ptolemy.domains.fsm.modal.ModalPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
            </property>
        </port>
        <port name="EdgeLeft" class="ptolemy.domains.fsm.modal.ModalPort">
            <property name="input"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="WEST">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="EdgeRight" class="ptolemy.domains.fsm.modal.ModalPort">
            <property name="input"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="WEST">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="Initialize" class="ptolemy.domains.fsm.modal.ModalPort">
            <property name="output"/>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
            </property>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="_Controller" class="ptolemy.domains.fsm.modal.ModalController">
            <property name="Rectangle" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, -465.0]">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="185.0">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="186.0">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.8,0.8,0.8,1.0}">
                </property>
                <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
            </property>
            <property name="_library" class="ptolemy.moml.LibraryAttribute">
                <configure>
        <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.fsm.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory"></property></entity></entity>
      </configure>
            </property>
            <property name="Rectangle2" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1318.0, -362.9999999999998]">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="95.0">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="83.0">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.8,0.8,0.8,1.0}">
                </property>
                <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
            </property>
            <property name="Rectangle3" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1305.0, -269.9999999999991]">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="67.0">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="118.0">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.8,0.8,0.8,1.0}">
                </property>
                <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
            </property>
            <property name="Rectangle4" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1305.0, -144.99999999999898]">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="67.0">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="118.0">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.8,0.8,0.8,1.0}">
                </property>
                <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
            </property>
            <property name="Rectangle5" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[834.5593566894531, 458.0252017694818]">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="81.0">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="99.0">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.8,0.8,0.8,1.0}">
                </property>
                <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
            </property>
            <property name="Rectangle6" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[835.0, 570.0]">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="81.0">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="98.0">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.8,0.8,0.8,1.0}">
                </property>
                <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="textSize" class="ptolemy.data.expr.Parameter" value="12">
                </property>
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="For this simple robotic controller, it tries to perform hill climbing and &#10;avoid falling from edges. Theoretically, given signals offered by the &#10;environment, the robot can be aware of its heading direction. Here we &#10;simply implement a reactive controller, and try to apply formal &#10;verification to see if it satisfies the spec.&#10;&#10;First, it tries to rotate to up. When EdgeLeft event is present, it first &#10;rotates clockwise until NoEdgeLeft is present, then continuously rotate &#10;clockwise until it is facing up (N, NE, NW), and drive the robot until &#10;(1) another edge is encountered or (2) The flat surface is reached.&#10;Similarily, the robot would rotate counterclockwise when EdgeRight &#10;is present.&#10;&#10;The possible behavior would be climbing up the hill with zig-zag fashion.">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1305.0, 505.0]">
                </property>
            </property>
            <property name="Rectangle7" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1320.0, -455.0]">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="95.0">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="83.0">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.8,0.8,0.8,1.0}">
                </property>
                <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
            </property>
            <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="textSize" class="ptolemy.data.expr.Parameter" value="9">
                </property>
                <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.2,0.2,0.0,1.0}">
                </property>
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Used to adjust the system into &#10;the status which is the same as&#10;system under verification">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[33.64683532714844, -342.0426635742197]">
                </property>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={104, 125, 815, 517}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{178.9122456251976, -233.7568057281802}">
            </property>
            <port name="AccLC" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1285.0, -239.99999999999898]">
                </property>
            </port>
            <port name="AccLN" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1285.0, -204.99999999999898]">
                </property>
            </port>
            <port name="AccLS" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1285.0, -169.99999999999898]">
                </property>
            </port>
            <port name="AccRC" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1285.0, -114.99999999999898]">
                </property>
            </port>
            <port name="AccRN" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1285.0, -79.99999999999898]">
                </property>
            </port>
            <port name="AccRS" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1285.0, -44.99999999999898]">
                </property>
            </port>
            <port name="RotateCW" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[854.5593566894527, 493.02520176948144]">
                </property>
            </port>
            <port name="RotateCCW" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[854.5593566894527, 533.0252017694814]">
                </property>
            </port>
            <port name="Drive" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[858.3193585975096, 607.9288625993654]">
                </property>
            </port>
            <port name="EdgeLeft" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1295.0, -424.9999999999998]">
                </property>
            </port>
            <port name="EdgeRight" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-1295.0, -334.9999999999991]">
                </property>
            </port>
            <port name="Initialize" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[153.64683532714844, -407.0426635742197]">
                </property>
            </port>
            <entity name="Stop" class="ptolemy.domains.fsm.kernel.State">
                <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[315.0, 585.0]">
                </property>
            </entity>
            <entity name="EdgeInRight" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[365.0, -270.0]">
                </property>
            </entity>
            <entity name="Init" class="ptolemy.domains.fsm.kernel.State">
                <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[110.0, -125.0]">
                </property>
            </entity>
            <entity name="Drive" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[125.0, 210.0]">
                </property>
            </entity>
            <entity name="ModifyDirection1" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-755.0, 0.0]">
                </property>
            </entity>
            <entity name="ModifyDirection2" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[865.0, -55.0]">
                </property>
            </entity>
            <entity name="SelfRotate" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-940.0, 465.0]">
                </property>
            </entity>
            <entity name="EdgeInLeft" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-185.0, -255.0]">
                </property>
            </entity>
            <entity name="i1" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-815.0, 340.0]">
                </property>
            </entity>
            <entity name="i2" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-900.0, -180.0]">
                </property>
            </entity>
            <entity name="i3" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-35.0, -305.0]">
                </property>
            </entity>
            <entity name="i4" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, -300.0]">
                </property>
            </entity>
            <entity name="i5" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[955.0, -260.0]">
                </property>
            </entity>
            <entity name="d1" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-140.0, 125.0]">
                </property>
            </entity>
            <entity name="d2" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 430.0]">
                </property>
            </entity>
            <entity name="d3" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[340.0, 160.0]">
                </property>
            </entity>
            <entity name="d4" class="ptolemy.domains.fsm.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[345.0, 285.0]">
                </property>
            </entity>
            <entity name="PowerOn" class="ptolemy.domains.fsm.kernel.State">
                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="PowerOn">
                </property>
                <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{90.0, -435.0}">
                </property>
            </entity>
            <relation name="relation3" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.15928042531490025">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.9059633659512654">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation4" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLN == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.484976207826975">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.1273845137843224">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation2" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; EdgeRight == 0">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.4739710523225252">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.6783643773826724">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation5" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLN == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-2.0790149658263477">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.3688610221922144">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation6" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLC == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.630628064337412">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.42834094401973277">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation7" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLN == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.16975971804336337">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.2872645472111672">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation8" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; EdgeRight == 0&#10;&amp;&amp; AccLC == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.9249980845718415">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation9" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLN == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.9908486923403409">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.033233100196971836">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation10" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLC == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.7107608737406617">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.03662936930960453">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation11" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLS == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.7453022508176532">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.3905784437535628">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation12" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLS == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.6891370440460364">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.8529940525304504">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation13" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLS == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.007977145522721739">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.33798813425212393">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation14" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLC == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.2060433982128784">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.41267321783600164">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation16" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.44296650116920294">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.25060101627975">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.10038359362693751">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.254082871683561">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation15" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.17636706721735074">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.875795045906221">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation17" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.6896626234877288">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.2824727934825606">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation18" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLC == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.013332873503203106">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.010141195855939">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation19" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLC == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.097174879433798">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.7455768468096293">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation20" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLN == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.5954225907032877">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.7649771045740206">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation21" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLC == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="1.2649045324546746">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.562331560267768">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation22" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLN == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.9669075617772127">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.5756445548102243">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation23" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLC == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.030065195414973003">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.8164157776674945">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation24" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLS == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.37189940763671964">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.692363298987429">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation25" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLS == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.7645119553771565">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.712606429730885">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation26" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="AccLS == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.3712273609948105">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.75840336273171">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation27" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLN == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.5050660325782619">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.9089176284350486">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation28" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLC == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.21519137469008465">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation29" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLC == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.1907998728834524">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.6464892244658281">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation30" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.8100066977597504">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation31" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLC == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.6933753422227255">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.3046656739343814">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation32" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLN == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.0859070711008474">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.3460514252822986">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation33" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLC == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.459353622583123">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.6357350448116494">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation34" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLC == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.7890533990657629">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.5578221532096026">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation35" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLN == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.2143524426191283">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.4973840931977938">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation36" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLC == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.5156756069815405">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.5064043996183485">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation37" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 0 &amp;&amp; AccLC == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="1.253562060925131">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.2936033270814387">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation38" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 0 &amp;&amp; AccLN == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="1.9791246371513955">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.11250590353177">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation39" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 0 &amp;&amp; AccLS == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.269644356112477">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation40" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 0 &amp;&amp; AccLS == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="1.5955056344029663">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.1464754790596097">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation41" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 0 &amp;&amp; AccLS == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.202426460434364">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.110662689363342">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation42" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLS == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.4463002460022907">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.0069314303528114">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation43" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLN == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.9437524881352476">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.0193348189922355">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation44" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLS == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.23290387103840005">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.0061443683267735">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation45" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; AccLS == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.7147191834562369">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.015097591642043">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation46" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 0 &amp;&amp; AccLC == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.9143033278483288">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.0032964077629479434">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation47" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 0 &amp;&amp; AccLN == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.5374932047152363">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.17627670645863439">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation48" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 0 &amp;&amp; AccLS == 1 &amp;&amp; AccRS == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.14186791731697276">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.021743186580073487">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation49" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 0 &amp;&amp; AccLS == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.09067085960971064">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.013866297445971894">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation50" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeRight == 0 &amp;&amp; AccLS == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.256819530332636">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.010958937478920213">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation51" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; EdgeRight == 0&#10;&amp;&amp; AccLC == 1 &amp;&amp; AccRN == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.011768731157027056">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.5171124036850063">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation52" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="EdgeLeft == 0 &amp;&amp; EdgeRight == 0&#10;&amp;&amp; AccLN == 1 &amp;&amp; AccRC == 1">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.5402091068194261">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.677130288955942">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation53" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 1; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.6182829350945541">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.4370955048496046">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation54" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 1; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.26487857343000665">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.39544505000893015">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation55" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 1; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.3323025924773807">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.802592269128789">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation56" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCCW = 1; RotateCW = 0;  Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.44587394552620185">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation57" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCCW = 1; RotateCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.1143957775370457">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.9920089591249144">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation58" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="Drive = 1.414; RotateCW = 0; RotateCCW = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.37690115179727895">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.6181910408148827">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation59" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="Drive = 1; RotateCW = 0; RotateCCW = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.035758022665588786">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.30716565593364603">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation60" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="Drive = 1; RotateCW = 0; RotateCCW = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.04068695185557827">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.90856166621655">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation61" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="Drive = 1.414; RotateCW = 0; RotateCCW = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.15113354349287464">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.8254320881168162">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation62" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                </property>
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute" value="RotateCW = 0; RotateCCW = 0; Drive = 0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.5334754701339353">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <link port="Stop.incomingPort" relation="relation4"/>
            <link port="Stop.incomingPort" relation="relation7"/>
            <link port="EdgeInRight.incomingPort" relation="relation56"/>
            <link port="EdgeInRight.outgoingPort" relation="relation30"/>
            <link port="EdgeInRight.outgoingPort" relation="relation31"/>
            <link port="EdgeInRight.outgoingPort" relation="relation32"/>
            <link port="EdgeInRight.outgoingPort" relation="relation33"/>
            <link port="EdgeInRight.outgoingPort" relation="relation46"/>
            <link port="EdgeInRight.outgoingPort" relation="relation47"/>
            <link port="EdgeInRight.outgoingPort" relation="relation48"/>
            <link port="EdgeInRight.outgoingPort" relation="relation49"/>
            <link port="EdgeInRight.outgoingPort" relation="relation50"/>
            <link port="Init.incomingPort" relation="relation62"/>
            <link port="Init.outgoingPort" relation="relation3"/>
            <link port="Init.outgoingPort" relation="relation2"/>
            <link port="Init.outgoingPort" relation="relation7"/>
            <link port="Init.outgoingPort" relation="relation"/>
            <link port="Drive.incomingPort" relation="relation58"/>
            <link port="Drive.incomingPort" relation="relation59"/>
            <link port="Drive.incomingPort" relation="relation60"/>
            <link port="Drive.incomingPort" relation="relation61"/>
            <link port="Drive.outgoingPort" relation="relation4"/>
            <link port="Drive.outgoingPort" relation="relation8"/>
            <link port="Drive.outgoingPort" relation="relation16"/>
            <link port="Drive.outgoingPort" relation="relation15"/>
            <link port="Drive.outgoingPort" relation="relation51"/>
            <link port="Drive.outgoingPort" relation="relation52"/>
            <link port="ModifyDirection1.incomingPort" relation="relation54"/>
            <link port="ModifyDirection1.outgoingPort" relation="relation19"/>
            <link port="ModifyDirection1.outgoingPort" relation="relation20"/>
            <link port="ModifyDirection1.outgoingPort" relation="relation24"/>
            <link port="ModifyDirection1.outgoingPort" relation="relation25"/>
            <link port="ModifyDirection1.outgoingPort" relation="relation26"/>
            <link port="ModifyDirection1.outgoingPort" relation="relation27"/>
            <link port="ModifyDirection1.outgoingPort" relation="relation28"/>
            <link port="ModifyDirection1.outgoingPort" relation="relation29"/>
            <link port="ModifyDirection2.incomingPort" relation="relation57"/>
            <link port="ModifyDirection2.outgoingPort" relation="relation34"/>
            <link port="ModifyDirection2.outgoingPort" relation="relation35"/>
            <link port="ModifyDirection2.outgoingPort" relation="relation36"/>
            <link port="ModifyDirection2.outgoingPort" relation="relation37"/>
            <link port="ModifyDirection2.outgoingPort" relation="relation38"/>
            <link port="ModifyDirection2.outgoingPort" relation="relation39"/>
            <link port="ModifyDirection2.outgoingPort" relation="relation40"/>
            <link port="ModifyDirection2.outgoingPort" relation="relation41"/>
            <link port="SelfRotate.incomingPort" relation="relation53"/>
            <link port="SelfRotate.outgoingPort" relation="relation5"/>
            <link port="SelfRotate.outgoingPort" relation="relation6"/>
            <link port="SelfRotate.outgoingPort" relation="relation9"/>
            <link port="SelfRotate.outgoingPort" relation="relation10"/>
            <link port="SelfRotate.outgoingPort" relation="relation11"/>
            <link port="SelfRotate.outgoingPort" relation="relation12"/>
            <link port="SelfRotate.outgoingPort" relation="relation13"/>
            <link port="SelfRotate.outgoingPort" relation="relation14"/>
            <link port="EdgeInLeft.incomingPort" relation="relation55"/>
            <link port="EdgeInLeft.outgoingPort" relation="relation17"/>
            <link port="EdgeInLeft.outgoingPort" relation="relation18"/>
            <link port="EdgeInLeft.outgoingPort" relation="relation21"/>
            <link port="EdgeInLeft.outgoingPort" relation="relation22"/>
            <link port="EdgeInLeft.outgoingPort" relation="relation23"/>
            <link port="EdgeInLeft.outgoingPort" relation="relation42"/>
            <link port="EdgeInLeft.outgoingPort" relation="relation43"/>
            <link port="EdgeInLeft.outgoingPort" relation="relation44"/>
            <link port="EdgeInLeft.outgoingPort" relation="relation45"/>
            <link port="i1.incomingPort" relation="relation14"/>
            <link port="i1.incomingPort" relation="relation11"/>
            <link port="i1.incomingPort" relation="relation5"/>
            <link port="i1.incomingPort" relation="relation12"/>
            <link port="i1.incomingPort" relation="relation13"/>
            <link port="i1.incomingPort" relation="relation2"/>
            <link port="i1.outgoingPort" relation="relation53"/>
            <link port="i2.incomingPort" relation="relation24"/>
            <link port="i2.incomingPort" relation="relation20"/>
            <link port="i2.incomingPort" relation="relation25"/>
            <link port="i2.incomingPort" relation="relation19"/>
            <link port="i2.incomingPort" relation="relation26"/>
            <link port="i2.incomingPort" relation="relation45"/>
            <link port="i2.incomingPort" relation="relation42"/>
            <link port="i2.incomingPort" relation="relation44"/>
            <link port="i2.incomingPort" relation="relation18"/>
            <link port="i2.incomingPort" relation="relation43"/>
            <link port="i2.outgoingPort" relation="relation54"/>
            <link port="i3.incomingPort" relation="relation17"/>
            <link port="i3.incomingPort" relation="relation"/>
            <link port="i3.incomingPort" relation="relation15"/>
            <link port="i3.outgoingPort" relation="relation55"/>
            <link port="i4.incomingPort" relation="relation3"/>
            <link port="i4.incomingPort" relation="relation30"/>
            <link port="i4.incomingPort" relation="relation16"/>
            <link port="i4.outgoingPort" relation="relation56"/>
            <link port="i5.incomingPort" relation="relation37"/>
            <link port="i5.incomingPort" relation="relation46"/>
            <link port="i5.incomingPort" relation="relation49"/>
            <link port="i5.incomingPort" relation="relation48"/>
            <link port="i5.incomingPort" relation="relation50"/>
            <link port="i5.incomingPort" relation="relation38"/>
            <link port="i5.incomingPort" relation="relation40"/>
            <link port="i5.incomingPort" relation="relation39"/>
            <link port="i5.incomingPort" relation="relation41"/>
            <link port="i5.incomingPort" relation="relation47"/>
            <link port="i5.outgoingPort" relation="relation57"/>
            <link port="d1.incomingPort" relation="relation28"/>
            <link port="d1.incomingPort" relation="relation23"/>
            <link port="d1.incomingPort" relation="relation8"/>
            <link port="d1.incomingPort" relation="relation6"/>
            <link port="d1.outgoingPort" relation="relation59"/>
            <link port="d2.incomingPort" relation="relation27"/>
            <link port="d2.incomingPort" relation="relation29"/>
            <link port="d2.incomingPort" relation="relation22"/>
            <link port="d2.incomingPort" relation="relation21"/>
            <link port="d2.incomingPort" relation="relation52"/>
            <link port="d2.incomingPort" relation="relation51"/>
            <link port="d2.incomingPort" relation="relation10"/>
            <link port="d2.incomingPort" relation="relation9"/>
            <link port="d2.outgoingPort" relation="relation58"/>
            <link port="d3.incomingPort" relation="relation31"/>
            <link port="d3.incomingPort" relation="relation34"/>
            <link port="d3.outgoingPort" relation="relation60"/>
            <link port="d4.incomingPort" relation="relation32"/>
            <link port="d4.incomingPort" relation="relation33"/>
            <link port="d4.incomingPort" relation="relation36"/>
            <link port="d4.incomingPort" relation="relation35"/>
            <link port="d4.outgoingPort" relation="relation61"/>
            <link port="PowerOn.outgoingPort" relation="relation62"/>
        </entity>
        <entity name="DriveForward" class="ptolemy.domains.fsm.modal.Refinement">
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="textSize" class="ptolemy.data.expr.Parameter" value="12">
                </property>
                <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.4,0.2,1.0}">
                </property>
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Constant speed&#10;of 50 mm/sec.">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[90.0, 145.0]">
                </property>
            </property>
            <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="textSize" class="ptolemy.data.expr.Parameter" value="12">
                </property>
                <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.4,0.2,1.0}">
                </property>
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Code for&#10;driving&#10;straight.">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[95.0, 230.0]">
                </property>
            </property>
            <port name="AccLC" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, -130.0]">
                </property>
            </port>
            <port name="AccLN" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, -85.0]">
                </property>
            </port>
            <port name="AccLS" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, -45.0]">
                </property>
            </port>
            <port name="AccRC" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[55.0, -130.0]">
                </property>
            </port>
            <port name="AccRN" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[55.0, -85.0]">
                </property>
            </port>
            <port name="AccRS" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[55.0, -45.0]">
                </property>
            </port>
            <port name="RotateCW" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 20.0]">
                </property>
            </port>
            <port name="RotateCCW" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 65.0]">
                </property>
            </port>
            <port name="Drive" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 110.0]">
                </property>
            </port>
            <port name="EdgeLeft" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-15.0, 40.0]">
                </property>
            </port>
            <port name="EdgeRight" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-10.0, 80.0]">
                </property>
            </port>
            <port name="Initialize" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="output"/>
            </port>
            <entity name="Const" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="32768">
                </property>
                <doc>Create a constant sequence.</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[130.0, 215.0]">
                </property>
            </entity>
            <entity name="Const2" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="50">
                </property>
                <doc>Create a constant sequence.</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[125.0, 135.0]">
                </property>
            </entity>
            <entity name="Drive2" class="ptolemy.actor.lib.jni.EmbeddedCActor">
                <property name="embeddedCCode" class="ptolemy.kernel.util.StringAttribute" value="/** Send a command to the iRobot Create to drive at&#10; *  the specified velocity, in mm per second, and at the&#10; *  specified angle, in mm.  The velocity can range from&#10; *  -500 to 500, and the radius from -2000 to 2000.&#10;&#10;FIXME: Use portParameters.&#10;FIXME: ExpertParameter STRAIGHT, etc.&#10;FIXME: Details from the manual below:&#10;&#10;The longer radii make Create drive straighter, while&#10;the shorter radii make Create turn more. The radius is&#10;measured from the center of the turning circle to the center&#10;of Create. A Drive command with a positive velocity and a&#10;positive radius makes Create drive forward while turning&#10;toward the left. A negative radius makes Create turn toward&#10;the right. Special cases for the radius make Create turn&#10;in place or drive straight, as specified below. A negative&#10;velocity makes Create drive backward.&#10;NOTE: Internal and environmental restrictions may prevent&#10;Create from accurately carrying out some drive commands.&#10;For example, it may not be possible for Create to drive at&#10;full speed in an arc with a large radius of curvature.&#10;? Serial sequence: [137] [Velocity high byte] [Velocity low byte]&#10;[Radius high byte] [Radius low byte]&#10;? Available in modes: Safe or Full&#10;? Changes mode to: No Change&#10;? Drive data byte 1: Velocity (-500 ? 500 mm/s)&#10;? Drive data byte 2: Radius (-2000 ? 2000 mm)&#10;Special cases:&#10;Straight = 32768 or 32767 = hex 8000 or 7FFF&#10;Turn in place clockwise = hex FFFF&#10;Turn in place counter-clockwise = hex 0001&#10;&#10; */&#10;&#10;/***preinitBlock***/&#10;// Send Create drive commands in terms of velocity and radius&#10;#ifndef _DRIVE_DRIVE&#10;#define _DRIVE_DRIVE&#10;void drive(int16_t velocity, int16_t radius)&#10;{&#10;  byteTx(CmdDrive);&#10;  byteTx((uint8_t)((velocity &gt;&gt; 8) &amp; 0x00FF));&#10;  byteTx((uint8_t)(velocity &amp; 0x00FF));&#10;  byteTx((uint8_t)((radius &gt;&gt; 8) &amp; 0x00FF));&#10;  byteTx((uint8_t)(radius &amp; 0x00FF));&#10;}&#10;#endif&#10;/**/&#10;&#10;/***initBlock***/&#10;  // As a precaution, stop driving.&#10;  // RadStraight = 32768, the code for no turns.&#10;  drive(0, RadStraight);&#10;/**/&#10;&#10;/***fireBlock***/&#10;  drive($ref(velocity), $ref(radius));&#10;  $ref(done) = true;&#10;/**/&#10;&#10;/***wrapupBlock***/&#10;/**/&#10;&#10;">
                </property>
                <property name="_tableauFactory" class="ptolemy.vergil.toolbox.TextEditorTableauFactory">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="embeddedCCode">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[280.0, 175.0]">
                </property>
                <property name="delay" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="STRAIGHT" class="ptolemy.data.expr.ExpertParameter" value="32768">
                </property>
                <port name="velocity" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                    </property>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="done" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                    </property>
                </port>
                <port name="radius" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                    </property>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[265.0, 170.0]">
                </vertex>
            </relation>
            <link port="Const.output" relation="relation2"/>
            <link port="Const2.output" relation="relation"/>
            <link port="Drive2.velocity" relation="relation"/>
            <link port="Drive2.radius" relation="relation2"/>
        </entity>
        <entity name="PowerOn" class="ptolemy.domains.fsm.modal.Refinement">
            <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[95.0, 75.0]">
                </property>
            </property>
            <port name="AccLC" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-55.0, 15.0]">
                </property>
            </port>
            <port name="AccLN" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 100.0]">
                </property>
            </port>
            <port name="AccLS" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-55.0, 70.0]">
                </property>
            </port>
            <port name="AccRC" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-40.0, 190.0]">
                </property>
            </port>
            <port name="AccRN" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 170.0]">
                </property>
            </port>
            <port name="AccRS" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[85.0, 175.0]">
                </property>
            </port>
            <port name="RotateCW" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[350.0, 185.0]">
                </property>
            </port>
            <port name="RotateCCW" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[350.0, 235.0]">
                </property>
            </port>
            <port name="Drive" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[350.0, 285.0]">
                </property>
            </port>
            <port name="EdgeLeft" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[55.0, 275.0]">
                </property>
            </port>
            <port name="EdgeRight" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 230.0]">
                </property>
            </port>
            <port name="Initialize" class="ptolemy.domains.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[350.0, 60.0]">
                </property>
            </port>
            <entity name="initializeIRobot" class="ptolemy.actor.lib.jni.EmbeddedCActor">
                <property name="embeddedCCode" class="ptolemy.kernel.util.StringAttribute" value="/***fileDependencies***/&#10;oi.h&#10;iRobotFunctions.c&#10;/**/&#10;&#10;/***preinitBlock***/&#10;// Include the functions file if it has not already been included.&#10;#ifndef I_ROBOT_FUNCTIONS&#10;#define I_ROBOT_FUNCTIONS&#10;#include &quot;iRobotFunctions.c&quot;&#10;#include &quot;oi.h&quot;&#10;&#10;void drive2(int16_t velocity, int16_t radius)&#10;{&#10;  byteTx(CmdDrive);&#10;  byteTx((uint8_t)((velocity &gt;&gt; 8) &amp; 0x00FF));&#10;  byteTx((uint8_t)(velocity &amp; 0x00FF));&#10;  byteTx((uint8_t)((radius &gt;&gt; 8) &amp; 0x00FF));&#10;  byteTx((uint8_t)(radius &amp; 0x00FF));&#10;}&#10;&#10;#endif&#10;/**/&#10;&#10;/***initBlock***/&#10;  // Initialize the microcontroller&#10;  initializeRobot();&#10;&#10;  // Turn on the Create power if off&#10;  powerOnRobot();&#10;&#10;  // Start the open interface&#10;  byteTx(CmdStart);&#10;&#10;  // Change to 28800 baud&#10;  baud28k();&#10;&#10;  // Take full control of the Create&#10;  byteTx(CmdFull);&#10;&#10;  // Get rid of unwanted data in the serial port receiver&#10;  flushRx();&#10;&#10;  // Perform initial rounding detection&#10;  DIDR0 |= 0x20;  // disable digital input on C5&#10;  PRR &amp;= ~_BV(PRADC); // Turn off ADC power save&#10;  ADCSRA = (_BV(ADEN) | _BV(ADPS2) | _BV(ADPS1) | _BV(ADPS0)); // Enabled, prescaler = 128&#10;  ADMUX = (_BV(REFS0) | 0x07); // set voltage reference, select channel C7 (was C5, modified by Winthrop)&#10;  // First channel read by ADC will be the one specified on the line above.&#10;&#10;   ADCSRA |= 0x40;&#10;      while(ADCSRA &amp; 0x40) ;&#10;     int leftValue;&#10;     int rightValue;&#10;      // The ADC output is 10 bits unsigned, or 0 to 1023.&#10;      // Normalize here.&#10;      // FIXME: Why reverse the polarity?&#10;      leftValue = 512 - ADC;&#10;      ADMUX = (_BV(REFS0) | 0x06);  // Change ADC mux to read other channel&#10;      // Sample the Y accelerometer, pointed 45 degrees right of forward, on channel 6&#10;      ADCSRA |= 0x40;&#10;      while(ADCSRA &amp; 0x40) ;&#10;      rightValue = 512 - ADC;&#10;      ADMUX = (_BV(REFS0) | 0x07);  // Change ADC mux back to read first channel&#10;&#10;while((rightValue&gt;10)||(rightValue&lt;-10)){&#10; 	drive2(20, RadCCW );&#10;	delay10ms(20);&#10;&#10;      ADCSRA |= 0x40;&#10;      while(ADCSRA &amp; 0x40) ;&#10;      // The ADC output is 10 bits unsigned, or 0 to 1023.&#10;      // Normalize here.&#10;      // FIXME: Why reverse the polarity?&#10;      leftValue = 512 - ADC;&#10;      ADMUX = (_BV(REFS0) | 0x06);  // Change ADC mux to read other channel&#10;      // Sample the Y accelerometer, pointed 45 degrees right of forward, on channel 6&#10;      ADCSRA |= 0x40;&#10;      while(ADCSRA &amp; 0x40) ;&#10;      rightValue = 512 - ADC;&#10;      ADMUX = (_BV(REFS0) | 0x07);  // Change ADC mux back to read first channel&#10;}&#10;drive2(20, RadStraight );&#10;delay10ms(20);&#10;&#10;&#10;/**/&#10;&#10;/***fireBlock***/&#10;/**/&#10;&#10;/***wrapupBlock***/&#10;/**/&#10;&#10;">
                </property>
                <property name="SDFDirector" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[125.0, 115.0]">
                    </property>
                </property>
                <property name="_tableauFactory" class="ptolemy.vergil.toolbox.TextEditorTableauFactory">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="embeddedCCode">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{370.0, 130.0}">
                </property>
                <property name="CodeGenerator_AutoAdded" class="ptolemy.codegen.kernel.StaticSchedulingCodeGenerator">
                    <property name="codeDirectory" class="ptolemy.data.expr.FileParameter" value="$HOME/codegen/">
                        <property name="allowFiles" class="ptolemy.data.expr.Parameter" value="false">
                        </property>
                        <property name="allowDirectories" class="ptolemy.data.expr.Parameter" value="true">
                        </property>
                    </property>
                    <property name="compile" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="compileTarget" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="generatorPackage" class="ptolemy.data.expr.StringParameter" value="ptolemy.codegen.c">
                    </property>
                    <property name="generateComment" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="generateEmbeddedCode" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="inline" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="overwriteFiles" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="run" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="sourceLineBinding" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </property>
                <port name="in" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                    </property>
                </port>
            </entity>
            <entity name="Const" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                </property>
                <doc>Create a constant sequence.</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[210.0, 130.0]">
                </property>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[280.0, 130.0]">
                </vertex>
            </relation>
            <link port="RotateCW" relation="relation"/>
            <link port="RotateCCW" relation="relation"/>
            <link port="Drive" relation="relation"/>
            <link port="initializeIRobot.in" relation="relation"/>
            <link port="Const.output" relation="relation"/>
        </entity>
        <relation name="AccLCRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="AccLNRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="AccLSRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="AccRCRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="AccRNRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="AccRSRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="RotateCWRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="RotateCCWRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="DriveRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="EdgeLeftRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="EdgeRightRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="InitializeRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="AccLC" relation="AccLCRelation"/>
        <link port="AccLN" relation="AccLNRelation"/>
        <link port="AccLS" relation="AccLSRelation"/>
        <link port="AccRC" relation="AccRCRelation"/>
        <link port="AccRN" relation="AccRNRelation"/>
        <link port="AccRS" relation="AccRSRelation"/>
        <link port="RotateCW" relation="RotateCWRelation"/>
        <link port="RotateCCW" relation="RotateCCWRelation"/>
        <link port="Drive" relation="DriveRelation"/>
        <link port="EdgeLeft" relation="EdgeLeftRelation"/>
        <link port="EdgeRight" relation="EdgeRightRelation"/>
        <link port="Initialize" relation="InitializeRelation"/>
        <link port="_Controller.AccLC" relation="AccLCRelation"/>
        <link port="_Controller.AccLN" relation="AccLNRelation"/>
        <link port="_Controller.AccLS" relation="AccLSRelation"/>
        <link port="_Controller.AccRC" relation="AccRCRelation"/>
        <link port="_Controller.AccRN" relation="AccRNRelation"/>
        <link port="_Controller.AccRS" relation="AccRSRelation"/>
        <link port="_Controller.RotateCW" relation="RotateCWRelation"/>
        <link port="_Controller.RotateCCW" relation="RotateCCWRelation"/>
        <link port="_Controller.Drive" relation="DriveRelation"/>
        <link port="_Controller.EdgeLeft" relation="EdgeLeftRelation"/>
        <link port="_Controller.EdgeRight" relation="EdgeRightRelation"/>
        <link port="_Controller.Initialize" relation="InitializeRelation"/>
        <link port="DriveForward.AccLC" relation="AccLCRelation"/>
        <link port="DriveForward.AccLN" relation="AccLNRelation"/>
        <link port="DriveForward.AccLS" relation="AccLSRelation"/>
        <link port="DriveForward.AccRC" relation="AccRCRelation"/>
        <link port="DriveForward.AccRN" relation="AccRNRelation"/>
        <link port="DriveForward.AccRS" relation="AccRSRelation"/>
        <link port="DriveForward.RotateCW" relation="RotateCWRelation"/>
        <link port="DriveForward.RotateCCW" relation="RotateCCWRelation"/>
        <link port="DriveForward.Drive" relation="DriveRelation"/>
        <link port="DriveForward.EdgeLeft" relation="EdgeLeftRelation"/>
        <link port="DriveForward.EdgeRight" relation="EdgeRightRelation"/>
        <link port="DriveForward.Initialize" relation="InitializeRelation"/>
        <link port="PowerOn.AccLC" relation="AccLCRelation"/>
        <link port="PowerOn.AccLN" relation="AccLNRelation"/>
        <link port="PowerOn.AccLS" relation="AccLSRelation"/>
        <link port="PowerOn.AccRC" relation="AccRCRelation"/>
        <link port="PowerOn.AccRN" relation="AccRNRelation"/>
        <link port="PowerOn.AccRS" relation="AccRSRelation"/>
        <link port="PowerOn.RotateCW" relation="RotateCWRelation"/>
        <link port="PowerOn.RotateCCW" relation="RotateCCWRelation"/>
        <link port="PowerOn.Drive" relation="DriveRelation"/>
        <link port="PowerOn.EdgeLeft" relation="EdgeLeftRelation"/>
        <link port="PowerOn.EdgeRight" relation="EdgeRightRelation"/>
        <link port="PowerOn.Initialize" relation="InitializeRelation"/>
    </entity>
    <entity name="AccelerometerSignalProcessing" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 220.0]">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.EditorIcon">
            <property name="rectangle" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 0.0]">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="40">
                </property>
                <property name="centered" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="textSize" class="ptolemy.data.expr.Parameter" value="8">
                </property>
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Accelerometer&#10;Sensor &#10;System">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-28.0, -19.0]">
                </property>
            </property>
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="12">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="The contract offered by the environment is that environment&#10;would only send readings in either high, mid or low.&#10;Therefore, although the accelerometer may be powerful enough&#10;to have very fine readings, we still need to partition the &#10;domain into three.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-55.0, 565.0]">
            </property>
        </property>
        <property name="sensitivity" class="ptolemy.data.expr.Parameter" value="5">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-60.0, 10.0}">
            </property>
        </property>
        <property name="horizontalValue" class="ptolemy.data.expr.Parameter" value="0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-60.0, 35.0]">
            </property>
        </property>
        <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-20.0, -40.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={104, 125, 815, 517}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{158.6055743243243, 202.3315033783784}">
        </property>
        <port name="AccLC" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[634.755859375, 39.140625]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="AccRC" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[635.0, 345.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="AccRN" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[645.0, 435.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="AccRS" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[640.0, 520.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="AccLN" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[635.0, 135.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="AccLS" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[635.0, 220.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <entity name="ADC" class="ptolemy.actor.lib.jni.EmbeddedCActor">
            <property name="embeddedCCode" class="ptolemy.kernel.util.StringAttribute" value="/***preinitBlock***/&#10;/**/&#10;&#10;/***initBlock***/&#10;  // Set up the ADC on pin C5&#10;  //DIDR0 |= 0x20;  // disable digital input on C5&#10;  //PRR &amp;= ~_BV(PRADC); // Turn off ADC power save&#10;  //ADCSRA = (_BV(ADEN) | _BV(ADPS2) | _BV(ADPS1) | _BV(ADPS0)); // Enabled, prescaler = 128&#10;  //ADMUX = (_BV(REFS0) | 0x07); // set voltage reference, select channel C7 (was C5, modified by Winthrop)&#10;  // First channel read by ADC will be the one specified on the line above.&#10;/**/&#10;&#10;/***fireBlock***/&#10;      ADCSRA |= 0x40;&#10;      while(ADCSRA &amp; 0x40) ;&#10;      // The ADC output is 10 bits unsigned, or 0 to 1023.&#10;      // Normalize here.&#10;      // FIXME: Why reverse the polarity?&#10;      //$ref(left) = $val(DCoffset) + 512 - ADC;&#10;	$ref(left) = 512 - ADC;&#10;      ADMUX = (_BV(REFS0) | 0x06);  // Change ADC mux to read other channel&#10;      // Sample the Y accelerometer, pointed 45 degrees right of forward, on channel 6&#10;      ADCSRA |= 0x40;&#10;      while(ADCSRA &amp; 0x40) ;&#10;      // $ref(right) = $val(DCoffset) + 512 - ADC;&#10;	$ref(right) = 512 - ADC;&#10;      ADMUX = (_BV(REFS0) | 0x07);  // Change ADC mux back to read first channel&#10;/**/&#10;&#10;/***wrapupBlock***/&#10;/**/&#10;&#10;">
            </property>
            <property name="_tableauFactory" class="ptolemy.vergil.toolbox.TextEditorTableauFactory">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="embeddedCCode">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-25.0, 160.0]">
            </property>
            <property name="DCoffset" class="ptolemy.data.expr.Parameter" value="10">
            </property>
            <port name="left" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="right" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
        </entity>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="left &gt; (horizontalValue + sensitivity) ">
                <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                    <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                    </property>
                </property>
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 40.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="left" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="right &gt; (horizontalValue + sensitivity) ">
                <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                    <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                    </property>
                </property>
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[220.0, 345.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="right" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Expression3" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="left &lt; (horizontalValue - sensitivity) ">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, 220.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="left" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Expression4" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="right &lt; (horizontalValue - sensitivity) ">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[220.0, 520.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="right" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Expression5" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="left &lt;= (horizontalValue + sensitivity)  &amp;&amp; left &gt;= (horizontalValue - sensitivity)">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 135.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="left" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Expression6" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="right &lt;= (horizontalValue + sensitivity)  &amp;&amp; right &gt;= (horizontalValue - sensitivity)">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[270.0, 435.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="right" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[505.0, 40.0]">
            </property>
        </entity>
        <entity name="BooleanToAnything2" class="ptolemy.actor.lib.conversions.BooleanToAnything">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[505.0, 135.0]">
            </property>
        </entity>
        <entity name="BooleanToAnything3" class="ptolemy.actor.lib.conversions.BooleanToAnything">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[495.0, 220.0]">
            </property>
        </entity>
        <entity name="BooleanToAnything4" class="ptolemy.actor.lib.conversions.BooleanToAnything">
            <property name="_location" class="ptolemy.kernel.util.Location" value="{495, 345}">
            </property>
        </entity>
        <entity name="BooleanToAnything5" class="ptolemy.actor.lib.conversions.BooleanToAnything">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[515.0, 435.0]">
            </property>
        </entity>
        <entity name="BooleanToAnything6" class="ptolemy.actor.lib.conversions.BooleanToAnything">
            <property name="_location" class="ptolemy.kernel.util.Location" value="{490, 520}">
            </property>
        </entity>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[100.0, 90.0]">
            </vertex>
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[55.0, 345.0]">
            </vertex>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation11" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation12" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation13" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation14" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="AccLC" relation="relation14"/>
        <link port="AccRC" relation="relation8"/>
        <link port="AccRN" relation="relation6"/>
        <link port="AccRS" relation="relation4"/>
        <link port="AccLN" relation="relation12"/>
        <link port="AccLS" relation="relation10"/>
        <link port="ADC.left" relation="relation2"/>
        <link port="ADC.right" relation="relation"/>
        <link port="Expression.output" relation="relation13"/>
        <link port="Expression.left" relation="relation2"/>
        <link port="Expression2.output" relation="relation7"/>
        <link port="Expression2.right" relation="relation"/>
        <link port="Expression3.output" relation="relation9"/>
        <link port="Expression3.left" relation="relation2"/>
        <link port="Expression4.output" relation="relation3"/>
        <link port="Expression4.right" relation="relation"/>
        <link port="Expression5.output" relation="relation11"/>
        <link port="Expression5.left" relation="relation2"/>
        <link port="Expression6.output" relation="relation5"/>
        <link port="Expression6.right" relation="relation"/>
        <link port="BooleanToAnything.input" relation="relation13"/>
        <link port="BooleanToAnything.output" relation="relation14"/>
        <link port="BooleanToAnything2.input" relation="relation11"/>
        <link port="BooleanToAnything2.output" relation="relation12"/>
        <link port="BooleanToAnything3.input" relation="relation9"/>
        <link port="BooleanToAnything3.output" relation="relation10"/>
        <link port="BooleanToAnything4.input" relation="relation7"/>
        <link port="BooleanToAnything4.output" relation="relation8"/>
        <link port="BooleanToAnything5.input" relation="relation5"/>
        <link port="BooleanToAnything5.output" relation="relation6"/>
        <link port="BooleanToAnything6.input" relation="relation3"/>
        <link port="BooleanToAnything6.output" relation="relation4"/>
    </entity>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation8" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation9" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation10" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation11" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="iRobotSensorSignalProcessing.EdgeLeft" relation="relation"/>
    <link port="iRobotSensorSignalProcessing.EdgeRight" relation="relation2"/>
    <link port="iRobotActuator.RotateCW" relation="relation3"/>
    <link port="iRobotActuator.RotateCCW" relation="relation4"/>
    <link port="iRobotActuator.Drive" relation="relation5"/>
    <link port="iRobotCtrl.AccLC" relation="relation6"/>
    <link port="iRobotCtrl.AccLN" relation="relation7"/>
    <link port="iRobotCtrl.AccLS" relation="relation8"/>
    <link port="iRobotCtrl.AccRC" relation="relation9"/>
    <link port="iRobotCtrl.AccRN" relation="relation10"/>
    <link port="iRobotCtrl.AccRS" relation="relation11"/>
    <link port="iRobotCtrl.RotateCW" relation="relation3"/>
    <link port="iRobotCtrl.RotateCCW" relation="relation4"/>
    <link port="iRobotCtrl.Drive" relation="relation5"/>
    <link port="iRobotCtrl.EdgeLeft" relation="relation"/>
    <link port="iRobotCtrl.EdgeRight" relation="relation2"/>
    <link port="AccelerometerSignalProcessing.AccLC" relation="relation6"/>
    <link port="AccelerometerSignalProcessing.AccRC" relation="relation9"/>
    <link port="AccelerometerSignalProcessing.AccRN" relation="relation10"/>
    <link port="AccelerometerSignalProcessing.AccRS" relation="relation11"/>
    <link port="AccelerometerSignalProcessing.AccLN" relation="relation7"/>
    <link port="AccelerometerSignalProcessing.AccLS" relation="relation8"/>
</entity>
