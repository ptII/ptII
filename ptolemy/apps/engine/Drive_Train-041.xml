<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="Drive_Train-04" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.util.VersionAttribute" value="2.1-devel">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[895, 629]">
    </property>
    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[85, 138]">
    </property>
    <property name="CT Director" class="ptolemy.domains.ct.kernel.CTMixedSignalDirector">
        <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="10">
        </property>
        <property name="initStepSize" class="ptolemy.data.expr.Parameter" value="0.1">
        </property>
        <property name="minStepSize" class="ptolemy.data.expr.Parameter" value="1.0E-8">
        </property>
        <property name="maxStepSize" class="ptolemy.data.expr.Parameter" value="1.0">
        </property>
        <property name="maxIterations" class="ptolemy.data.expr.Parameter" value="20">
        </property>
        <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-1">
        </property>
        <property name="valueResolution" class="ptolemy.data.expr.Parameter" value="1.0E-6">
        </property>
        <property name="timeResolution" class="ptolemy.data.expr.Parameter" value="1.0E-10">
        </property>
        <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="ODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ExplicitRK23Solver&quot;">
            <property name="style" class="ptolemy.actor.gui.style.EditableChoiceStyle">
                <property name="choice0" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ExplicitRK23Solver&quot;">
                </property>
                <property name="choice1" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.BackwardEulerSolver&quot;">
                </property>
                <property name="choice2" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ForwardEulerSolver&quot;">
                </property>
            </property>
        </property>
        <property name="breakpointODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.DerivativeResolver&quot;">
            <property name="style" class="ptolemy.actor.gui.style.EditableChoiceStyle">
                <property name="choice0" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.DerivativeResolver&quot;">
                </property>
                <property name="choice1" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.BackwardEulerSolver&quot;">
                </property>
                <property name="choice2" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ImpulseBESolver&quot;">
                </property>
            </property>
        </property>
        <property name="runAheadLength" class="ptolemy.data.expr.Parameter" value="0.1">
        </property>
        <property name="CTScheduler" class="ptolemy.domains.ct.kernel.CTScheduler">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="70.0, 25.0">
        </property>
    </property>
    <entity name="Const" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="5.0">
        </property>
        <doc>Create a constant sequence</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
            </property>
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="90.0, 145.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="phi_c" class="ptolemy.actor.lib.gui.TimedPlotter">
        <property name="fillOnWrapup" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="legend" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="startingDataset" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="380.0, 95.0">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
        <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>phi_c</title>
<xRange min="2.6289073897425257" max="2.6313115701989958"/>
<yRange min="717.6162870136399" max="720.8949922142455"/>
</plot>?>
        </configure>
    </entity>
    <entity name="Const2" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="720.0">
        </property>
        <doc>Create a constant sequence</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
            </property>
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="250.0, 55.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="DriveTrain" class="ptolemy.vergil.fsm.modal.ModalModel">
        <property name="_Director" class="ptolemy.domains.fsm.kernel.HSDirector">
            <property name="controllerName" class="ptolemy.kernel.util.StringAttribute" value="_Controller">
            </property>
        </property>
        <property name="_tableauFactory" class="ptolemy.vergil.fsm.modal.ModalModel$ModalTableauFactory">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="250.0, 145.0">
        </property>
        <port name="Torque" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="input"/>
        </port>
        <port name="alpha_b" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
        </port>
        <port name="omega_p" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
        </port>
        <port name="alpha_e" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
        </port>
        <port name="omega_cs" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
        </port>
        <port name="phi_cs" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
        </port>
        <port name="CrossOver" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
        </port>
        <entity name="_Controller" class="ptolemy.vergil.fsm.modal.ModalController">
            <property name="initialStateName" class="ptolemy.kernel.util.StringAttribute" value="Init">
            </property>
            <property name="_nonStrictMarker" class="ptolemy.kernel.util.Attribute">
            </property>
            <property name="_library" class="ptolemy.moml.LibraryAttribute">
                <configure>
    <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/annotation.xml"></input><entity name="state" class="ptolemy.domains.fsm.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property></entity></entity>
  </configure>
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[966, 744]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[49, 80]">
            </property>
            <property name="InitialStateVector" class="ptolemy.data.expr.Parameter" value="{0.0,0.0,0.0,0.0,0.0}">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="40.0, 15.0">
                </property>
            </property>
            <port name="Torque" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.moml.Location" value="70.0, 200.0">
                </property>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
            <port name="alpha_b" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="510.0, 145.0">
                </property>
            </port>
            <port name="omega_p" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="510.0, 190.0">
                </property>
            </port>
            <port name="alpha_e" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="510.0, 235.0">
                </property>
            </port>
            <port name="omega_cs" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="510.0, 275.0">
                </property>
            </port>
            <port name="phi_cs" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="510.0, 320.0">
                </property>
            </port>
            <port name="CrossOver" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="510.0, 100.0">
                </property>
            </port>
            <entity name="Init" class="ptolemy.domains.fsm.kernel.State">
                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute">
                </property>
                <property name="_centerName" class="ptolemy.kernel.util.Attribute">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="120.0, 85.0">
                </property>
                <port name="incomingPort" class="ptolemy.kernel.ComponentPort">
                </port>
                <port name="outgoingPort" class="ptolemy.kernel.ComponentPort">
                </port>
            </entity>
            <entity name="DriveTrain" class="ptolemy.domains.fsm.kernel.State">
                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="DriveTrain">
                </property>
                <property name="_centerName" class="ptolemy.kernel.util.Attribute">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="370.0, 240.0">
                </property>
                <port name="incomingPort" class="ptolemy.kernel.ComponentPort">
                </port>
                <port name="outgoingPort" class="ptolemy.kernel.ComponentPort">
                </port>
            </entity>
            <relation name="relation" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute">
                </property>
                <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="DriveTrain.InitialStateVector=InitialStateVector">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.1652644225427529">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.7109714558507159">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
                </property>
            </relation>
            <relation name="relation4" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="CrossOver_isPresent">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute">
                </property>
                <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="DriveTrain.InitialStateVector={alpha_b,omega_p,alpha_e,omega_cs,0.0}">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.398107194931445">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.02186077093403423">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
                </property>
            </relation>
            <link port="Init.outgoingPort" relation="relation"/>
            <link port="DriveTrain.incomingPort" relation="relation"/>
            <link port="DriveTrain.incomingPort" relation="relation4"/>
            <link port="DriveTrain.outgoingPort" relation="relation4"/>
        </entity>
        <entity name="DriveTrain" class="ptolemy.vergil.fsm.modal.Refinement">
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1028, 791]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[18, 57]">
            </property>
            <property name="CTEmbedded Director" class="ptolemy.domains.ct.kernel.CTEmbeddedDirector">
                <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
                </property>
                <property name="stopTime" class="ptolemy.data.expr.Parameter" value="1.7976931348623E308">
                </property>
                <property name="initStepSize" class="ptolemy.data.expr.Parameter" value="0.1">
                </property>
                <property name="minStepSize" class="ptolemy.data.expr.Parameter" value="1.0E-8">
                </property>
                <property name="maxStepSize" class="ptolemy.data.expr.Parameter" value="1.0">
                </property>
                <property name="maxIterations" class="ptolemy.data.expr.Parameter" value="20">
                </property>
                <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-1">
                </property>
                <property name="valueResolution" class="ptolemy.data.expr.Parameter" value="1.0E-6">
                </property>
                <property name="timeResolution" class="ptolemy.data.expr.Parameter" value="1.0E-10">
                </property>
                <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="ODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ExplicitRK23Solver&quot;">
                    <property name="style" class="ptolemy.actor.gui.style.EditableChoiceStyle">
                        <property name="choice0" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ExplicitRK23Solver&quot;">
                        </property>
                        <property name="choice1" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.BackwardEulerSolver&quot;">
                        </property>
                        <property name="choice2" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ForwardEulerSolver&quot;">
                        </property>
                    </property>
                </property>
                <property name="breakpointODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.DerivativeResolver&quot;">
                    <property name="style" class="ptolemy.actor.gui.style.EditableChoiceStyle">
                        <property name="choice0" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.DerivativeResolver&quot;">
                        </property>
                        <property name="choice1" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.BackwardEulerSolver&quot;">
                        </property>
                        <property name="choice2" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ImpulseBESolver&quot;">
                        </property>
                    </property>
                </property>
                <property name="CTScheduler" class="ptolemy.domains.ct.kernel.CTScheduler">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="-460.0, -510.0">
                </property>
            </property>
            <property name="InitialStateVector" class="ptolemy.data.expr.Parameter" value="{0.0, 0.0, 0.0, 0.0, 0.0}">
            </property>
            <port name="Torque" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.moml.Location" value="-490.0, -205.0">
                </property>
            </port>
            <port name="alpha_b" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="415.0, -325.0">
                </property>
            </port>
            <port name="omega_p" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="415.0, -385.0">
                </property>
            </port>
            <port name="alpha_e" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="415.0, -430.0">
                </property>
            </port>
            <port name="omega_cs" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="415.0, -475.0">
                </property>
            </port>
            <port name="phi_cs" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="783.5, 100.5">
                </property>
            </port>
            <port name="CrossOver" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="810.0, -25.0">
                </property>
            </port>
            <entity name="alpha_b_dot" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.data.expr.Parameter" value="-34.7*alpha_b-(6.34e-2)*omega_p+12.6*alpha_e+(8.11e-4)*omega_cs+1.52e-3*torque">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="-50.0, -225.0">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="alpha_b" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="omega_p" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="alpha_e" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="omega_cs" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="torque" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="omega_p_dot" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.data.expr.Parameter" value="19.2*alpha_b-.611*omega_p+412.0*alpha_e+(7.77e-3)*omega_cs">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="-105.0, -135.0">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="alpha_b" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="omega_p" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="alpha_e" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="omega_cs" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="alpha_e_dot" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.data.expr.Parameter" value="30.3*alpha_b-.944*omega_p-11.0*alpha_e+(1.23e-2)*omega_cs-(1.33e-3)*torque">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="-140.0, -35.0">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="alpha_b" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="omega_p" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="alpha_e" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="omega_cs" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="torque" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="omega_cs_dot" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.data.expr.Parameter" value="-8290.0*alpha_b+262.0*omega_p-(52.2e3)*alpha_e-3.84*omega_cs+47.8*torque">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="-180.0, 100.0">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="alpha_b" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="omega_p" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="alpha_e" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="omega_cs" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="torque" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="alpha_b" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="InitialStateVector.getElement(0)">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="195.0, -225.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="omega_p" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="InitialStateVector.getElement(1)">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="195.0, -135.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="alpha_e" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="InitialStateVector.getElement(2)">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="195.0, -35.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="omega_cs" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="InitialStateVector.getElement(3)">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="200.0, 100.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="phi_cs_dot" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.data.expr.Parameter" value="6.0*omega_cs">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="450.0, 100.0">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="omega_cs" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="phi_cs" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="InitialStateVector.getElement(4)">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="605.0, 100.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="LevelCrossingDetector" class="ptolemy.domains.ct.lib.LevelCrossingDetector">
                <property name="level" class="ptolemy.data.expr.Parameter" value="720.0">
                </property>
                <property name="defaultEventValue" class="ptolemy.data.expr.Parameter" value="5.0">
                </property>
                <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value=".1">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="703.5, -24.5">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;DISCRETE&quot;">
                    </property>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="Display" class="ptolemy.actor.lib.gui.Display">
                <property name="rowsDisplayed" class="ptolemy.data.expr.Parameter" value="10">
                </property>
                <property name="columnsDisplayed" class="ptolemy.data.expr.Parameter" value="40">
                </property>
                <property name="title" class="ptolemy.kernel.util.StringAttribute">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="725.0, 270.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="-450.0, -205.0">
                </vertex>
            </relation>
            <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation10" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation11" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation12" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation15" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="325.0, -430.0">
                </vertex>
            </relation>
            <relation name="relation16" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="370.0, -475.0">
                </vertex>
            </relation>
            <relation name="relation18" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="245.0, -325.0">
                </vertex>
            </relation>
            <relation name="relation19" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="285.0, -385.0">
                </vertex>
            </relation>
            <relation name="relation21" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="663.5, 100.5">
                </vertex>
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="550.0, 100.0">
                </vertex>
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="Torque" relation="relation"/>
            <link port="alpha_b" relation="relation18"/>
            <link port="omega_p" relation="relation19"/>
            <link port="alpha_e" relation="relation15"/>
            <link port="omega_cs" relation="relation16"/>
            <link port="phi_cs" relation="relation21"/>
            <link port="CrossOver" relation="relation4"/>
            <link port="alpha_b_dot.output" relation="relation9"/>
            <link port="alpha_b_dot.alpha_b" relation="relation18"/>
            <link port="alpha_b_dot.omega_p" relation="relation19"/>
            <link port="alpha_b_dot.alpha_e" relation="relation15"/>
            <link port="alpha_b_dot.omega_cs" relation="relation16"/>
            <link port="alpha_b_dot.torque" relation="relation"/>
            <link port="omega_p_dot.output" relation="relation10"/>
            <link port="omega_p_dot.alpha_b" relation="relation18"/>
            <link port="omega_p_dot.omega_p" relation="relation19"/>
            <link port="omega_p_dot.alpha_e" relation="relation15"/>
            <link port="omega_p_dot.omega_cs" relation="relation16"/>
            <link port="alpha_e_dot.output" relation="relation11"/>
            <link port="alpha_e_dot.alpha_b" relation="relation18"/>
            <link port="alpha_e_dot.omega_p" relation="relation19"/>
            <link port="alpha_e_dot.alpha_e" relation="relation15"/>
            <link port="alpha_e_dot.omega_cs" relation="relation16"/>
            <link port="alpha_e_dot.torque" relation="relation"/>
            <link port="omega_cs_dot.output" relation="relation12"/>
            <link port="omega_cs_dot.alpha_b" relation="relation18"/>
            <link port="omega_cs_dot.omega_p" relation="relation15"/>
            <link port="omega_cs_dot.alpha_e" relation="relation15"/>
            <link port="omega_cs_dot.omega_cs" relation="relation16"/>
            <link port="omega_cs_dot.torque" relation="relation"/>
            <link port="alpha_b.input" relation="relation9"/>
            <link port="alpha_b.output" relation="relation18"/>
            <link port="omega_p.input" relation="relation10"/>
            <link port="omega_p.output" relation="relation19"/>
            <link port="alpha_e.input" relation="relation11"/>
            <link port="alpha_e.output" relation="relation15"/>
            <link port="omega_cs.input" relation="relation12"/>
            <link port="omega_cs.output" relation="relation16"/>
            <link port="phi_cs_dot.output" relation="relation3"/>
            <link port="phi_cs_dot.omega_cs" relation="relation16"/>
            <link port="phi_cs.input" relation="relation3"/>
            <link port="phi_cs.output" relation="relation21"/>
            <link port="LevelCrossingDetector.output" relation="relation4"/>
            <link port="LevelCrossingDetector.trigger" relation="relation21"/>
            <link port="Display.input" relation="relation21"/>
        </entity>
        <relation name="TorqueRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="alpha_bRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="omega_pRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="alpha_eRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="omega_csRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="phi_csRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="CrossOverRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="Torque" relation="TorqueRelation"/>
        <link port="alpha_b" relation="alpha_bRelation"/>
        <link port="omega_p" relation="omega_pRelation"/>
        <link port="alpha_e" relation="alpha_eRelation"/>
        <link port="omega_cs" relation="omega_csRelation"/>
        <link port="phi_cs" relation="phi_csRelation"/>
        <link port="CrossOver" relation="CrossOverRelation"/>
        <link port="_Controller.Torque" relation="TorqueRelation"/>
        <link port="_Controller.alpha_b" relation="alpha_bRelation"/>
        <link port="_Controller.omega_p" relation="omega_pRelation"/>
        <link port="_Controller.alpha_e" relation="alpha_eRelation"/>
        <link port="_Controller.omega_cs" relation="omega_csRelation"/>
        <link port="_Controller.phi_cs" relation="phi_csRelation"/>
        <link port="_Controller.CrossOver" relation="CrossOverRelation"/>
        <link port="DriveTrain.Torque" relation="TorqueRelation"/>
        <link port="DriveTrain.alpha_b" relation="alpha_bRelation"/>
        <link port="DriveTrain.omega_p" relation="omega_pRelation"/>
        <link port="DriveTrain.alpha_e" relation="alpha_eRelation"/>
        <link port="DriveTrain.omega_cs" relation="omega_csRelation"/>
        <link port="DriveTrain.phi_cs" relation="phi_csRelation"/>
        <link port="DriveTrain.CrossOver" relation="CrossOverRelation"/>
    </entity>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="Const.output" relation="relation"/>
    <link port="phi_c.input" relation="relation5"/>
    <link port="phi_c.input" relation="relation6"/>
    <link port="Const2.output" relation="relation5"/>
    <link port="DriveTrain.Torque" relation="relation"/>
    <link port="DriveTrain.phi_cs" relation="relation6"/>
</entity>
