<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="tunc" class="ptolemy.actor.TypedCompositeActor">
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[821, 663]">
    </property>
    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[-6, -4]">
    </property>
    <property name="_generator" class="ptolemy.copernicus.gui.GeneratorTableauAttribute">
        <property name="codeGenerator" class="ptolemy.kernel.util.StringAttribute" value="deep">
            <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                <property name="sootDeep" class="ptolemy.kernel.util.StringAttribute" value="deep">
                </property>
                <property name="sootApplet" class="ptolemy.kernel.util.StringAttribute" value="applet">
                </property>
                <property name="sootC" class="ptolemy.kernel.util.StringAttribute" value="c">
                </property>
                <property name="sootJHDL" class="ptolemy.kernel.util.StringAttribute" value="jhdl">
                </property>
                <property name="sootShallow" class="ptolemy.kernel.util.StringAttribute" value="shallow">
                </property>
            </property>
            <doc name="tooltip">Type of code generator to run.</doc>
        </property>
        <property name="show" class="ptolemy.data.expr.Parameter" value="true">
            <property name="style" class="ptolemy.actor.gui.style.CheckBoxStyle">
            </property>
            <doc name="tooltip">Show generated code.</doc>
        </property>
        <property name="compile" class="ptolemy.data.expr.Parameter" value="true">
            <property name="style" class="ptolemy.actor.gui.style.CheckBoxStyle">
            </property>
            <doc name="tooltip">Compile generated code.</doc>
        </property>
        <property name="run" class="ptolemy.data.expr.Parameter" value="true">
            <property name="style" class="ptolemy.actor.gui.style.CheckBoxStyle">
            </property>
            <doc name="tooltip">Execute generated code.</doc>
        </property>
        <property name="directory" class="ptolemy.kernel.util.StringAttribute" value="d:\ptII\ptolemy\apps\throttle">
            <doc name="tooltip">Directory into which to put generated code.</doc>
        </property>
        <property name="compileOptions" class="ptolemy.kernel.util.StringAttribute" value="-classpath &quot;d:/ptII;.&quot;">
            <doc name="tooltip">Options to pass to the compiler.</doc>
        </property>
        <property name="runOptions" class="ptolemy.kernel.util.StringAttribute" value="-classpath &quot;d:/ptII;.&quot;">
            <doc name="tooltip">Options to use when executing the code.</doc>
        </property>
        <property name="packageName" class="ptolemy.kernel.util.StringAttribute" value="ptolemy.apps.throttle">
            <doc name="tooltip">Package name for the generated classes.</doc>
        </property>
    </property>
    <property name="CT Director" class="ptolemy.domains.ct.kernel.CTMixedSignalDirector">
        <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="5">
        </property>
        <property name="initStepSize" class="ptolemy.data.expr.Parameter" value="0.1">
        </property>
        <property name="minStepSize" class="ptolemy.data.expr.Parameter" value="5E-6">
        </property>
        <property name="maxStepSize" class="ptolemy.data.expr.Parameter" value="5E-5">
        </property>
        <property name="maxIterations" class="ptolemy.data.expr.Parameter" value="20">
        </property>
        <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-4">
        </property>
        <property name="valueResolution" class="ptolemy.data.expr.Parameter" value="1.0E-6">
        </property>
        <property name="timeResolution" class="ptolemy.data.expr.Parameter" value="1.0E-10">
        </property>
        <property name="ODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ForwardEulerSolver&quot;">
            <property name="style" class="ptolemy.actor.gui.style.EditableChoiceStyle">
                <property name="choice0" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ExplicitRK23Solver&quot;">
                </property>
                <property name="choice1" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.BackwardEulerSolver&quot;">
                </property>
                <property name="choice2" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ForwardEulerSolver&quot;">
                </property>
            </property>
        </property>
        <property name="breakpointODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.DerivativeResolver&quot;">
            <property name="style" class="ptolemy.actor.gui.style.EditableChoiceStyle">
                <property name="choice0" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.DerivativeResolver&quot;">
                </property>
                <property name="choice1" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.BackwardEulerSolver&quot;">
                </property>
                <property name="choice2" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ImpulseBESolver&quot;">
                </property>
            </property>
        </property>
        <property name="runAheadLength" class="ptolemy.data.expr.Parameter" value="0.1">
        </property>
        <property name="CTScheduler" class="ptolemy.domains.ct.kernel.CTScheduler">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="108.0, 173.5">
        </property>
    </property>
    <property name="annotation" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Heterogeneous model of the UC Berkeley Vehicle Dynamics Lab
Electronic Throttle Controller.

by Paul Griffiths, Christoph Kirsch, Tunc Simsek, Jason Souder
Last updated January 15, 2002</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="249.5, 67.0">
        </property>
    </property>
    <entity name="throttle" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="190.0, 263.5">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[766, 503]">
        </property>
        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[21, 76]">
        </property>
        <property name="J" class="ptolemy.data.expr.Parameter" value="5e-5">
        </property>
        <property name="Ks_J" class="ptolemy.data.expr.Parameter" value="390">
        </property>
        <property name="Kd_J" class="ptolemy.data.expr.Parameter" value="0.1">
        </property>
        <property name="Kf_J" class="ptolemy.data.expr.Parameter" value="140">
        </property>
        <property name="Ra" class="ptolemy.data.expr.Parameter" value="1.7">
        </property>
        <property name="theta_eq" class="ptolemy.data.expr.Parameter" value="-0.25">
        </property>
        <property name="Kt_Ra_J" class="ptolemy.data.expr.Parameter" value="140">
        </property>
        <property name="Ks" class="ptolemy.data.expr.Parameter" value="Ks_J*J">
        </property>
        <property name="Kd" class="ptolemy.data.expr.Parameter" value="Kd_J*J">
        </property>
        <property name="Kf" class="ptolemy.data.expr.Parameter" value="Kf_J*J">
        </property>
        <property name="Kt" class="ptolemy.data.expr.Parameter" value="Kt_Ra_J*Ra*J">
        </property>
        <property name="alpha_max" class="ptolemy.data.expr.Parameter" value="89.8*pi/180">
        </property>
        <property name="alpha_min" class="ptolemy.data.expr.Parameter" value="0.2*pi/180">
        </property>
        <property name="annotation" class="ptolemy.kernel.util.Attribute">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">The dynamics of the mechanical throttle body modeled as a second order 
system with forced spring pull-back.</text></svg></configure>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
            </property>
            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="360.5, 42.0">
            </property>
        </property>
        <port name="torque" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="47.0, 149.0">
            </property>
        </port>
        <port name="back_emf" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="539.0, 99.0">
            </property>
        </port>
        <port name="throttle_position" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="617.0, 174.0">
            </property>
        </port>
        <entity name="sigma_T" class="ptolemy.actor.lib.AddSubtract">
            <property name="_location" class="ptolemy.kernel.util.Location" value="110.5, 159.5">
            </property>
            <port name="plus" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
            <port name="minus" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="inertia" class="ptolemy.actor.lib.Scale">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="1/J">
            </property>
            <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="185.0, 158.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="omega" class="ptolemy.domains.ct.lib.Integrator">
            <property name="initialState" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="255.5, 158.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
        </entity>
        <entity name="theta" class="ptolemy.domains.ct.lib.Integrator">
            <property name="initialState" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="325.0, 218.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
        </entity>
        <entity name="" class="ptolemy.actor.lib.MathFunction">
            <property name="function" class="ptolemy.kernel.util.StringAttribute" value="sign">
                <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                    <property name="exp" class="ptolemy.kernel.util.StringAttribute" value="exp">
                    </property>
                    <property name="log" class="ptolemy.kernel.util.StringAttribute" value="log">
                    </property>
                    <property name="modulo" class="ptolemy.kernel.util.StringAttribute" value="modulo">
                    </property>
                    <property name="sign" class="ptolemy.kernel.util.StringAttribute" value="sign">
                    </property>
                    <property name="square" class="ptolemy.kernel.util.StringAttribute" value="square">
                    </property>
                    <property name="sqrt" class="ptolemy.kernel.util.StringAttribute" value="sqrt">
                    </property>
                </property>
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="425.0, 373.0">
            </property>
            <port name="firstOperand" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="sign(omega) gain" class="ptolemy.actor.lib.Scale">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="Kf">
            </property>
            <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="539.5, 369.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="damping gain" class="ptolemy.actor.lib.Scale">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="Kd">
            </property>
            <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="529.0, 434.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="angular gain" class="ptolemy.actor.lib.Scale">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="Ks">
            </property>
            <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="526.0, 304.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
            <property name="_location" class="ptolemy.kernel.util.Location" value="432.0, 303.5">
            </property>
            <port name="plus" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
            <port name="minus" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="total gain" class="ptolemy.actor.lib.AddSubtract">
            <property name="_location" class="ptolemy.kernel.util.Location" value="667.5, 379.5">
            </property>
            <port name="plus" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
            <port name="minus" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="throttle position saturation" class="ptolemy.actor.lib.Limiter">
            <property name="bottom" class="ptolemy.data.expr.Parameter" value="alpha_min">
            </property>
            <property name="top" class="ptolemy.data.expr.Parameter" value="alpha_max">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="488.5, 174.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="theta_eq" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="theta_eq">
            </property>
            <doc>Create a constant sequence</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="336.5, 314.5">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" class="ptolemy.moml.Vertex" value="286.0, 196.0">
            </vertex>
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" class="ptolemy.moml.Vertex" value="381.0, 271.0">
            </vertex>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation11" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation13" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation14" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation15" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation16" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" class="ptolemy.moml.Vertex" value="701.0, 471.0">
            </vertex>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="torque" relation="relation10"/>
        <link port="back_emf" relation="relation7"/>
        <link port="throttle_position" relation="relation8"/>
        <link port="sigma_T.plus" relation="relation10"/>
        <link port="sigma_T.minus" relation="relation16"/>
        <link port="sigma_T.output" relation="relation"/>
        <link port="inertia.input" relation="relation"/>
        <link port="inertia.output" relation="relation3"/>
        <link port="omega.input" relation="relation3"/>
        <link port="omega.output" relation="relation6"/>
        <link port="theta.input" relation="relation6"/>
        <link port="theta.output" relation="relation7"/>
        <link port=".firstOperand" relation="relation6"/>
        <link port=".output" relation="relation9"/>
        <link port="sign(omega) gain.input" relation="relation9"/>
        <link port="sign(omega) gain.output" relation="relation13"/>
        <link port="damping gain.input" relation="relation6"/>
        <link port="damping gain.output" relation="relation15"/>
        <link port="angular gain.input" relation="relation11"/>
        <link port="angular gain.output" relation="relation14"/>
        <link port="AddSubtract.plus" relation="relation7"/>
        <link port="AddSubtract.minus" relation="relation4"/>
        <link port="AddSubtract.output" relation="relation11"/>
        <link port="total gain.plus" relation="relation13"/>
        <link port="total gain.plus" relation="relation14"/>
        <link port="total gain.plus" relation="relation15"/>
        <link port="total gain.output" relation="relation16"/>
        <link port="throttle position saturation.input" relation="relation7"/>
        <link port="throttle position saturation.output" relation="relation8"/>
        <link port="theta_eq.output" relation="relation4"/>
    </entity>
    <entity name="driver inputs" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="192.5, 319.5">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
        </property>
        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
        </property>
        <property name="alpha_gain" class="ptolemy.data.expr.Parameter" value="1.0">
        </property>
        <property name="annotation" class="ptolemy.kernel.util.Attribute">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">The accelerator_position models the actual position
of the accelerator pedal in radians.  Zero means
the pedal is not depressed and pi means full throttle.</text></svg></configure>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
            </property>
            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="253.5, 87.0">
            </property>
        </property>
        <port name="accelerator_position" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="388.0, 184.0">
            </property>
        </port>
        <entity name="accelerator gain" class="ptolemy.actor.lib.Scale">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="235.0, 183.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="0.7">
            </property>
            <doc>Create a constant sequence</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="111.0, 183.5">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="accelerator_position" relation="relation"/>
        <link port="accelerator gain.input" relation="relation2"/>
        <link port="accelerator gain.output" relation="relation"/>
        <link port="Const.output" relation="relation2"/>
    </entity>
    <entity name="throttle position" class="ptolemy.actor.lib.gui.TimedPlotter">
        <property name="fillOnWrapup" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="legend" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="startingDataset" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="330.0, 189.5">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
        <configure><?plotml
<!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>throttle position</title>
<xRange min="0.0" max="0.10799999999999504"/>
<yRange min="0.7088267420710289" max="1.0007893272698531"/>
</plot>?>
        </configure>
    </entity>
    <entity name="controller" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="415.0, 403.5">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
        </property>
        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
        </property>
        <property name="p" class="ptolemy.data.expr.Parameter" value="0.001">
        </property>
        <property name="annotation" class="ptolemy.kernel.util.Attribute">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">The interface between the continuous-time sensors/actuators and
the discrete-time controller.  The sensors are assumed to be
sampled periodically with period "p" and the actuator values are
interpolated using zero-order-hold.</text></svg></configure>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
            </property>
            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="274.5, 57.0">
            </property>
        </property>
        <port name="throttle_positions" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="83.0, 134.0">
            </property>
            <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </port>
        <port name="desired_throttle_position" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="103.0, 224.0">
            </property>
            <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </port>
        <port name="current" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="526.5, 215.0">
            </property>
            <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <property name="tokenInitProduction" class="ptolemy.data.expr.Parameter" value="0">
            </property>
        </port>
        <port name="actual_motor_current" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="93.5, 304.0">
            </property>
        </port>
        <entity name="sampled controller" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="358.5, 214.5">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[817, 635]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[-4, 10]">
            </property>
            <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                <property name="Scheduler" class="ptolemy.domains.sdf.kernel.SDFScheduler">
                </property>
                <property name="iterations" class="ptolemy.data.expr.Parameter" value="0">
                </property>
                <property name="vectorizationFactor" class="ptolemy.data.expr.Parameter" value="1">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="98.0, 183.5">
                </property>
            </property>
            <property name="annotation" class="ptolemy.kernel.util.Attribute">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">The discrete-time controller consists of two abstract
parts.  The first is the controller itself which is a
sampled modal sliding-mode controller and the second is
the drivers for the pulse-width modulated (pwm) actuators.
</text></svg></configure>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="282.5, 77.0">
                </property>
            </property>
            <port name="throttle_positions" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="143.0, 354.0">
                </property>
                <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </port>
            <port name="desired_throttle_position" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="128.0, 304.0">
                </property>
                <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </port>
            <port name="current" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="461.5, 195.0">
                </property>
                <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="1">
                </property>
                <property name="tokenInitProduction" class="ptolemy.data.expr.Parameter" value="0">
                </property>
            </port>
            <port name="actual_motor_current" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="103.5, 259.0">
                </property>
                <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </port>
            <entity name="pwm driver" class="ptolemy.actor.TypedCompositeActor">
                <property name="_location" class="ptolemy.kernel.util.Location" value="380.0, 234.5">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
                </property>
                <port name="motor_current" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="114.0, 289.0">
                    </property>
                    <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </port>
                <port name="desired_current" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="123.5, 149.0">
                    </property>
                    <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </port>
                <port name="pwm_signal" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="494.5, 169.0">
                    </property>
                    <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="tokenInitProduction" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                </port>
                <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="187.0, 218.5">
                    </property>
                    <port name="plus" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                    </port>
                    <port name="minus" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                    </port>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                    </port>
                </entity>
                <entity name="Comparator" class="ptolemy.actor.lib.logic.Comparator">
                    <property name="comparison" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                        <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                            <property name="gt" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                            </property>
                            <property name="ge" class="ptolemy.kernel.util.StringAttribute" value="&gt;=">
                            </property>
                            <property name="lt" class="ptolemy.kernel.util.StringAttribute" value="&lt;">
                            </property>
                            <property name="le" class="ptolemy.kernel.util.StringAttribute" value="&lt;=">
                            </property>
                            <property name="eq" class="ptolemy.kernel.util.StringAttribute" value="==">
                            </property>
                        </property>
                    </property>
                    <property name="tolerance" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="comparison">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="260.0, 244.5">
                    </property>
                    <port name="left" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="right" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                    </port>
                </entity>
                <entity name="BooleanSelect" class="ptolemy.actor.lib.BooleanSelect">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="398.0, 168.5">
                    </property>
                    <port name="trueInput" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="falseInput" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="control" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                    </port>
                </entity>
                <entity name="pwm on" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="1.0">
                    </property>
                    <doc>Create a constant sequence</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="291.5, 113.5">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                    </port>
                    <port name="trigger" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                    </port>
                </entity>
                <entity name="pwm off" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <doc>Create a constant sequence</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="292.5, 164.5">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                    </port>
                    <port name="trigger" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                    </port>
                </entity>
                <entity name="ground" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <doc>Create a constant sequence</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="176.0, 284.5">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                    </port>
                    <port name="trigger" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                    </port>
                </entity>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="motor_current" relation="relation8"/>
                <link port="desired_current" relation="relation2"/>
                <link port="pwm_signal" relation="relation9"/>
                <link port="AddSubtract.plus" relation="relation2"/>
                <link port="AddSubtract.minus" relation="relation8"/>
                <link port="AddSubtract.output" relation="relation10"/>
                <link port="Comparator.left" relation="relation10"/>
                <link port="Comparator.right" relation="relation7"/>
                <link port="Comparator.output" relation="relation5"/>
                <link port="BooleanSelect.trueInput" relation="relation4"/>
                <link port="BooleanSelect.falseInput" relation="relation6"/>
                <link port="BooleanSelect.control" relation="relation5"/>
                <link port="BooleanSelect.output" relation="relation9"/>
                <link port="pwm on.output" relation="relation4"/>
                <link port="pwm off.output" relation="relation6"/>
                <link port="ground.output" relation="relation7"/>
            </entity>
            <entity name="pwm_signal" class="ptolemy.actor.lib.gui.TimedPlotter">
                <property name="fillOnWrapup" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="legend" class="ptolemy.kernel.util.StringAttribute">
                </property>
                <property name="startingDataset" class="ptolemy.data.expr.Parameter" value="0">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="479.0, 289.5">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <configure><?plotml
<!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>pwm_signal</title>
<xRange min="0.0" max="0.10699999999999515"/>
<yRange min="0.0" max="1.0"/>
</plot>?>
                </configure>
            </entity>
            <entity name="user_mode" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="1">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="172.0, 394.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="real-time controller" class="ptolemy.actor.TypedCompositeActor">
                <property name="_location" class="ptolemy.kernel.util.Location" value="295.5, 305.5">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[745, 460]">
                </property>
                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[32, 97]">
                </property>
                <property name="Giotto Director" class="ptolemy.domains.giotto.kernel.GiottoDirector">
                    <property name="Scheduler" class="ptolemy.domains.giotto.kernel.GiottoScheduler">
                    </property>
                    <property name="period" class="ptolemy.data.expr.Parameter" value="0.1">
                    </property>
                    <property name="iterations" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <property name="filename" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.giotto&quot;">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="78.0, 38.5">
                    </property>
                </property>
                <port name="throttle_motor" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="682.0, 264.0">
                    </property>
                </port>
                <port name="motor_current" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="73.0, 94.0">
                    </property>
                </port>
                <port name="pedal_position" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="389.5, 309.0">
                    </property>
                </port>
                <port name="throttle_position" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="79.0, 189.0">
                    </property>
                </port>
                <port name="user_mode" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="295.0, 234.0">
                    </property>
                </port>
                <entity name="manager" class="ptolemy.actor.TypedCompositeActor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="345.0, 183.5">
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                    </property>
                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
                    </property>
                    <property name="annotation" class="ptolemy.kernel.util.Attribute">
                        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                        </property>
                        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">The manager decides the operation modes of the ETC:

1=driver mode (tracks the accelerator pedal)
2=limp home mode (limits the accelerator)
</text></svg></configure>
                        </property>
                        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
                        </property>
                        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
                        </property>
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="271.5, 57.0">
                        </property>
                    </property>
                    <port name="mode" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="360.0, 223.0">
                        </property>
                        <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                        <property name="tokenInitProduction" class="ptolemy.data.expr.Parameter" value="0">
                        </property>
                    </port>
                    <port name="monitor_mode" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="195.0, 304.0">
                        </property>
                        <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                    </port>
                    <port name="user_mode" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="180.0, 139.0">
                        </property>
                        <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                    </port>
                    <entity name="BooleanSelect" class="ptolemy.actor.lib.BooleanSelect">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="283.0, 218.5">
                        </property>
                        <port name="trueInput" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                        </port>
                        <port name="falseInput" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                        </port>
                        <port name="control" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                        </port>
                        <port name="output" class="ptolemy.actor.TypedIOPort">
                            <property name="output"/>
                        </port>
                    </entity>
                    <entity name="limp_home" class="ptolemy.actor.lib.Const">
                        <property name="value" class="ptolemy.data.expr.Parameter" value="2">
                        </property>
                        <doc>Create a constant sequence</doc>
                        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                            </property>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="150.5, 189.5">
                        </property>
                        <port name="output" class="ptolemy.actor.TypedIOPort">
                            <property name="output"/>
                        </port>
                        <port name="trigger" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                            <property name="multiport"/>
                        </port>
                    </entity>
                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <link port="mode" relation="relation9"/>
                    <link port="monitor_mode" relation="relation"/>
                    <link port="user_mode" relation="relation7"/>
                    <link port="BooleanSelect.trueInput" relation="relation7"/>
                    <link port="BooleanSelect.falseInput" relation="relation8"/>
                    <link port="BooleanSelect.control" relation="relation"/>
                    <link port="BooleanSelect.output" relation="relation9"/>
                    <link port="limp_home.output" relation="relation8"/>
                </entity>
                <entity name="servo controller" class="ptolemy.actor.TypedCompositeActor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="475.0, 263.5">
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[817, 635]">
                    </property>
                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[-4, 10]">
                    </property>
                    <port name="throttle_motor" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="543.0, 249.0">
                        </property>
                        <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                        <property name="tokenInitProduction" class="ptolemy.data.expr.Parameter" value="0">
                        </property>
                    </port>
                    <port name="mode" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="120.0, 330.0">
                        </property>
                        <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                    </port>
                    <port name="throttle_position" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="145.0, 174.0">
                        </property>
                        <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                    </port>
                    <port name="pedal_position" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="135.5, 249.0">
                        </property>
                        <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                    </port>
                    <entity name="pedal filter" class="ptolemy.actor.TypedCompositeActor">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="201.0, 249.5">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                        </property>
                        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
                        </property>
                        <property name="annotation" class="ptolemy.kernel.util.Attribute">
                            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                            </property>
                            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Not implemented yet, don't know what to filter!</text></svg></configure>
                            </property>
                            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
                            </property>
                            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
                            </property>
                            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="43.5, 77.0">
                            </property>
                        </property>
                        <port name="pedal_position" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="-40.5, 139.0">
                            </property>
                        </port>
                        <port name="filtered_pedal_position" class="ptolemy.actor.TypedIOPort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="181.0, 139.0">
                            </property>
                        </port>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <link port="pedal_position" relation="relation2"/>
                        <link port="filtered_pedal_position" relation="relation2"/>
                    </entity>
                    <entity name="modal controller" class="ptolemy.domains.fsm.modal.ModalModel">
                        <property name="_Director" class="ptolemy.domains.fsm.kernel.HSDirector">
                            <property name="controllerName" class="ptolemy.kernel.util.StringAttribute" value="_Controller">
                            </property>
                        </property>
                        <property name="_tableauFactory" class="ptolemy.vergil.fsm.modal.ModalTableauFactory">
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="443.0, 248.5">
                        </property>
                        <port name="throttle_positions" class="ptolemy.domains.fsm.modal.ModalPort">
                            <property name="input"/>
                        </port>
                        <port name="desired_throttle_position" class="ptolemy.domains.fsm.modal.ModalPort">
                            <property name="input"/>
                        </port>
                        <port name="current" class="ptolemy.domains.fsm.modal.ModalPort">
                            <property name="output"/>
                        </port>
                        <port name="mode" class="ptolemy.domains.fsm.modal.ModalPort">
                            <property name="input"/>
                            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                            </property>
                        </port>
                        <entity name="_Controller" class="ptolemy.domains.fsm.modal.ModalController">
                            <property name="initialStateName" class="ptolemy.kernel.util.StringAttribute" value="driver">
                            </property>
                            <property name="_nonStrictMarker" class="ptolemy.kernel.util.Attribute">
                            </property>
                            <property name="_library" class="ptolemy.moml.LibraryAttribute">
                                <configure>
    <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/annotation.xml"></input><entity name="state" class="ptolemy.domains.fsm.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property></entity></entity>
  </configure>
                            </property>
                            <property name="annotation" class="ptolemy.kernel.util.Attribute">
                                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                                </property>
                                <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                                    <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Create a state machine here (and ports, if needed) and
create refinements for the states. Each refinement needs a director.
For hybrid system models, use the CTEmbeddedDirector.</text></svg></configure>
                                </property>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="250.0, 40.0">
                                </property>
                                <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
                                </property>
                                <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
                                </property>
                            </property>
                            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                            </property>
                            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
                            </property>
                            <port name="throttle_positions" class="ptolemy.domains.fsm.modal.RefinementPort">
                                <property name="input"/>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="83.0, 154.0">
                                </property>
                            </port>
                            <port name="desired_throttle_position" class="ptolemy.domains.fsm.modal.RefinementPort">
                                <property name="input"/>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="99.0, 234.0">
                                </property>
                            </port>
                            <port name="current" class="ptolemy.domains.fsm.modal.RefinementPort">
                                <property name="input"/>
                                <property name="output"/>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="539.5, 212.66666666666666">
                                </property>
                                <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
                                </property>
                            </port>
                            <port name="mode" class="ptolemy.domains.fsm.modal.RefinementPort">
                                <property name="input"/>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="49.0, 325.0">
                                </property>
                            </port>
                            <entity name="driver" class="ptolemy.domains.fsm.kernel.State">
                                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="driver">
                                </property>
                                <property name="_centerName" class="ptolemy.kernel.util.Attribute">
                                </property>
                                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                                </property>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="233.0, 178.0">
                                </property>
                                <port name="incomingPort" class="ptolemy.kernel.ComponentPort">
                                </port>
                                <port name="outgoingPort" class="ptolemy.kernel.ComponentPort">
                                </port>
                            </entity>
                            <entity name="limp_home" class="ptolemy.domains.fsm.kernel.State">
                                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="limp_home">
                                </property>
                                <property name="_centerName" class="ptolemy.kernel.util.Attribute">
                                </property>
                                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                                </property>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="370.0, 293.0">
                                </property>
                                <port name="incomingPort" class="ptolemy.kernel.ComponentPort">
                                </port>
                                <port name="outgoingPort" class="ptolemy.kernel.ComponentPort">
                                </port>
                            </entity>
                            <relation name="relation" class="ptolemy.domains.fsm.kernel.Transition">
                                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="mode_isPresent &amp;&amp; mode == 2">
                                </property>
                                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute">
                                </property>
                                <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute">
                                </property>
                                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                                </property>
                                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                                </property>
                                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                                </property>
                                <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
                                </property>
                            </relation>
                            <relation name="relation3" class="ptolemy.domains.fsm.kernel.Transition">
                                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="mode_isPresent &amp;&amp; mode == 1">
                                </property>
                                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute">
                                </property>
                                <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute">
                                </property>
                                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                                </property>
                                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                                </property>
                                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                                </property>
                                <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
                                </property>
                            </relation>
                            <link port="driver.incomingPort" relation="relation3"/>
                            <link port="driver.outgoingPort" relation="relation"/>
                            <link port="limp_home.incomingPort" relation="relation"/>
                            <link port="limp_home.outgoingPort" relation="relation3"/>
                        </entity>
                        <entity name="driver" class="ptolemy.domains.fsm.modal.Refinement">
                            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                            </property>
                            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
                            </property>
                            <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                                <property name="Scheduler" class="ptolemy.domains.sdf.kernel.SDFScheduler">
                                </property>
                                <property name="iterations" class="ptolemy.data.expr.Parameter" value="0">
                                </property>
                                <property name="vectorizationFactor" class="ptolemy.data.expr.Parameter" value="1">
                                </property>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="98.0, 48.5">
                                </property>
                            </property>
                            <port name="throttle_positions" class="ptolemy.domains.fsm.modal.RefinementPort">
                                <property name="input"/>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="108.0, 114.0">
                                </property>
                                <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                                </property>
                            </port>
                            <port name="desired_throttle_position" class="ptolemy.domains.fsm.modal.RefinementPort">
                                <property name="input"/>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="128.0, 254.0">
                                </property>
                                <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                                </property>
                            </port>
                            <port name="current" class="ptolemy.domains.fsm.modal.RefinementPort">
                                <property name="output"/>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="416.5, 300.0">
                                </property>
                                <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="1">
                                </property>
                                <property name="tokenInitProduction" class="ptolemy.data.expr.Parameter" value="0">
                                </property>
                            </port>
                            <port name="mode" class="ptolemy.domains.fsm.modal.RefinementPort">
                                <property name="input"/>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="74.0, 325.0">
                                </property>
                                <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                                </property>
                            </port>
                            <entity name="sliding mode controller with estimator" class="ptolemy.actor.TypedCompositeActor">
                                <property name="_location" class="ptolemy.kernel.util.Location" value="317.5, 189.5">
                                </property>
                                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[817, 635]">
                                </property>
                                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[-4, 10]">
                                </property>
                                <port name="throttle_position" class="ptolemy.actor.TypedIOPort">
                                    <property name="input"/>
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="64.0, 74.0">
                                    </property>
                                    <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                                    </property>
                                </port>
                                <port name="desired_throttle_position" class="ptolemy.actor.TypedIOPort">
                                    <property name="input"/>
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="93.0, 259.0">
                                    </property>
                                    <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                                    </property>
                                </port>
                                <port name="current" class="ptolemy.actor.TypedIOPort">
                                    <property name="output"/>
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="636.5, 250.0">
                                    </property>
                                    <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="1">
                                    </property>
                                    <property name="tokenInitProduction" class="ptolemy.data.expr.Parameter" value="0">
                                    </property>
                                </port>
                                <entity name="sliding mode controller" class="ptolemy.actor.TypedCompositeActor">
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="580.5, 186.5">
                                    </property>
                                    <property name="Ks_J" class="ptolemy.data.expr.Parameter" value="390.0">
                                    </property>
                                    <property name="Kd_J" class="ptolemy.data.expr.Parameter" value="0.1">
                                    </property>
                                    <property name="Kf_J" class="ptolemy.data.expr.Parameter" value="140.0">
                                    </property>
                                    <property name="Ra" class="ptolemy.data.expr.Parameter" value="1.7">
                                    </property>
                                    <property name="theta_eq" class="ptolemy.data.expr.Parameter" value="-0.25">
                                    </property>
                                    <property name="Kt_Ra_J" class="ptolemy.data.expr.Parameter" value="140">
                                    </property>
                                    <property name="J" class="ptolemy.data.expr.Parameter" value="5e-5">
                                    </property>
                                    <property name="Ks" class="ptolemy.data.expr.Parameter" value="Ks_J*J">
                                    </property>
                                    <property name="Kf" class="ptolemy.data.expr.Parameter" value="Kf_J*J">
                                    </property>
                                    <property name="Kd" class="ptolemy.data.expr.Parameter" value="Kd_J*J">
                                    </property>
                                    <property name="Kt" class="ptolemy.data.expr.Parameter" value="Kt_Ra_J*Ra*J">
                                    </property>
                                    <property name="lambda" class="ptolemy.data.expr.Parameter" value="60.0">
                                    </property>
                                    <property name="n" class="ptolemy.data.expr.Parameter" value="2.0">
                                    </property>
                                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                                    </property>
                                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
                                    </property>
                                    <port name="1:throttle_position" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="59.0, 134.0">
                                        </property>
                                    </port>
                                    <port name="1:throttle_velocity" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="59.0, 309.0">
                                        </property>
                                    </port>
                                    <port name="1:current" class="ptolemy.actor.TypedIOPort">
                                        <property name="output"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="761.5, 230.0">
                                        </property>
                                    </port>
                                    <port name="1:desired_throttle_position" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="83.0, 189.0">
                                        </property>
                                    </port>
                                    <port name="desired_throttle_velocity" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="78.0, 249.0">
                                        </property>
                                    </port>
                                    <port name="desired_throttle_acceleration" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="90.0, 459.0">
                                        </property>
                                    </port>
                                    <entity name="1:angle gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="Ks/Kt">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="580.0, 29.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:angle error" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="145.5, 142.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:sign(s)" class="ptolemy.actor.lib.MathFunction">
                                        <property name="function" class="ptolemy.kernel.util.StringAttribute" value="sign">
                                            <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                                                <property name="exp" class="ptolemy.kernel.util.StringAttribute" value="exp">
                                                </property>
                                                <property name="log" class="ptolemy.kernel.util.StringAttribute" value="log">
                                                </property>
                                                <property name="modulo" class="ptolemy.kernel.util.StringAttribute" value="modulo">
                                                </property>
                                                <property name="sign" class="ptolemy.kernel.util.StringAttribute" value="sign">
                                                </property>
                                                <property name="square" class="ptolemy.kernel.util.StringAttribute" value="square">
                                                </property>
                                                <property name="sqrt" class="ptolemy.kernel.util.StringAttribute" value="sqrt">
                                                </property>
                                            </property>
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="475.0, 154.5">
                                        </property>
                                        <port name="firstOperand" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:surface gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="lambda">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="235.5, 144.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:sign(velocity) gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="Kf/Kt">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="596.5, 384.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:sign(s) gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="n">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="570.0, 154.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:velocity error" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="308.0, 239.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:theta_eq" class="ptolemy.actor.lib.Const">
                                        <property name="value" class="ptolemy.data.expr.Parameter" value="theta_eq">
                                        </property>
                                        <doc>Create a constant sequence</doc>
                                        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="146.5, 84.5">
                                        </property>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                        <port name="trigger" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                    </entity>
                                    <entity name="1:s" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="395.0, 152.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:velocity error gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="lambda*(J/Kt)">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="586.0, 239.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:acceleration gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="J/Kt">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="594.0, 464.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:current" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="695.0, 228.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:velocity gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="Kd/Kt">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="581.0, 309.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:sign(velocity)" class="ptolemy.actor.lib.MathFunction">
                                        <property name="function" class="ptolemy.kernel.util.StringAttribute" value="sign">
                                            <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                                                <property name="exp" class="ptolemy.kernel.util.StringAttribute" value="exp">
                                                </property>
                                                <property name="log" class="ptolemy.kernel.util.StringAttribute" value="log">
                                                </property>
                                                <property name="modulo" class="ptolemy.kernel.util.StringAttribute" value="modulo">
                                                </property>
                                                <property name="sign" class="ptolemy.kernel.util.StringAttribute" value="sign">
                                                </property>
                                                <property name="square" class="ptolemy.kernel.util.StringAttribute" value="square">
                                                </property>
                                                <property name="sqrt" class="ptolemy.kernel.util.StringAttribute" value="sqrt">
                                                </property>
                                            </property>
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="313.0, 384.5">
                                        </property>
                                        <port name="firstOperand" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:angle" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="195.0, 29.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <relation name="1:1:relation21" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:relation2" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation13" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation18" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation5" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation2" class="ptolemy.actor.TypedIORelation">
                                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="71.0, 141.0">
                                        </vertex>
                                    </relation>
                                    <relation name="1:1:relation19" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation6" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation14" class="ptolemy.actor.TypedIORelation">
                                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="346.0, 246.0">
                                        </vertex>
                                    </relation>
                                    <relation name="1:relation8" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation8" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation22" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation9" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation7" class="ptolemy.actor.TypedIORelation">
                                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="236.0, 316.0">
                                        </vertex>
                                    </relation>
                                    <relation name="1:1:relation12" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation11" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation17" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation20" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <link port="1:throttle_position" relation="1:1:relation2"/>
                                    <link port="1:throttle_velocity" relation="1:1:relation7"/>
                                    <link port="1:current" relation="1:relation2"/>
                                    <link port="1:desired_throttle_position" relation="1:relation8"/>
                                    <link port="desired_throttle_velocity" relation="relation"/>
                                    <link port="desired_throttle_acceleration" relation="relation3"/>
                                    <link port="1:angle gain.input" relation="1:1:relation6"/>
                                    <link port="1:angle gain.output" relation="1:1:relation19"/>
                                    <link port="1:angle error.plus" relation="1:1:relation2"/>
                                    <link port="1:angle error.minus" relation="1:relation8"/>
                                    <link port="1:angle error.output" relation="1:1:relation8"/>
                                    <link port="1:sign(s).firstOperand" relation="1:1:relation11"/>
                                    <link port="1:sign(s).output" relation="1:1:relation12"/>
                                    <link port="1:surface gain.input" relation="1:1:relation8"/>
                                    <link port="1:surface gain.output" relation="1:1:relation9"/>
                                    <link port="1:sign(velocity) gain.input" relation="1:1:relation13"/>
                                    <link port="1:sign(velocity) gain.output" relation="1:1:relation21"/>
                                    <link port="1:sign(s) gain.input" relation="1:1:relation12"/>
                                    <link port="1:sign(s) gain.output" relation="1:1:relation18"/>
                                    <link port="1:velocity error.plus" relation="1:1:relation7"/>
                                    <link port="1:velocity error.minus" relation="relation"/>
                                    <link port="1:velocity error.output" relation="1:1:relation14"/>
                                    <link port="1:theta_eq.output" relation="1:1:relation5"/>
                                    <link port="1:theta_eq.trigger" relation="1:1:relation2"/>
                                    <link port="1:s.plus" relation="1:1:relation9"/>
                                    <link port="1:s.plus" relation="1:1:relation14"/>
                                    <link port="1:s.output" relation="1:1:relation11"/>
                                    <link port="1:velocity error gain.input" relation="1:1:relation14"/>
                                    <link port="1:velocity error gain.output" relation="1:1:relation17"/>
                                    <link port="1:acceleration gain.input" relation="relation3"/>
                                    <link port="1:acceleration gain.output" relation="1:1:relation22"/>
                                    <link port="1:current.plus" relation="1:1:relation19"/>
                                    <link port="1:current.plus" relation="1:1:relation20"/>
                                    <link port="1:current.plus" relation="1:1:relation21"/>
                                    <link port="1:current.plus" relation="1:1:relation22"/>
                                    <link port="1:current.minus" relation="1:1:relation17"/>
                                    <link port="1:current.minus" relation="1:1:relation18"/>
                                    <link port="1:current.output" relation="1:relation2"/>
                                    <link port="1:velocity gain.input" relation="1:1:relation7"/>
                                    <link port="1:velocity gain.output" relation="1:1:relation20"/>
                                    <link port="1:sign(velocity).firstOperand" relation="1:1:relation7"/>
                                    <link port="1:sign(velocity).output" relation="1:1:relation13"/>
                                    <link port="1:angle.plus" relation="1:1:relation2"/>
                                    <link port="1:angle.minus" relation="1:1:relation5"/>
                                    <link port="1:angle.output" relation="1:1:relation6"/>
                                </entity>
                                <entity name="throttle_velocity" class="ptolemy.actor.TypedCompositeActor">
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="140.0, 173.5">
                                    </property>
                                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute">
                                    </property>
                                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                                    </property>
                                    <port name="position" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="40.5, 139.0">
                                        </property>
                                    </port>
                                    <port name="velocity" class="ptolemy.actor.TypedIOPort">
                                        <property name="output"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="478.0, 234.0">
                                        </property>
                                    </port>
                                    <entity name="IIR" class="ptolemy.actor.lib.IIR">
                                        <property name="numerator" class="ptolemy.data.expr.Parameter" value="{0.0, 1.0}">
                                        </property>
                                        <property name="denominator" class="ptolemy.data.expr.Parameter" value="{1.0}">
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="150.0, 273.0">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="247.0, 233.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="Scale" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="1/p">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="340.0, 233.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="91.0, 196.0">
                                        </vertex>
                                    </relation>
                                    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <link port="position" relation="relation"/>
                                    <link port="velocity" relation="relation4"/>
                                    <link port="IIR.input" relation="relation"/>
                                    <link port="IIR.output" relation="relation2"/>
                                    <link port="AddSubtract.plus" relation="relation"/>
                                    <link port="AddSubtract.minus" relation="relation2"/>
                                    <link port="AddSubtract.output" relation="relation3"/>
                                    <link port="Scale.input" relation="relation3"/>
                                    <link port="Scale.output" relation="relation4"/>
                                </entity>
                                <entity name="desired_throttle_velocity" class="ptolemy.actor.TypedCompositeActor">
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="185.0, 334.5">
                                    </property>
                                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute">
                                    </property>
                                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                                    </property>
                                    <port name="position" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="40.5, 139.0">
                                        </property>
                                    </port>
                                    <port name="velocity" class="ptolemy.actor.TypedIOPort">
                                        <property name="output"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="478.0, 234.0">
                                        </property>
                                    </port>
                                    <entity name="IIR" class="ptolemy.actor.lib.IIR">
                                        <property name="numerator" class="ptolemy.data.expr.Parameter" value="{0.0, 1.0}">
                                        </property>
                                        <property name="denominator" class="ptolemy.data.expr.Parameter" value="{1.0}">
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="150.0, 273.0">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="247.0, 233.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="Scale" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="1/p">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="340.0, 233.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="91.0, 196.0">
                                        </vertex>
                                    </relation>
                                    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <link port="position" relation="relation"/>
                                    <link port="velocity" relation="relation4"/>
                                    <link port="IIR.input" relation="relation"/>
                                    <link port="IIR.output" relation="relation2"/>
                                    <link port="AddSubtract.plus" relation="relation"/>
                                    <link port="AddSubtract.minus" relation="relation2"/>
                                    <link port="AddSubtract.output" relation="relation3"/>
                                    <link port="Scale.input" relation="relation3"/>
                                    <link port="Scale.output" relation="relation4"/>
                                </entity>
                                <entity name="desired_throttle_acceleration" class="ptolemy.actor.TypedCompositeActor">
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="307.5, 414.5">
                                    </property>
                                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute">
                                    </property>
                                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                                    </property>
                                    <port name="position" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="40.5, 139.0">
                                        </property>
                                    </port>
                                    <port name="velocity" class="ptolemy.actor.TypedIOPort">
                                        <property name="output"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="478.0, 234.0">
                                        </property>
                                    </port>
                                    <entity name="IIR" class="ptolemy.actor.lib.IIR">
                                        <property name="numerator" class="ptolemy.data.expr.Parameter" value="{0.0, 1.0}">
                                        </property>
                                        <property name="denominator" class="ptolemy.data.expr.Parameter" value="{1.0}">
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="150.0, 273.0">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="247.0, 233.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="Scale" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="1/p">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="340.0, 233.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="91.0, 196.0">
                                        </vertex>
                                    </relation>
                                    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <link port="position" relation="relation"/>
                                    <link port="velocity" relation="relation4"/>
                                    <link port="IIR.input" relation="relation"/>
                                    <link port="IIR.output" relation="relation2"/>
                                    <link port="AddSubtract.plus" relation="relation"/>
                                    <link port="AddSubtract.minus" relation="relation2"/>
                                    <link port="AddSubtract.output" relation="relation3"/>
                                    <link port="Scale.input" relation="relation3"/>
                                    <link port="Scale.output" relation="relation4"/>
                                </entity>
                                <relation name="1:relation" class="ptolemy.actor.TypedIORelation">
                                    <vertex name="vertex1" class="ptolemy.moml.Vertex" value="66.0, 126.0">
                                    </vertex>
                                </relation>
                                <relation name="1:relation3" class="ptolemy.actor.TypedIORelation">
                                    <vertex name="vertex1" class="ptolemy.moml.Vertex" value="206.0, 376.0">
                                    </vertex>
                                </relation>
                                <relation name="1:relation2" class="ptolemy.actor.TypedIORelation">
                                    <vertex name="vertex1" class="ptolemy.moml.Vertex" value="66.0, 296.0">
                                    </vertex>
                                </relation>
                                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                                </relation>
                                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                                </relation>
                                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                                </relation>
                                <link port="throttle_position" relation="1:relation"/>
                                <link port="desired_throttle_position" relation="1:relation2"/>
                                <link port="current" relation="relation"/>
                                <link port="sliding mode controller.1:throttle_position" relation="1:relation"/>
                                <link port="sliding mode controller.1:throttle_velocity" relation="relation2"/>
                                <link port="sliding mode controller.1:current" relation="relation"/>
                                <link port="sliding mode controller.1:desired_throttle_position" relation="1:relation2"/>
                                <link port="sliding mode controller.desired_throttle_velocity" relation="1:relation3"/>
                                <link port="sliding mode controller.desired_throttle_acceleration" relation="relation3"/>
                                <link port="throttle_velocity.position" relation="1:relation"/>
                                <link port="throttle_velocity.velocity" relation="relation2"/>
                                <link port="desired_throttle_velocity.position" relation="1:relation2"/>
                                <link port="desired_throttle_velocity.velocity" relation="1:relation3"/>
                                <link port="desired_throttle_acceleration.position" relation="1:relation3"/>
                                <link port="desired_throttle_acceleration.velocity" relation="relation3"/>
                            </entity>
                            <entity name="throttle_position" class="ptolemy.actor.lib.VectorDisassembler">
                                <property name="_location" class="ptolemy.kernel.util.Location" value="156.5, 154.5">
                                </property>
                                <port name="input" class="ptolemy.actor.TypedIOPort">
                                    <property name="input"/>
                                </port>
                                <port name="output" class="ptolemy.actor.TypedIOPort">
                                    <property name="output"/>
                                    <property name="multiport"/>
                                </port>
                            </entity>
                            <entity name="sdf discard" class="ptolemy.actor.TypedCompositeActor">
                                <property name="_location" class="ptolemy.kernel.util.Location" value="230.0, 323.5">
                                </property>
                                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute">
                                </property>
                                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                                </property>
                                <port name="input" class="ptolemy.actor.TypedIOPort">
                                    <property name="input"/>
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="73.0, 194.0">
                                    </property>
                                </port>
                                <port name="output" class="ptolemy.actor.TypedIOPort">
                                    <property name="output"/>
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="410.0, 194.0">
                                    </property>
                                </port>
                                <entity name="Const" class="ptolemy.actor.lib.Const">
                                    <property name="value" class="ptolemy.data.expr.Parameter" value="0.0">
                                    </property>
                                    <doc>Create a constant sequence</doc>
                                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                        </property>
                                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                                        </property>
                                    </property>
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="236.0, 193.5">
                                    </property>
                                    <port name="output" class="ptolemy.actor.TypedIOPort">
                                        <property name="output"/>
                                    </port>
                                    <port name="trigger" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="multiport"/>
                                    </port>
                                </entity>
                                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                                </relation>
                                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                                </relation>
                                <link port="input" relation="relation"/>
                                <link port="output" relation="relation3"/>
                                <link port="Const.output" relation="relation3"/>
                                <link port="Const.trigger" relation="relation"/>
                            </entity>
                            <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                                <property name="_location" class="ptolemy.kernel.util.Location" value="352.0, 243.5">
                                </property>
                                <port name="plus" class="ptolemy.actor.TypedIOPort">
                                    <property name="input"/>
                                    <property name="multiport"/>
                                </port>
                                <port name="minus" class="ptolemy.actor.TypedIOPort">
                                    <property name="input"/>
                                    <property name="multiport"/>
                                </port>
                                <port name="output" class="ptolemy.actor.TypedIOPort">
                                    <property name="output"/>
                                </port>
                            </entity>
                            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <link port="throttle_positions" relation="relation"/>
                            <link port="desired_throttle_position" relation="relation3"/>
                            <link port="current" relation="relation8"/>
                            <link port="mode" relation="relation5"/>
                            <link port="sliding mode controller with estimator.throttle_position" relation="relation2"/>
                            <link port="sliding mode controller with estimator.desired_throttle_position" relation="relation3"/>
                            <link port="sliding mode controller with estimator.current" relation="relation6"/>
                            <link port="throttle_position.input" relation="relation"/>
                            <link port="throttle_position.output" relation="relation2"/>
                            <link port="sdf discard.input" relation="relation5"/>
                            <link port="sdf discard.output" relation="relation7"/>
                            <link port="AddSubtract.plus" relation="relation6"/>
                            <link port="AddSubtract.minus" relation="relation7"/>
                            <link port="AddSubtract.output" relation="relation8"/>
                        </entity>
                        <entity name="limp_home" class="ptolemy.domains.fsm.modal.Refinement">
                            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                            </property>
                            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[86, 139]">
                            </property>
                            <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                                <property name="Scheduler" class="ptolemy.domains.sdf.kernel.SDFScheduler">
                                </property>
                                <property name="iterations" class="ptolemy.data.expr.Parameter" value="0">
                                </property>
                                <property name="vectorizationFactor" class="ptolemy.data.expr.Parameter" value="1">
                                </property>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="98.0, 48.5">
                                </property>
                            </property>
                            <port name="throttle_positions" class="ptolemy.domains.fsm.modal.RefinementPort">
                                <property name="input"/>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="98.0, 109.0">
                                </property>
                                <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                                </property>
                            </port>
                            <port name="desired_throttle_position" class="ptolemy.domains.fsm.modal.RefinementPort">
                                <property name="input"/>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="118.0, 249.0">
                                </property>
                                <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                                </property>
                            </port>
                            <port name="current" class="ptolemy.domains.fsm.modal.RefinementPort">
                                <property name="output"/>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="426.5, 300.0">
                                </property>
                                <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="1">
                                </property>
                                <property name="tokenInitProduction" class="ptolemy.data.expr.Parameter" value="0">
                                </property>
                            </port>
                            <port name="mode" class="ptolemy.domains.fsm.modal.RefinementPort">
                                <property name="input"/>
                                <property name="_location" class="ptolemy.kernel.util.Location" value="69.0, 360.0">
                                </property>
                                <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                                </property>
                            </port>
                            <entity name="sdf discard" class="ptolemy.actor.TypedCompositeActor">
                                <property name="_location" class="ptolemy.kernel.util.Location" value="230.0, 323.5">
                                </property>
                                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute">
                                </property>
                                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                                </property>
                                <port name="input" class="ptolemy.actor.TypedIOPort">
                                    <property name="input"/>
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="73.0, 194.0">
                                    </property>
                                </port>
                                <port name="output" class="ptolemy.actor.TypedIOPort">
                                    <property name="output"/>
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="410.0, 194.0">
                                    </property>
                                </port>
                                <entity name="Const" class="ptolemy.actor.lib.Const">
                                    <property name="value" class="ptolemy.data.expr.Parameter" value="0.0">
                                    </property>
                                    <doc>Create a constant sequence</doc>
                                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                        </property>
                                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                                        </property>
                                    </property>
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="231.0, 193.5">
                                    </property>
                                    <port name="output" class="ptolemy.actor.TypedIOPort">
                                        <property name="output"/>
                                    </port>
                                    <port name="trigger" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="multiport"/>
                                    </port>
                                </entity>
                                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                                </relation>
                                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                                </relation>
                                <link port="input" relation="relation"/>
                                <link port="output" relation="relation3"/>
                                <link port="Const.output" relation="relation3"/>
                                <link port="Const.trigger" relation="relation"/>
                            </entity>
                            <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                                <property name="_location" class="ptolemy.kernel.util.Location" value="347.0, 248.5">
                                </property>
                                <port name="plus" class="ptolemy.actor.TypedIOPort">
                                    <property name="input"/>
                                    <property name="multiport"/>
                                </port>
                                <port name="minus" class="ptolemy.actor.TypedIOPort">
                                    <property name="input"/>
                                    <property name="multiport"/>
                                </port>
                                <port name="output" class="ptolemy.actor.TypedIOPort">
                                    <property name="output"/>
                                </port>
                            </entity>
                            <entity name="sliding mode controller with estimator" class="ptolemy.actor.TypedCompositeActor">
                                <property name="_location" class="ptolemy.kernel.util.Location" value="317.0, 199.5">
                                </property>
                                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[817, 635]">
                                </property>
                                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[-4, 10]">
                                </property>
                                <port name="throttle_position" class="ptolemy.actor.TypedIOPort">
                                    <property name="input"/>
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="64.0, 74.0">
                                    </property>
                                    <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                                    </property>
                                </port>
                                <port name="desired_throttle_position" class="ptolemy.actor.TypedIOPort">
                                    <property name="input"/>
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="93.0, 259.0">
                                    </property>
                                    <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                                    </property>
                                </port>
                                <port name="current" class="ptolemy.actor.TypedIOPort">
                                    <property name="output"/>
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="636.5, 250.0">
                                    </property>
                                    <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="1">
                                    </property>
                                    <property name="tokenInitProduction" class="ptolemy.data.expr.Parameter" value="0">
                                    </property>
                                </port>
                                <entity name="sliding mode controller" class="ptolemy.actor.TypedCompositeActor">
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="580.5, 186.5">
                                    </property>
                                    <property name="Ks_J" class="ptolemy.data.expr.Parameter" value="390.0">
                                    </property>
                                    <property name="Kd_J" class="ptolemy.data.expr.Parameter" value="0.1">
                                    </property>
                                    <property name="Kf_J" class="ptolemy.data.expr.Parameter" value="140.0">
                                    </property>
                                    <property name="Ra" class="ptolemy.data.expr.Parameter" value="1.7">
                                    </property>
                                    <property name="theta_eq" class="ptolemy.data.expr.Parameter" value="-0.25">
                                    </property>
                                    <property name="Kt_Ra_J" class="ptolemy.data.expr.Parameter" value="140">
                                    </property>
                                    <property name="J" class="ptolemy.data.expr.Parameter" value="5e-5">
                                    </property>
                                    <property name="Ks" class="ptolemy.data.expr.Parameter" value="Ks_J*J">
                                    </property>
                                    <property name="Kf" class="ptolemy.data.expr.Parameter" value="Kf_J*J">
                                    </property>
                                    <property name="Kd" class="ptolemy.data.expr.Parameter" value="Kd_J*J">
                                    </property>
                                    <property name="Kt" class="ptolemy.data.expr.Parameter" value="Kt_Ra_J*Ra*J">
                                    </property>
                                    <property name="lambda" class="ptolemy.data.expr.Parameter" value="60.0">
                                    </property>
                                    <property name="n" class="ptolemy.data.expr.Parameter" value="2.0">
                                    </property>
                                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                                    </property>
                                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
                                    </property>
                                    <port name="1:throttle_position" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="59.0, 134.0">
                                        </property>
                                    </port>
                                    <port name="1:throttle_velocity" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="59.0, 309.0">
                                        </property>
                                    </port>
                                    <port name="1:current" class="ptolemy.actor.TypedIOPort">
                                        <property name="output"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="761.5, 230.0">
                                        </property>
                                    </port>
                                    <port name="1:desired_throttle_position" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="83.0, 189.0">
                                        </property>
                                    </port>
                                    <port name="desired_throttle_velocity" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="78.0, 249.0">
                                        </property>
                                    </port>
                                    <port name="desired_throttle_acceleration" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="90.0, 459.0">
                                        </property>
                                    </port>
                                    <entity name="1:angle gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="Ks/Kt">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="580.0, 29.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:angle error" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="145.5, 142.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:sign(s)" class="ptolemy.actor.lib.MathFunction">
                                        <property name="function" class="ptolemy.kernel.util.StringAttribute" value="sign">
                                            <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                                                <property name="exp" class="ptolemy.kernel.util.StringAttribute" value="exp">
                                                </property>
                                                <property name="log" class="ptolemy.kernel.util.StringAttribute" value="log">
                                                </property>
                                                <property name="modulo" class="ptolemy.kernel.util.StringAttribute" value="modulo">
                                                </property>
                                                <property name="sign" class="ptolemy.kernel.util.StringAttribute" value="sign">
                                                </property>
                                                <property name="square" class="ptolemy.kernel.util.StringAttribute" value="square">
                                                </property>
                                                <property name="sqrt" class="ptolemy.kernel.util.StringAttribute" value="sqrt">
                                                </property>
                                            </property>
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="475.0, 154.5">
                                        </property>
                                        <port name="firstOperand" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:surface gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="lambda">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="235.5, 144.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:sign(velocity) gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="Kf/Kt">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="596.5, 384.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:sign(s) gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="n">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="570.0, 154.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:velocity error" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="308.0, 239.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:theta_eq" class="ptolemy.actor.lib.Const">
                                        <property name="value" class="ptolemy.data.expr.Parameter" value="theta_eq">
                                        </property>
                                        <doc>Create a constant sequence</doc>
                                        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="146.5, 84.5">
                                        </property>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                        <port name="trigger" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                    </entity>
                                    <entity name="1:s" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="395.0, 152.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:velocity error gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="lambda*(J/Kt)">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="586.0, 239.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:acceleration gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="J/Kt">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="594.0, 464.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:current" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="695.0, 228.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:velocity gain" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="Kd/Kt">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="581.0, 309.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:sign(velocity)" class="ptolemy.actor.lib.MathFunction">
                                        <property name="function" class="ptolemy.kernel.util.StringAttribute" value="sign">
                                            <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                                                <property name="exp" class="ptolemy.kernel.util.StringAttribute" value="exp">
                                                </property>
                                                <property name="log" class="ptolemy.kernel.util.StringAttribute" value="log">
                                                </property>
                                                <property name="modulo" class="ptolemy.kernel.util.StringAttribute" value="modulo">
                                                </property>
                                                <property name="sign" class="ptolemy.kernel.util.StringAttribute" value="sign">
                                                </property>
                                                <property name="square" class="ptolemy.kernel.util.StringAttribute" value="square">
                                                </property>
                                                <property name="sqrt" class="ptolemy.kernel.util.StringAttribute" value="sqrt">
                                                </property>
                                            </property>
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="313.0, 384.5">
                                        </property>
                                        <port name="firstOperand" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="1:angle" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="195.0, 29.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <relation name="1:1:relation21" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:relation2" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation13" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation18" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation5" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation2" class="ptolemy.actor.TypedIORelation">
                                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="71.0, 141.0">
                                        </vertex>
                                    </relation>
                                    <relation name="1:1:relation19" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation6" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation14" class="ptolemy.actor.TypedIORelation">
                                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="346.0, 246.0">
                                        </vertex>
                                    </relation>
                                    <relation name="1:relation8" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation8" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation22" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation9" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation7" class="ptolemy.actor.TypedIORelation">
                                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="236.0, 316.0">
                                        </vertex>
                                    </relation>
                                    <relation name="1:1:relation12" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation11" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation17" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="1:1:relation20" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <link port="1:throttle_position" relation="1:1:relation2"/>
                                    <link port="1:throttle_velocity" relation="1:1:relation7"/>
                                    <link port="1:current" relation="1:relation2"/>
                                    <link port="1:desired_throttle_position" relation="1:relation8"/>
                                    <link port="desired_throttle_velocity" relation="relation"/>
                                    <link port="desired_throttle_acceleration" relation="relation3"/>
                                    <link port="1:angle gain.input" relation="1:1:relation6"/>
                                    <link port="1:angle gain.output" relation="1:1:relation19"/>
                                    <link port="1:angle error.plus" relation="1:1:relation2"/>
                                    <link port="1:angle error.minus" relation="1:relation8"/>
                                    <link port="1:angle error.output" relation="1:1:relation8"/>
                                    <link port="1:sign(s).firstOperand" relation="1:1:relation11"/>
                                    <link port="1:sign(s).output" relation="1:1:relation12"/>
                                    <link port="1:surface gain.input" relation="1:1:relation8"/>
                                    <link port="1:surface gain.output" relation="1:1:relation9"/>
                                    <link port="1:sign(velocity) gain.input" relation="1:1:relation13"/>
                                    <link port="1:sign(velocity) gain.output" relation="1:1:relation21"/>
                                    <link port="1:sign(s) gain.input" relation="1:1:relation12"/>
                                    <link port="1:sign(s) gain.output" relation="1:1:relation18"/>
                                    <link port="1:velocity error.plus" relation="1:1:relation7"/>
                                    <link port="1:velocity error.minus" relation="relation"/>
                                    <link port="1:velocity error.output" relation="1:1:relation14"/>
                                    <link port="1:theta_eq.output" relation="1:1:relation5"/>
                                    <link port="1:theta_eq.trigger" relation="1:1:relation2"/>
                                    <link port="1:s.plus" relation="1:1:relation9"/>
                                    <link port="1:s.plus" relation="1:1:relation14"/>
                                    <link port="1:s.output" relation="1:1:relation11"/>
                                    <link port="1:velocity error gain.input" relation="1:1:relation14"/>
                                    <link port="1:velocity error gain.output" relation="1:1:relation17"/>
                                    <link port="1:acceleration gain.input" relation="relation3"/>
                                    <link port="1:acceleration gain.output" relation="1:1:relation22"/>
                                    <link port="1:current.plus" relation="1:1:relation19"/>
                                    <link port="1:current.plus" relation="1:1:relation20"/>
                                    <link port="1:current.plus" relation="1:1:relation21"/>
                                    <link port="1:current.plus" relation="1:1:relation22"/>
                                    <link port="1:current.minus" relation="1:1:relation17"/>
                                    <link port="1:current.minus" relation="1:1:relation18"/>
                                    <link port="1:current.output" relation="1:relation2"/>
                                    <link port="1:velocity gain.input" relation="1:1:relation7"/>
                                    <link port="1:velocity gain.output" relation="1:1:relation20"/>
                                    <link port="1:sign(velocity).firstOperand" relation="1:1:relation7"/>
                                    <link port="1:sign(velocity).output" relation="1:1:relation13"/>
                                    <link port="1:angle.plus" relation="1:1:relation2"/>
                                    <link port="1:angle.minus" relation="1:1:relation5"/>
                                    <link port="1:angle.output" relation="1:1:relation6"/>
                                </entity>
                                <entity name="throttle_velocity" class="ptolemy.actor.TypedCompositeActor">
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="140.0, 173.5">
                                    </property>
                                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute">
                                    </property>
                                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                                    </property>
                                    <port name="position" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="40.5, 139.0">
                                        </property>
                                    </port>
                                    <port name="velocity" class="ptolemy.actor.TypedIOPort">
                                        <property name="output"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="478.0, 234.0">
                                        </property>
                                    </port>
                                    <entity name="IIR" class="ptolemy.actor.lib.IIR">
                                        <property name="numerator" class="ptolemy.data.expr.Parameter" value="{0.0, 1.0}">
                                        </property>
                                        <property name="denominator" class="ptolemy.data.expr.Parameter" value="{1.0}">
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="150.0, 273.0">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="247.0, 233.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="Scale" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="1/p">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="340.0, 233.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="91.0, 196.0">
                                        </vertex>
                                    </relation>
                                    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <link port="position" relation="relation"/>
                                    <link port="velocity" relation="relation4"/>
                                    <link port="IIR.input" relation="relation"/>
                                    <link port="IIR.output" relation="relation2"/>
                                    <link port="AddSubtract.plus" relation="relation"/>
                                    <link port="AddSubtract.minus" relation="relation2"/>
                                    <link port="AddSubtract.output" relation="relation3"/>
                                    <link port="Scale.input" relation="relation3"/>
                                    <link port="Scale.output" relation="relation4"/>
                                </entity>
                                <entity name="desired_throttle_velocity" class="ptolemy.actor.TypedCompositeActor">
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="185.0, 334.5">
                                    </property>
                                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute">
                                    </property>
                                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                                    </property>
                                    <port name="position" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="40.5, 139.0">
                                        </property>
                                    </port>
                                    <port name="velocity" class="ptolemy.actor.TypedIOPort">
                                        <property name="output"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="478.0, 234.0">
                                        </property>
                                    </port>
                                    <entity name="IIR" class="ptolemy.actor.lib.IIR">
                                        <property name="numerator" class="ptolemy.data.expr.Parameter" value="{0.0, 1.0}">
                                        </property>
                                        <property name="denominator" class="ptolemy.data.expr.Parameter" value="{1.0}">
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="150.0, 273.0">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="247.0, 233.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="Scale" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="1/p">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="340.0, 233.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="91.0, 196.0">
                                        </vertex>
                                    </relation>
                                    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <link port="position" relation="relation"/>
                                    <link port="velocity" relation="relation4"/>
                                    <link port="IIR.input" relation="relation"/>
                                    <link port="IIR.output" relation="relation2"/>
                                    <link port="AddSubtract.plus" relation="relation"/>
                                    <link port="AddSubtract.minus" relation="relation2"/>
                                    <link port="AddSubtract.output" relation="relation3"/>
                                    <link port="Scale.input" relation="relation3"/>
                                    <link port="Scale.output" relation="relation4"/>
                                </entity>
                                <entity name="desired_throttle_acceleration" class="ptolemy.actor.TypedCompositeActor">
                                    <property name="_location" class="ptolemy.kernel.util.Location" value="307.5, 414.5">
                                    </property>
                                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute">
                                    </property>
                                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                                    </property>
                                    <port name="position" class="ptolemy.actor.TypedIOPort">
                                        <property name="input"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="40.5, 139.0">
                                        </property>
                                    </port>
                                    <port name="velocity" class="ptolemy.actor.TypedIOPort">
                                        <property name="output"/>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="478.0, 234.0">
                                        </property>
                                    </port>
                                    <entity name="IIR" class="ptolemy.actor.lib.IIR">
                                        <property name="numerator" class="ptolemy.data.expr.Parameter" value="{0.0, 1.0}">
                                        </property>
                                        <property name="denominator" class="ptolemy.data.expr.Parameter" value="{1.0}">
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="150.0, 273.0">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="247.0, 233.5">
                                        </property>
                                        <port name="plus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="minus" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                            <property name="multiport"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <entity name="Scale" class="ptolemy.actor.lib.Scale">
                                        <property name="factor" class="ptolemy.data.expr.Parameter" value="1/p">
                                        </property>
                                        <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                                        </property>
                                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                                            </property>
                                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                            </property>
                                        </property>
                                        <property name="_location" class="ptolemy.kernel.util.Location" value="340.0, 233.5">
                                        </property>
                                        <port name="input" class="ptolemy.actor.TypedIOPort">
                                            <property name="input"/>
                                        </port>
                                        <port name="output" class="ptolemy.actor.TypedIOPort">
                                            <property name="output"/>
                                        </port>
                                    </entity>
                                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="91.0, 196.0">
                                        </vertex>
                                    </relation>
                                    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                                    </relation>
                                    <link port="position" relation="relation"/>
                                    <link port="velocity" relation="relation4"/>
                                    <link port="IIR.input" relation="relation"/>
                                    <link port="IIR.output" relation="relation2"/>
                                    <link port="AddSubtract.plus" relation="relation"/>
                                    <link port="AddSubtract.minus" relation="relation2"/>
                                    <link port="AddSubtract.output" relation="relation3"/>
                                    <link port="Scale.input" relation="relation3"/>
                                    <link port="Scale.output" relation="relation4"/>
                                </entity>
                                <relation name="1:relation" class="ptolemy.actor.TypedIORelation">
                                    <vertex name="vertex1" class="ptolemy.moml.Vertex" value="66.0, 126.0">
                                    </vertex>
                                </relation>
                                <relation name="1:relation3" class="ptolemy.actor.TypedIORelation">
                                    <vertex name="vertex1" class="ptolemy.moml.Vertex" value="206.0, 376.0">
                                    </vertex>
                                </relation>
                                <relation name="1:relation2" class="ptolemy.actor.TypedIORelation">
                                    <vertex name="vertex1" class="ptolemy.moml.Vertex" value="66.0, 296.0">
                                    </vertex>
                                </relation>
                                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                                </relation>
                                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                                </relation>
                                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                                </relation>
                                <link port="throttle_position" relation="1:relation"/>
                                <link port="desired_throttle_position" relation="1:relation2"/>
                                <link port="current" relation="relation"/>
                                <link port="sliding mode controller.1:throttle_position" relation="1:relation"/>
                                <link port="sliding mode controller.1:throttle_velocity" relation="relation2"/>
                                <link port="sliding mode controller.1:current" relation="relation"/>
                                <link port="sliding mode controller.1:desired_throttle_position" relation="1:relation2"/>
                                <link port="sliding mode controller.desired_throttle_velocity" relation="1:relation3"/>
                                <link port="sliding mode controller.desired_throttle_acceleration" relation="relation3"/>
                                <link port="throttle_velocity.position" relation="1:relation"/>
                                <link port="throttle_velocity.velocity" relation="relation2"/>
                                <link port="desired_throttle_velocity.position" relation="1:relation2"/>
                                <link port="desired_throttle_velocity.velocity" relation="1:relation3"/>
                                <link port="desired_throttle_acceleration.position" relation="1:relation3"/>
                                <link port="desired_throttle_acceleration.velocity" relation="relation3"/>
                            </entity>
                            <entity name="throttle_position" class="ptolemy.actor.lib.VectorDisassembler">
                                <property name="_location" class="ptolemy.kernel.util.Location" value="156.5, 154.5">
                                </property>
                                <port name="input" class="ptolemy.actor.TypedIOPort">
                                    <property name="input"/>
                                </port>
                                <port name="output" class="ptolemy.actor.TypedIOPort">
                                    <property name="output"/>
                                    <property name="multiport"/>
                                </port>
                            </entity>
                            <relation name="1:relation2" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <relation name="1:relation6" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <relation name="1:relation7" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                            </relation>
                            <link port="throttle_positions" relation="relation"/>
                            <link port="desired_throttle_position" relation="relation2"/>
                            <link port="current" relation="relation4"/>
                            <link port="mode" relation="relation3"/>
                            <link port="sdf discard.input" relation="relation3"/>
                            <link port="sdf discard.output" relation="1:relation7"/>
                            <link port="AddSubtract.plus" relation="1:relation6"/>
                            <link port="AddSubtract.minus" relation="1:relation7"/>
                            <link port="AddSubtract.output" relation="relation4"/>
                            <link port="sliding mode controller with estimator.throttle_position" relation="1:relation2"/>
                            <link port="sliding mode controller with estimator.desired_throttle_position" relation="relation2"/>
                            <link port="sliding mode controller with estimator.current" relation="1:relation6"/>
                            <link port="throttle_position.input" relation="relation"/>
                            <link port="throttle_position.output" relation="1:relation2"/>
                        </entity>
                        <relation name="throttle_positionsRelation" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="desired_throttle_positionRelation" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="currentRelation" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="modeRelation" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <link port="throttle_positions" relation="throttle_positionsRelation"/>
                        <link port="desired_throttle_position" relation="desired_throttle_positionRelation"/>
                        <link port="current" relation="currentRelation"/>
                        <link port="mode" relation="modeRelation"/>
                        <link port="_Controller.throttle_positions" relation="throttle_positionsRelation"/>
                        <link port="_Controller.desired_throttle_position" relation="desired_throttle_positionRelation"/>
                        <link port="_Controller.current" relation="currentRelation"/>
                        <link port="_Controller.mode" relation="modeRelation"/>
                        <link port="driver.throttle_positions" relation="throttle_positionsRelation"/>
                        <link port="driver.desired_throttle_position" relation="desired_throttle_positionRelation"/>
                        <link port="driver.current" relation="currentRelation"/>
                        <link port="driver.mode" relation="modeRelation"/>
                        <link port="limp_home.throttle_positions" relation="throttle_positionsRelation"/>
                        <link port="limp_home.desired_throttle_position" relation="desired_throttle_positionRelation"/>
                        <link port="limp_home.current" relation="currentRelation"/>
                        <link port="limp_home.mode" relation="modeRelation"/>
                    </entity>
                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <link port="throttle_motor" relation="relation5"/>
                    <link port="mode" relation="relation4"/>
                    <link port="throttle_position" relation="relation3"/>
                    <link port="pedal_position" relation="relation"/>
                    <link port="pedal filter.pedal_position" relation="relation"/>
                    <link port="pedal filter.filtered_pedal_position" relation="relation2"/>
                    <link port="modal controller.throttle_positions" relation="relation3"/>
                    <link port="modal controller.desired_throttle_position" relation="relation2"/>
                    <link port="modal controller.current" relation="relation5"/>
                    <link port="modal controller.mode" relation="relation4"/>
                </entity>
                <entity name="monitor" class="ptolemy.actor.TypedCompositeActor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="470.0, 108.5">
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[667, 400]">
                    </property>
                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[71, 127]">
                    </property>
                    <property name="tps_error_threshold" class="ptolemy.data.expr.Parameter" value="1e-3">
                    </property>
                    <port name="monitor_mode" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="460.0, 229.0">
                        </property>
                        <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                        <property name="tokenInitProduction" class="ptolemy.data.expr.Parameter" value="0">
                        </property>
                    </port>
                    <port name="throttle_motor" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="170.0, 79.0">
                        </property>
                        <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                    </port>
                    <port name="motor_current" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="109.0, 189.0">
                        </property>
                        <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                    </port>
                    <port name="throttle_position" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="110.0, 264.0">
                        </property>
                        <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                    </port>
                    <port name="mode" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="85.0, 338.0">
                        </property>
                    </port>
                    <entity name="error_p" class="ptolemy.actor.lib.logic.LogicFunction">
                        <property name="function" class="ptolemy.kernel.util.StringAttribute" value="or">
                            <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                                <property name="and" class="ptolemy.kernel.util.StringAttribute" value="and">
                                </property>
                                <property name="or" class="ptolemy.kernel.util.StringAttribute" value="or">
                                </property>
                                <property name="xor" class="ptolemy.kernel.util.StringAttribute" value="xor">
                                </property>
                                <property name="nand" class="ptolemy.kernel.util.StringAttribute" value="nand">
                                </property>
                                <property name="nor" class="ptolemy.kernel.util.StringAttribute" value="nor">
                                </property>
                                <property name="xnor" class="ptolemy.kernel.util.StringAttribute" value="xnor">
                                </property>
                            </property>
                        </property>
                        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
                            </property>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="360.0, 228.5">
                        </property>
                        <port name="input" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                            <property name="multiport"/>
                        </port>
                        <port name="output" class="ptolemy.actor.TypedIOPort">
                            <property name="output"/>
                        </port>
                    </entity>
                    <entity name="tps fault detection" class="ptolemy.actor.TypedCompositeActor">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="262.0, 229.5">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                        </property>
                        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
                        </property>
                        <property name="tps_error_threshold" class="ptolemy.data.expr.Parameter" value="tps_error_threshold">
                        </property>
                        <port name="tps" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="26.0, 114.0">
                            </property>
                            <property name="tps_error_threshold" class="ptolemy.data.expr.Parameter" value="tps_error_threshold">
                            </property>
                        </port>
                        <port name="tps_error_p" class="ptolemy.actor.TypedIOPort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="519.0, 179.0">
                            </property>
                        </port>
                        <entity name="tps1, tps2" class="ptolemy.actor.lib.VectorDisassembler">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="109.5, 169.5">
                            </property>
                            <port name="input" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="output" class="ptolemy.actor.TypedIOPort">
                                <property name="output"/>
                                <property name="multiport"/>
                            </port>
                        </entity>
                        <entity name="sensor error" class="ptolemy.actor.lib.AddSubtract">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="215.5, 177.5">
                            </property>
                            <port name="plus" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                                <property name="multiport"/>
                            </port>
                            <port name="minus" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                                <property name="multiport"/>
                            </port>
                            <port name="output" class="ptolemy.actor.TypedIOPort">
                                <property name="output"/>
                            </port>
                        </entity>
                        <entity name="Comparator" class="ptolemy.actor.lib.logic.Comparator">
                            <property name="comparison" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                                <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                                    <property name="gt" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                                    </property>
                                    <property name="ge" class="ptolemy.kernel.util.StringAttribute" value="&gt;=">
                                    </property>
                                    <property name="lt" class="ptolemy.kernel.util.StringAttribute" value="&lt;">
                                    </property>
                                    <property name="le" class="ptolemy.kernel.util.StringAttribute" value="&lt;=">
                                    </property>
                                    <property name="eq" class="ptolemy.kernel.util.StringAttribute" value="==">
                                    </property>
                                </property>
                            </property>
                            <property name="tolerance" class="ptolemy.data.expr.Parameter" value="0.0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="comparison">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="405.0, 199.5">
                            </property>
                            <port name="left" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="right" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="output" class="ptolemy.actor.TypedIOPort">
                                <property name="output"/>
                            </port>
                        </entity>
                        <entity name="AbsoluteValue" class="ptolemy.actor.lib.AbsoluteValue">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="308.0, 173.5">
                            </property>
                            <port name="input" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="output" class="ptolemy.actor.TypedIOPort">
                                <property name="output"/>
                            </port>
                        </entity>
                        <entity name="tps_error_threshold" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="tps_error_threshold">
                            </property>
                            <doc>Create a constant sequence</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="181.0, 239.5">
                            </property>
                            <port name="output" class="ptolemy.actor.TypedIOPort">
                                <property name="output"/>
                            </port>
                            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                                <property name="multiport"/>
                            </port>
                        </entity>
                        <relation name="1:relation7" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="1:relation5" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="1:relation4" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="1:relation6" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <vertex name="vertex1" class="ptolemy.moml.Vertex" value="51.0, 176.0">
                            </vertex>
                        </relation>
                        <link port="tps" relation="relation"/>
                        <link port="tps_error_p" relation="relation2"/>
                        <link port="tps1, tps2.input" relation="relation"/>
                        <link port="tps1, tps2.output" relation="1:relation4"/>
                        <link port="tps1, tps2.output" relation="1:relation5"/>
                        <link port="sensor error.plus" relation="1:relation4"/>
                        <link port="sensor error.minus" relation="1:relation5"/>
                        <link port="sensor error.output" relation="1:relation6"/>
                        <link port="Comparator.left" relation="1:relation7"/>
                        <link port="Comparator.right" relation="relation3"/>
                        <link port="Comparator.output" relation="relation2"/>
                        <link port="AbsoluteValue.input" relation="1:relation6"/>
                        <link port="AbsoluteValue.output" relation="1:relation7"/>
                        <link port="tps_error_threshold.output" relation="relation3"/>
                        <link port="tps_error_threshold.trigger" relation="relation"/>
                    </entity>
                    <entity name="actuator fault detection" class="ptolemy.actor.TypedCompositeActor">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="281.5, 158.5">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                        </property>
                        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[420, -16]">
                        </property>
                        <port name="desired_current" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="82.5, 154.0">
                            </property>
                        </port>
                        <port name="actual_current" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="79.0, 224.0">
                            </property>
                        </port>
                        <port name="actuator_error_p" class="ptolemy.actor.TypedIOPort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="398.5, 234.0">
                            </property>
                        </port>
                        <entity name="placeholder" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="false">
                            </property>
                            <doc>Create a constant sequence</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="283.0, 229.5">
                            </property>
                            <port name="output" class="ptolemy.actor.TypedIOPort">
                                <property name="output"/>
                            </port>
                            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                                <property name="multiport"/>
                            </port>
                        </entity>
                        <entity name="Comparator" class="ptolemy.actor.lib.logic.Comparator">
                            <property name="comparison" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                                <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                                    <property name="gt" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                                    </property>
                                    <property name="ge" class="ptolemy.kernel.util.StringAttribute" value="&gt;=">
                                    </property>
                                    <property name="lt" class="ptolemy.kernel.util.StringAttribute" value="&lt;">
                                    </property>
                                    <property name="le" class="ptolemy.kernel.util.StringAttribute" value="&lt;=">
                                    </property>
                                    <property name="eq" class="ptolemy.kernel.util.StringAttribute" value="==">
                                    </property>
                                </property>
                            </property>
                            <property name="tolerance" class="ptolemy.data.expr.Parameter" value="0.0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="comparison">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="175.0, 179.5">
                            </property>
                            <port name="left" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="right" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="output" class="ptolemy.actor.TypedIOPort">
                                <property name="output"/>
                            </port>
                        </entity>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <link port="desired_current" relation="relation3"/>
                        <link port="actual_current" relation="relation4"/>
                        <link port="actuator_error_p" relation="relation"/>
                        <link port="placeholder.output" relation="relation"/>
                        <link port="placeholder.trigger" relation="relation5"/>
                        <link port="Comparator.left" relation="relation3"/>
                        <link port="Comparator.right" relation="relation4"/>
                        <link port="Comparator.output" relation="relation5"/>
                    </entity>
                    <entity name="task fault detection" class="ptolemy.actor.TypedCompositeActor">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="265.0, 298.5">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                        </property>
                        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[420, -16]">
                        </property>
                        <port name="desired_current" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="82.5, 154.0">
                            </property>
                        </port>
                        <port name="mode" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="59.0, 230.0">
                            </property>
                        </port>
                        <port name="task_error_p" class="ptolemy.actor.TypedIOPort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="396.5, 234.0">
                            </property>
                        </port>
                        <entity name="placeholder" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="false">
                            </property>
                            <doc>Create a constant sequence</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="283.0, 229.5">
                            </property>
                            <port name="output" class="ptolemy.actor.TypedIOPort">
                                <property name="output"/>
                            </port>
                            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                                <property name="multiport"/>
                            </port>
                        </entity>
                        <entity name="Comparator" class="ptolemy.actor.lib.logic.Comparator">
                            <property name="comparison" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                                <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                                    <property name="gt" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                                    </property>
                                    <property name="ge" class="ptolemy.kernel.util.StringAttribute" value="&gt;=">
                                    </property>
                                    <property name="lt" class="ptolemy.kernel.util.StringAttribute" value="&lt;">
                                    </property>
                                    <property name="le" class="ptolemy.kernel.util.StringAttribute" value="&lt;=">
                                    </property>
                                    <property name="eq" class="ptolemy.kernel.util.StringAttribute" value="==">
                                    </property>
                                </property>
                            </property>
                            <property name="tolerance" class="ptolemy.data.expr.Parameter" value="0.0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="comparison">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="175.0, 179.5">
                            </property>
                            <port name="left" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="right" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="output" class="ptolemy.actor.TypedIOPort">
                                <property name="output"/>
                            </port>
                        </entity>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                        </relation>
                        <link port="desired_current" relation="relation3"/>
                        <link port="mode" relation="relation4"/>
                        <link port="task_error_p" relation="relation"/>
                        <link port="placeholder.output" relation="relation"/>
                        <link port="placeholder.trigger" relation="relation5"/>
                        <link port="Comparator.left" relation="relation3"/>
                        <link port="Comparator.right" relation="relation4"/>
                        <link port="Comparator.output" relation="relation5"/>
                    </entity>
                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation19" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation25" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="176.0, 121.0">
                        </vertex>
                    </relation>
                    <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <link port="monitor_mode" relation="relation25"/>
                    <link port="throttle_motor" relation="relation7"/>
                    <link port="motor_current" relation="relation19"/>
                    <link port="throttle_position" relation="relation"/>
                    <link port="mode" relation="relation6"/>
                    <link port="error_p.input" relation="relation3"/>
                    <link port="error_p.input" relation="relation5"/>
                    <link port="error_p.input" relation="relation8"/>
                    <link port="error_p.output" relation="relation25"/>
                    <link port="tps fault detection.tps" relation="relation"/>
                    <link port="tps fault detection.tps_error_p" relation="relation5"/>
                    <link port="actuator fault detection.desired_current" relation="relation7"/>
                    <link port="actuator fault detection.actual_current" relation="relation19"/>
                    <link port="actuator fault detection.actuator_error_p" relation="relation3"/>
                    <link port="task fault detection.desired_current" relation="relation7"/>
                    <link port="task fault detection.mode" relation="relation6"/>
                    <link port="task fault detection.task_error_p" relation="relation8"/>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" class="ptolemy.moml.Vertex" value="66.0, 196.0">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" class="ptolemy.moml.Vertex" value="526.0, 76.0">
                    </vertex>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" class="ptolemy.moml.Vertex" value="511.0, 61.0">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" class="ptolemy.moml.Vertex" value="416.0, 186.0">
                    </vertex>
                </relation>
                <link port="throttle_motor" relation="relation2"/>
                <link port="motor_current" relation="relation7"/>
                <link port="pedal_position" relation="relation8"/>
                <link port="throttle_position" relation="relation"/>
                <link port="user_mode" relation="relation11"/>
                <link port="manager.mode" relation="relation5"/>
                <link port="manager.monitor_mode" relation="relation4"/>
                <link port="manager.user_mode" relation="relation11"/>
                <link port="servo controller.throttle_motor" relation="relation2"/>
                <link port="servo controller.mode" relation="relation5"/>
                <link port="servo controller.throttle_position" relation="relation"/>
                <link port="servo controller.pedal_position" relation="relation8"/>
                <link port="monitor.monitor_mode" relation="relation4"/>
                <link port="monitor.throttle_motor" relation="relation2"/>
                <link port="monitor.motor_current" relation="relation7"/>
                <link port="monitor.throttle_position" relation="relation"/>
                <link port="monitor.mode" relation="relation5"/>
            </entity>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="431.0, 241.0">
                </vertex>
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="226.0, 231.0">
                </vertex>
            </relation>
            <relation name="relation11" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="throttle_positions" relation="relation11"/>
            <link port="desired_throttle_position" relation="relation5"/>
            <link port="current" relation="relation6"/>
            <link port="actual_motor_current" relation="relation"/>
            <link port="pwm driver.motor_current" relation="relation"/>
            <link port="pwm driver.desired_current" relation="relation2"/>
            <link port="pwm driver.pwm_signal" relation="relation6"/>
            <link port="pwm_signal.input" relation="relation6"/>
            <link port="user_mode.output" relation="relation3"/>
            <link port="real-time controller.throttle_motor" relation="relation2"/>
            <link port="real-time controller.motor_current" relation="relation"/>
            <link port="real-time controller.pedal_position" relation="relation5"/>
            <link port="real-time controller.throttle_position" relation="relation11"/>
            <link port="real-time controller.user_mode" relation="relation3"/>
        </entity>
        <entity name="sampled throttle_position" class="ptolemy.domains.ct.lib.CTPeriodicSampler">
            <property name="samplePeriod" class="ptolemy.data.expr.Parameter" value="p">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="157.0, 164.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="multiport"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;DISCRETE&quot;">
                </property>
            </port>
        </entity>
        <entity name="sampled desired_throttle_position" class="ptolemy.domains.ct.lib.CTPeriodicSampler">
            <property name="samplePeriod" class="ptolemy.data.expr.Parameter" value="p">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="181.0, 249.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="multiport"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;DISCRETE&quot;">
                </property>
            </port>
        </entity>
        <entity name="current" class="ptolemy.domains.ct.lib.ZeroOrderHold">
            <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="450.0, 213.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;DISCRETE&quot;">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
        </entity>
        <entity name="sampled actual_motor_current" class="ptolemy.domains.ct.lib.CTPeriodicSampler">
            <property name="samplePeriod" class="ptolemy.data.expr.Parameter" value="p">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="171.5, 339.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="multiport"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;DISCRETE&quot;">
                </property>
            </port>
        </entity>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="throttle_positions" relation="relation"/>
        <link port="desired_throttle_position" relation="relation3"/>
        <link port="current" relation="relation4"/>
        <link port="actual_motor_current" relation="relation9"/>
        <link port="sampled controller.throttle_positions" relation="relation5"/>
        <link port="sampled controller.desired_throttle_position" relation="relation6"/>
        <link port="sampled controller.current" relation="relation7"/>
        <link port="sampled controller.actual_motor_current" relation="relation8"/>
        <link port="sampled throttle_position.input" relation="relation"/>
        <link port="sampled throttle_position.output" relation="relation5"/>
        <link port="sampled desired_throttle_position.input" relation="relation3"/>
        <link port="sampled desired_throttle_position.output" relation="relation6"/>
        <link port="current.input" relation="relation7"/>
        <link port="current.output" relation="relation4"/>
        <link port="sampled actual_motor_current.input" relation="relation9"/>
        <link port="sampled actual_motor_current.output" relation="relation8"/>
    </entity>
    <entity name="powertrain inputs" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="206.5, 379.5">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
        </property>
        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
        </property>
        <property name="annotation" class="ptolemy.kernel.util.Attribute">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">The ETC has several modes of operation including those, such
as rev-limiting, that depend on the powertrain parameters.
These modes are currently not implemented and the powertrain
inputs is put here as a placeholder.</text></svg></configure>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
            </property>
            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="294.0, 82.0">
            </property>
        </property>
        <port name="powertrain_inputs" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="347.0, 189.0">
            </property>
        </port>
        <entity name="placeholder" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <doc>Create a constant sequence</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="218.0, 189.5">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="powertrain_inputs" relation="relation"/>
        <link port="placeholder.output" relation="relation"/>
    </entity>
    <entity name="actuators" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="90.0, 258.5">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[817, 635]">
        </property>
        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[-4, -4]">
        </property>
        <property name="annotation" class="ptolemy.kernel.util.Attribute">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">pwm_signal is 1.0 or 0.0 meaning 
respectively pwm is on or off.</text></svg></configure>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
            </property>
            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="208.5, 362.0">
            </property>
        </property>
        <property name="J" class="ptolemy.data.expr.Parameter" value="5e-5">
        </property>
        <property name="Ra" class="ptolemy.data.expr.Parameter" value="1.7">
        </property>
        <property name="Kt_Ra_J" class="ptolemy.data.expr.Parameter" value="140">
        </property>
        <property name="Kt" class="ptolemy.data.expr.Parameter" value="Kt_Ra_J*Ra*J">
        </property>
        <property name="volts_batt" class="ptolemy.data.expr.Parameter" value="12.0">
        </property>
        <property name="min_motor_amps" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="max_motor_amps" class="ptolemy.data.expr.Parameter" value="7.4">
        </property>
        <property name="Rc" class="ptolemy.data.expr.Parameter" value="1.5">
        </property>
        <property name="Rbat" class="ptolemy.data.expr.Parameter" value="0.5">
        </property>
        <property name="L" class="ptolemy.data.expr.Parameter" value="1.5e-3">
        </property>
        <property name="C" class="ptolemy.data.expr.Parameter" value="1.5e-3">
        </property>
        <property name="Rtot" class="ptolemy.data.expr.Parameter" value="Rbat+Rc">
        </property>
        <property name="motor_on_Ax_11" class="ptolemy.data.expr.Parameter" value="-1/C/Rtot">
        </property>
        <property name="motor_on_Ax_12" class="ptolemy.data.expr.Parameter" value="-Rbat/C/Rtot">
        </property>
        <property name="motor_on_Ax_21" class="ptolemy.data.expr.Parameter" value="Rbat/L/Rtot">
        </property>
        <property name="motor_on_Ax_22" class="ptolemy.data.expr.Parameter" value="(-Ra-Rbat+Rbat/Rtot)/L">
        </property>
        <property name="motor_on_B_Vbat_1" class="ptolemy.data.expr.Parameter" value="1/C/Rtot">
        </property>
        <property name="motor_on_B_Vbat_2" class="ptolemy.data.expr.Parameter" value="(1-Rbat/Rtot)/L">
        </property>
        <property name="motor_on_B_Vbemf_1" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="motor_on_B_Vbemf_2" class="ptolemy.data.expr.Parameter" value="-1/L">
        </property>
        <property name="motor_off_Ax_11" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="motor_off_Ax_12" class="ptolemy.data.expr.Parameter" value="-1/L">
        </property>
        <property name="motor_off_Ax_21" class="ptolemy.data.expr.Parameter" value="1/L">
        </property>
        <property name="motor_off_Ax_22" class="ptolemy.data.expr.Parameter" value="-(Rc+Ra)/L">
        </property>
        <property name="motor_off_B_Vbemf_1" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="motor_off_B_Vbemf_2" class="ptolemy.data.expr.Parameter" value="-1/L">
        </property>
        <port name="back_emf" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="36.0, 94.0">
            </property>
        </port>
        <port name="pwm_signal" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="56.5, 299.0">
            </property>
        </port>
        <port name="motor_torque" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="684.0, 244.0">
            </property>
        </port>
        <port name="motor_current" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="681.0, 304.0">
            </property>
        </port>
        <entity name="i_dot" class="ptolemy.actor.lib.BooleanSelect">
            <property name="_location" class="ptolemy.kernel.util.Location" value="310.0, 199.5">
            </property>
            <port name="trueInput" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="falseInput" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="control" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="Comparator" class="ptolemy.actor.lib.logic.Comparator">
            <property name="comparison" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                    <property name="gt" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                    </property>
                    <property name="ge" class="ptolemy.kernel.util.StringAttribute" value="&gt;=">
                    </property>
                    <property name="lt" class="ptolemy.kernel.util.StringAttribute" value="&lt;">
                    </property>
                    <property name="le" class="ptolemy.kernel.util.StringAttribute" value="&lt;=">
                    </property>
                    <property name="eq" class="ptolemy.kernel.util.StringAttribute" value="==">
                    </property>
                </property>
            </property>
            <property name="tolerance" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="comparison">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="140.0, 274.5">
            </property>
            <port name="left" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="right" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="pwm on" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="140.0, 38.5">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[747, 626]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[159, 142]">
            </property>
            <port name="back_emf" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="51.0, 44.0">
                </property>
            </port>
            <port name="vc" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="26.0, 176.0">
                </property>
            </port>
            <port name="vc_dot" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="605.5, 214.0">
                </property>
            </port>
            <port name="i_dot" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="601.0, 269.0">
                </property>
            </port>
            <port name="i" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="26.0, 240.0">
                </property>
            </port>
            <entity name="vc" class="ptolemy.actor.lib.AddSubtract">
                <property name="_location" class="ptolemy.kernel.util.Location" value="530.0, 162.5">
                </property>
                <port name="plus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="minus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="emf_1" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="360.0, 54.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="emf_2" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="360.0, 329.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="i" class="ptolemy.actor.lib.AddSubtract">
                <property name="_location" class="ptolemy.kernel.util.Location" value="525.0, 428.0">
                </property>
                <port name="plus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="minus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="volts_batt" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="volts_batt">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="54.5, 109.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="motor_on_B_Vbemf_1" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_on_B_Vbemf_1">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="234.5, 79.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="motor_on_B_Vbemf_2" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_on_B_Vbemf_2">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="235.5, 354.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="bat_1" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="360.0, 119.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="bat_2" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="360.0, 389.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="motor_on_B_Vbat_1" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_on_B_Vbat_1">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="234.5, 144.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="motor_on_B_Vbat_2" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_on_B_Vbat_2">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="240.5, 414.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="Ax_11" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="360.0, 184.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="Ax_12" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="360.0, 249.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="motor_on_Ax_11" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_on_Ax_11">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="239.0, 209.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="motor_on_Ax_12" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_on_Ax_12">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="245.0, 274.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="Ax_22" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="360.0, 509.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="motor_on_Ax_22" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_on_Ax_22">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="250.0, 534.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="motor_on_Ax_21" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_on_Ax_21">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="249.0, 474.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="Ax_21" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="360.0, 449.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <relation name="relation13" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="106.0, 51.0">
                </vertex>
            </relation>
            <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="116.0, 116.0">
                </vertex>
            </relation>
            <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="126.0, 181.0">
                </vertex>
            </relation>
            <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="136.0, 246.0">
                </vertex>
            </relation>
            <relation name="relation16" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation17" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation18" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation19" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation20" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation21" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation22" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation23" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation12" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation15" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation24" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="back_emf" relation="relation4"/>
            <link port="vc" relation="relation11"/>
            <link port="vc_dot" relation="relation13"/>
            <link port="i_dot" relation="relation"/>
            <link port="i" relation="relation14"/>
            <link port="vc.plus" relation="relation16"/>
            <link port="vc.plus" relation="relation17"/>
            <link port="vc.plus" relation="relation18"/>
            <link port="vc.plus" relation="relation19"/>
            <link port="vc.output" relation="relation13"/>
            <link port="emf_1.multiply" relation="relation4"/>
            <link port="emf_1.multiply" relation="relation2"/>
            <link port="emf_1.output" relation="relation16"/>
            <link port="emf_2.multiply" relation="relation4"/>
            <link port="emf_2.multiply" relation="relation8"/>
            <link port="emf_2.output" relation="relation20"/>
            <link port="i.plus" relation="relation20"/>
            <link port="i.plus" relation="relation21"/>
            <link port="i.plus" relation="relation22"/>
            <link port="i.plus" relation="relation23"/>
            <link port="i.output" relation="relation"/>
            <link port="volts_batt.output" relation="relation10"/>
            <link port="motor_on_B_Vbemf_1.output" relation="relation2"/>
            <link port="motor_on_B_Vbemf_2.output" relation="relation8"/>
            <link port="bat_1.multiply" relation="relation10"/>
            <link port="bat_1.multiply" relation="relation3"/>
            <link port="bat_1.output" relation="relation17"/>
            <link port="bat_2.multiply" relation="relation10"/>
            <link port="bat_2.multiply" relation="relation12"/>
            <link port="bat_2.output" relation="relation21"/>
            <link port="motor_on_B_Vbat_1.output" relation="relation3"/>
            <link port="motor_on_B_Vbat_2.output" relation="relation12"/>
            <link port="Ax_11.multiply" relation="relation11"/>
            <link port="Ax_11.multiply" relation="relation6"/>
            <link port="Ax_11.output" relation="relation18"/>
            <link port="Ax_12.multiply" relation="relation14"/>
            <link port="Ax_12.multiply" relation="relation7"/>
            <link port="Ax_12.output" relation="relation19"/>
            <link port="motor_on_Ax_11.output" relation="relation6"/>
            <link port="motor_on_Ax_12.output" relation="relation7"/>
            <link port="Ax_22.multiply" relation="relation14"/>
            <link port="Ax_22.multiply" relation="relation24"/>
            <link port="Ax_22.output" relation="relation23"/>
            <link port="motor_on_Ax_22.output" relation="relation24"/>
            <link port="motor_on_Ax_21.output" relation="relation15"/>
            <link port="Ax_21.multiply" relation="relation11"/>
            <link port="Ax_21.multiply" relation="relation15"/>
            <link port="Ax_21.output" relation="relation22"/>
        </entity>
        <entity name="torque gain" class="ptolemy.actor.lib.Scale">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="Kt">
            </property>
            <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="575.0, 244.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="Limiter" class="ptolemy.actor.lib.Limiter">
            <property name="bottom" class="ptolemy.data.expr.Parameter" value="min_motor_amps">
            </property>
            <property name="top" class="ptolemy.data.expr.Parameter" value="max_motor_amps">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="576.0, 303.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="pwm signal threshold" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="0.5">
            </property>
            <doc>Create a constant sequence</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="79.0, 344.5">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
        </entity>
        <entity name="pwm_off" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="140.0, 139.5">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[747, 626]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[159, 142]">
            </property>
            <port name="vc_dot" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="600.5, 209.0">
                </property>
            </port>
            <port name="i_dot" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="596.0, 264.0">
                </property>
            </port>
            <port name="i" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="46.0, 180.0">
                </property>
            </port>
            <port name="vc" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="46.0, 111.0">
                </property>
            </port>
            <port name="back_emf" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="61.0, 44.0">
                </property>
            </port>
            <entity name="vc" class="ptolemy.actor.lib.AddSubtract">
                <property name="_location" class="ptolemy.kernel.util.Location" value="515.0, 137.5">
                </property>
                <port name="plus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="minus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="emf_1" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="360.0, 54.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="emf_2" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="365.0, 289.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="i" class="ptolemy.actor.lib.AddSubtract">
                <property name="_location" class="ptolemy.kernel.util.Location" value="515.0, 368.0">
                </property>
                <port name="plus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="minus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="motor_off_B_Vbemf_1" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_off_B_Vbemf_1">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="234.5, 79.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="motor_off_B_Vbemf_2" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_off_B_Vbemf_2">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="241.0, 314.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="Ax_11" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="360.0, 124.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="Ax_12" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="365.0, 189.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="motor_off_Ax_11" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_off_Ax_11">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="244.5, 149.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="motor_off_Ax_12" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_off_Ax_12">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="245.5, 214.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="Ax_22" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="365.0, 414.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="motor_off_Ax_22" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_off_Ax_22">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="255.5, 439.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="motor_off_Ax_21" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="motor_off_Ax_21">
                </property>
                <doc>Create a constant sequence</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="254.5, 379.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
            </entity>
            <entity name="Ax_21" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="365.0, 354.5">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <relation name="relation13" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="106.0, 51.0">
                </vertex>
            </relation>
            <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="116.0, 121.0">
                </vertex>
            </relation>
            <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="126.0, 186.0">
                </vertex>
            </relation>
            <relation name="relation16" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation18" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation19" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation20" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation22" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation23" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="vc_dot" relation="relation13"/>
            <link port="i_dot" relation="relation"/>
            <link port="i" relation="relation14"/>
            <link port="vc" relation="relation11"/>
            <link port="back_emf" relation="relation4"/>
            <link port="vc.plus" relation="relation16"/>
            <link port="vc.plus" relation="relation18"/>
            <link port="vc.plus" relation="relation19"/>
            <link port="vc.output" relation="relation13"/>
            <link port="emf_1.multiply" relation="relation4"/>
            <link port="emf_1.multiply" relation="relation2"/>
            <link port="emf_1.output" relation="relation16"/>
            <link port="emf_2.multiply" relation="relation4"/>
            <link port="emf_2.multiply" relation="relation7"/>
            <link port="emf_2.output" relation="relation20"/>
            <link port="i.plus" relation="relation20"/>
            <link port="i.plus" relation="relation22"/>
            <link port="i.plus" relation="relation23"/>
            <link port="i.output" relation="relation"/>
            <link port="motor_off_B_Vbemf_1.output" relation="relation2"/>
            <link port="motor_off_B_Vbemf_2.output" relation="relation7"/>
            <link port="Ax_11.multiply" relation="relation11"/>
            <link port="Ax_11.multiply" relation="relation3"/>
            <link port="Ax_11.output" relation="relation18"/>
            <link port="Ax_12.multiply" relation="relation14"/>
            <link port="Ax_12.multiply" relation="relation6"/>
            <link port="Ax_12.output" relation="relation19"/>
            <link port="motor_off_Ax_11.output" relation="relation3"/>
            <link port="motor_off_Ax_12.output" relation="relation6"/>
            <link port="Ax_22.multiply" relation="relation14"/>
            <link port="Ax_22.multiply" relation="relation9"/>
            <link port="Ax_22.output" relation="relation23"/>
            <link port="motor_off_Ax_22.output" relation="relation9"/>
            <link port="motor_off_Ax_21.output" relation="relation8"/>
            <link port="Ax_21.multiply" relation="relation11"/>
            <link port="Ax_21.multiply" relation="relation8"/>
            <link port="Ax_21.output" relation="relation22"/>
        </entity>
        <entity name="v_dot" class="ptolemy.actor.lib.BooleanSelect">
            <property name="_location" class="ptolemy.kernel.util.Location" value="345.0, 129.5">
            </property>
            <port name="trueInput" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="falseInput" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="control" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="v" class="ptolemy.domains.ct.lib.Integrator">
            <property name="initialState" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="420.0, 132.0">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
        </entity>
        <entity name="i" class="ptolemy.domains.ct.lib.Integrator">
            <property name="initialState" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="420.0, 203.0">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                </property>
            </port>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" class="ptolemy.moml.Vertex" value="76.0, 101.0">
            </vertex>
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" class="ptolemy.moml.Vertex" value="456.0, 91.0">
            </vertex>
        </relation>
        <relation name="relation13" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation21" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" class="ptolemy.moml.Vertex" value="241.0, 281.0">
            </vertex>
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" class="ptolemy.moml.Vertex" value="471.0, 96.0">
            </vertex>
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation11" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation12" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation14" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="back_emf" relation="relation8"/>
        <link port="pwm_signal" relation="relation"/>
        <link port="motor_torque" relation="relation13"/>
        <link port="motor_current" relation="relation21"/>
        <link port="i_dot.trueInput" relation="relation12"/>
        <link port="i_dot.falseInput" relation="relation14"/>
        <link port="i_dot.control" relation="relation3"/>
        <link port="i_dot.output" relation="relation6"/>
        <link port="Comparator.left" relation="relation"/>
        <link port="Comparator.right" relation="relation2"/>
        <link port="Comparator.output" relation="relation3"/>
        <link port="pwm on.back_emf" relation="relation8"/>
        <link port="pwm on.vc" relation="relation9"/>
        <link port="pwm on.vc_dot" relation="relation10"/>
        <link port="pwm on.i_dot" relation="relation12"/>
        <link port="pwm on.i" relation="relation7"/>
        <link port="torque gain.input" relation="relation7"/>
        <link port="torque gain.output" relation="relation13"/>
        <link port="Limiter.input" relation="relation7"/>
        <link port="Limiter.output" relation="relation21"/>
        <link port="pwm signal threshold.output" relation="relation2"/>
        <link port="pwm_off.vc_dot" relation="relation11"/>
        <link port="pwm_off.i_dot" relation="relation14"/>
        <link port="pwm_off.i" relation="relation7"/>
        <link port="pwm_off.vc" relation="relation9"/>
        <link port="pwm_off.back_emf" relation="relation8"/>
        <link port="v_dot.trueInput" relation="relation10"/>
        <link port="v_dot.falseInput" relation="relation11"/>
        <link port="v_dot.control" relation="relation3"/>
        <link port="v_dot.output" relation="relation5"/>
        <link port="v.input" relation="relation5"/>
        <link port="v.output" relation="relation9"/>
        <link port="i.input" relation="relation6"/>
        <link port="i.output" relation="relation7"/>
    </entity>
    <entity name="sensors" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="315.0, 262.5">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[659, 533]">
        </property>
        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[75, 61]">
        </property>
        <property name="accelpos2rads" class="ptolemy.data.expr.Parameter" value="1.0">
        </property>
        <property name="good" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="bad" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <port name="throttle_position" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="64.0, 119.0">
            </property>
        </port>
        <port name="throttle_positions" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="586.0, 224.0">
            </property>
        </port>
        <port name="accelerator_position" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="70.0, 424.0">
            </property>
        </port>
        <port name="desired_throttle_position" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="451.0, 424.0">
            </property>
        </port>
        <port name="powertrain_inputs" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="64.0, 489.0">
            </property>
        </port>
        <entity name="tps1" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="175.0, 64.5">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
            </property>
            <port name="throttle_position" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="84.0, 154.0">
                </property>
            </port>
            <port name="tps_volts" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="447.0, 154.0">
                </property>
            </port>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="throttle_position" relation="relation"/>
            <link port="tps_volts" relation="relation"/>
        </entity>
        <entity name="sensor error 1" class="ptolemy.actor.lib.Uniform">
            <property name="seed" class="ptolemy.data.expr.Parameter" value="0">
            </property>
            <property name="lowerBound" class="ptolemy.data.expr.Parameter" value="-PI">
            </property>
            <property name="upperBound" class="ptolemy.data.expr.Parameter" value="PI">
            </property>
            <doc>Create a sequence of uniformly distributed random numbers</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="179.5, 128.5">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
        </entity>
        <entity name="sensor error 2" class="ptolemy.actor.lib.Uniform">
            <property name="seed" class="ptolemy.data.expr.Parameter" value="1000">
            </property>
            <property name="lowerBound" class="ptolemy.data.expr.Parameter" value="-PI">
            </property>
            <property name="upperBound" class="ptolemy.data.expr.Parameter" value="PI">
            </property>
            <doc>Create a sequence of uniformly distributed random numbers</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="180.5, 298.5">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
        </entity>
        <entity name="LVDT (or potentiometer)" class="ptolemy.actor.lib.Scale">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="accelpos2rads">
            </property>
            <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="210.5, 424.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="sensor_1_working_p" class="ptolemy.actor.lib.BooleanSelect">
            <property name="_location" class="ptolemy.kernel.util.Location" value="414.0, 104.5">
            </property>
            <port name="trueInput" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="falseInput" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="control" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="sensor_2_working_p" class="ptolemy.actor.lib.BooleanSelect">
            <property name="_location" class="ptolemy.kernel.util.Location" value="419.0, 269.5">
            </property>
            <port name="trueInput" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="falseInput" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="control" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <entity name="tps1 status" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="good">
            </property>
            <doc>Create a constant sequence</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="271.0, 189.5">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
        </entity>
        <entity name="tps2 status" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="good">
            </property>
            <doc>Create a constant sequence</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="271.0, 349.5">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
        </entity>
        <entity name="Discard" class="ptolemy.actor.lib.Discard">
            <property name="_location" class="ptolemy.kernel.util.Location" value="170.0, 490.0">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
        </entity>
        <entity name="tps2" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="180.0, 224.5">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
            </property>
            <port name="throttle_position" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="69.0, 149.0">
                </property>
            </port>
            <port name="tps_volts" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="452.0, 149.0">
                </property>
            </port>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="throttle_position" relation="relation"/>
            <link port="tps_volts" relation="relation"/>
        </entity>
        <entity name="throttle_positions" class="ptolemy.actor.lib.VectorAssembler">
            <property name="_location" class="ptolemy.kernel.util.Location" value="530.0, 184.5">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
            </port>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" class="ptolemy.moml.Vertex" value="101.0, 126.0">
            </vertex>
        </relation>
        <relation name="relation12" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation13" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation11" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation14" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation15" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="throttle_position" relation="relation"/>
        <link port="throttle_positions" relation="relation5"/>
        <link port="accelerator_position" relation="relation12"/>
        <link port="desired_throttle_position" relation="relation13"/>
        <link port="powertrain_inputs" relation="relation14"/>
        <link port="tps1.throttle_position" relation="relation"/>
        <link port="tps1.tps_volts" relation="relation8"/>
        <link port="sensor error 1.output" relation="relation9"/>
        <link port="sensor error 2.output" relation="relation7"/>
        <link port="LVDT (or potentiometer).input" relation="relation12"/>
        <link port="LVDT (or potentiometer).output" relation="relation13"/>
        <link port="sensor_1_working_p.trueInput" relation="relation8"/>
        <link port="sensor_1_working_p.falseInput" relation="relation9"/>
        <link port="sensor_1_working_p.control" relation="relation10"/>
        <link port="sensor_1_working_p.output" relation="relation3"/>
        <link port="sensor_2_working_p.trueInput" relation="relation15"/>
        <link port="sensor_2_working_p.falseInput" relation="relation7"/>
        <link port="sensor_2_working_p.control" relation="relation11"/>
        <link port="sensor_2_working_p.output" relation="relation4"/>
        <link port="tps1 status.output" relation="relation10"/>
        <link port="tps2 status.output" relation="relation11"/>
        <link port="Discard.input" relation="relation14"/>
        <link port="tps2.throttle_position" relation="relation"/>
        <link port="tps2.tps_volts" relation="relation15"/>
        <link port="throttle_positions.input" relation="relation3"/>
        <link port="throttle_positions.input" relation="relation4"/>
        <link port="throttle_positions.output" relation="relation5"/>
    </entity>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="456.0, 436.0">
        </vertex>
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="246.0, 231.0">
        </vertex>
    </relation>
    <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="236.0, 221.0">
        </vertex>
    </relation>
    <relation name="relation11" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation12" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="136.0, 421.0">
        </vertex>
    </relation>
    <relation name="relation14" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation15" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation16" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation17" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="throttle.torque" relation="relation11"/>
    <link port="throttle.back_emf" relation="relation10"/>
    <link port="throttle.throttle_position" relation="relation"/>
    <link port="driver inputs.accelerator_position" relation="relation15"/>
    <link port="throttle position.input" relation="relation"/>
    <link port="controller.throttle_positions" relation="relation14"/>
    <link port="controller.desired_throttle_position" relation="relation17"/>
    <link port="controller.current" relation="relation6"/>
    <link port="controller.actual_motor_current" relation="relation12"/>
    <link port="powertrain inputs.powertrain_inputs" relation="relation16"/>
    <link port="actuators.back_emf" relation="relation10"/>
    <link port="actuators.pwm_signal" relation="relation6"/>
    <link port="actuators.motor_torque" relation="relation11"/>
    <link port="actuators.motor_current" relation="relation12"/>
    <link port="sensors.throttle_position" relation="relation"/>
    <link port="sensors.throttle_positions" relation="relation14"/>
    <link port="sensors.accelerator_position" relation="relation15"/>
    <link port="sensors.desired_throttle_position" relation="relation17"/>
    <link port="sensors.powertrain_inputs" relation="relation16"/>
</entity>
