<!-- : $Id$
  @author: Xiaojun Liu and Edward A. Lee
 -->
<html>
<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<title>Hierarchy</title>
<link href="../../../../../doc/default.css" rel="stylesheet" type="text/css">
</head>
<body>
<H1>Hierarchical Giotto Model</H1>
<P>
This example has no interesting functionality,
but carefully illustrates the semantics of Giotto,
and is easy to follow.
It is defined by the following block diagram:
<CENTER>
<P>

<!-- HTML CONVERTER -->
<SCRIPT LANGUAGE="JavaScript"><!--
    var _info = navigator.userAgent; 
    var _ns = false; 
    var _ns6 = false;
    var _ie = (_info.indexOf("MSIE") > 0 && _info.indexOf("Win") > 0 && _info.indexOf("Windows 3.1") < 0);
//--></SCRIPT>
    <COMMENT>
        <SCRIPT LANGUAGE="JavaScript1.1"><!--
        var _ns6 = (_info.indexOf("Mozilla/5") >= 0);
        var _ns = (navigator.appName.indexOf("Netscape") >= 0 && ((_info.indexOf("Win") > 0     && _info.indexOf("Win16") < 0 && java.lang.System.getProperty("os.version").indexOf("3.5") < 0) || (_info.indexOf("Sun") > 0) || (_info.indexOf("Linux") > 0) || (_info.indexOf("AIX") > 0) || (_info.indexOf("OS/2") > 0) || (_info.indexOf("IRIX") > 0 )));
//--></SCRIPT>
    </COMMENT>

<SCRIPT LANGUAGE="JavaScript"><!--
    if (_ie == true) document.writeln('\
        <OBJECT \
            classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" \
            width = "600" \
            height = "550"  \
            codebase="http://java.sun.com/products/plugin/autodl/jinstall-1_4_2-windows-i586.cab#Version=1,4,2"> \
            <PARAM NAME = "code" \
                   VALUE = "ptolemy.vergil.MoMLViewerApplet" > \
	    <PARAM NAME = "codebase"   VALUE = "../../../../.." > \
	    <PARAM NAME = "archive" \
                   VALUE = "ptolemy/ptsupport.jar,lib/diva.jar,ptolemy/vergil/vergilApplet.jar,ptolemy/domains/sdf/sdf.jar" > \
            <PARAM NAME = "type" \
                   VALUE = "application/x-java-applet;version=1.4.2" > \
            <PARAM NAME = "progressbar" VALUE = "true"> \
            <PARAM NAME = "scriptable" VALUE = "false" > \
            <PARAM NAME = "NAME" VALUE = "Hierarchy" > \
	    <PARAM NAME = "background" VALUE = "#ffffff" > \
	    <PARAM NAME = "modelURL" VALUE = "Hierarchy.xml" > \
	    <PARAM NAME = "includeRunPanel" VALUE = "true" > \
            <a href="Hierarchy.xml">MoML specification for this model.</a> \
        </OBJECT> \
        ');
    else if (_ns == true || _ns6 == true)
         document.writeln('\
        <COMMENT> \
          <EMBED \
            type = "application/x-java-applet;version=1.4.2" \
            code = "ptolemy.vergil.MoMLViewerApplet" \
            codebase = "../../../../.." \
            archive = "ptolemy/ptsupport.jar,lib/diva.jar,ptolemy/vergil/vergilApplet.jar,ptolemy/domains/sdf/sdf.jar" \
            width = "600" \
            height = "550" \
            NAME = "Hierarchy" background = "#ffffff" modelURL = "Hierarchy.xml" includeRunPanel = "true"  \
            progressbar = "true" \
            scriptable = "false" \
            pluginspage = "http://java.sun.com/j2se/1.4.2/download.html"> \
              <NOEMBED> \
              <a href="Hierarchy.xml">MoML specification for this model.</a> \
              </NOEMBED> \
           </EMBED> \
        <COMMENT> \
        ');
    else document.writeln('\
        <APPLET \
            code = "ptolemy.vergil.MoMLViewerApplet" \
            codebase = "../../../../.." \
            archive = "ptolemy/ptsupport.jar,lib/diva.jar,ptolemy/vergil/vergilApplet.jar,ptolemy/domains/sdf/sdf.jar" \
            width = "600" \
            height = "550" \
            > \
            <PARAM NAME = "NAME" VALUE = "Hierarchy" > \
	    <PARAM NAME = "background" VALUE = "#ffffff" > \
	    <PARAM NAME = "modelURL" VALUE = "Hierarchy.xml" > \
	    <PARAM NAME = "includeRunPanel" VALUE = "true" > \
            <a href="Hierarchy.xml">MoML specification for this model.</a> \
        </APPLET> \
        ');
//--></SCRIPT>
<!-- /HTML CONVERTER -->
</CENTER>
<P>
The model consists of a constant source that produces the value
1, a pair of composites that function as accumulators, simply
adding the current value to a running  sum, and a plotter.
The source and the upper composite run at frequency 1, meaning
that they get invoked once per iteration.  The lower composite
and the plotter run at frequency 2, meaning that they are invoked
twice per iteration.
<p>
The composites are defined as follows:
<CENTER>
<P>

<!-- HTML CONVERTER -->
<SCRIPT LANGUAGE="JavaScript"><!--
    var _info = navigator.userAgent; 
    var _ns = false; 
    var _ns6 = false;
    var _ie = (_info.indexOf("MSIE") > 0 && _info.indexOf("Win") > 0 && _info.indexOf("Windows 3.1") < 0);
//--></SCRIPT>
    <COMMENT>
        <SCRIPT LANGUAGE="JavaScript1.1"><!--
        var _ns6 = (_info.indexOf("Mozilla/5") >= 0);
        var _ns = (navigator.appName.indexOf("Netscape") >= 0 && ((_info.indexOf("Win") > 0     && _info.indexOf("Win16") < 0 && java.lang.System.getProperty("os.version").indexOf("3.5") < 0) || (_info.indexOf("Sun") > 0) || (_info.indexOf("Linux") > 0) || (_info.indexOf("AIX") > 0) || (_info.indexOf("OS/2") > 0) || (_info.indexOf("IRIX") > 0 )));
//--></SCRIPT>
    </COMMENT>

<SCRIPT LANGUAGE="JavaScript"><!--
    if (_ie == true) document.writeln('\
        <OBJECT \
            classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" \
            width = "600" \
            height = "200"  \
            codebase="http://java.sun.com/products/plugin/autodl/jinstall-1_4_2-windows-i586.cab#Version=1,4,2"> \
            <PARAM NAME = "code" \
                   VALUE = "ptolemy.vergil.MoMLViewerApplet" > \
	    <PARAM NAME = "codebase"   VALUE = "../../../../.." > \
	    <PARAM NAME = "archive" \
                   VALUE = "ptolemy/ptsupport.jar,lib/diva.jar,ptolemy/vergil/vergilApplet.jar,ptolemy/domains/sdf/sdf.jar" > \
            <PARAM NAME = "type" \
                   VALUE = "application/x-java-applet;version=1.4.2" > \
            <PARAM NAME = "progressbar" VALUE = "true"> \
            <PARAM NAME = "scriptable" VALUE = "false" > \
            <PARAM NAME = "NAME" VALUE = "composite" > \
	    <PARAM NAME = "background" VALUE = "#ffffff" > \
	    <PARAM NAME = "modelURL" VALUE = "composite.xml" > \
            <a href="composite.xml">MoML specification for this model.</a> \
        </OBJECT> \
        ');
    else if (_ns == true || _ns6 == true)
         document.writeln('\
        <COMMENT> \
          <EMBED \
            type = "application/x-java-applet;version=1.4.2" \
            code = "ptolemy.vergil.MoMLViewerApplet" \
            codebase = "../../../../.." \
            archive = "ptolemy/ptsupport.jar,lib/diva.jar,ptolemy/vergil/vergilApplet.jar,ptolemy/domains/sdf/sdf.jar" \
            width = "600" \
            height = "200" \
            NAME = "composite" background = "#ffffff" modelURL = "composite.xml"  \
            progressbar = "true" \
            scriptable = "false" \
            pluginspage = "http://java.sun.com/j2se/1.4.2/download.html"> \
              <NOEMBED> \
              <a href="composite.xml">MoML specification for this model.</a> \
              </NOEMBED> \
           </EMBED> \
        <COMMENT> \
        ');
    else document.writeln('\
        <APPLET \
            code = "ptolemy.vergil.MoMLViewerApplet" \
            codebase = "../../../../.." \
            archive = "ptolemy/ptsupport.jar,lib/diva.jar,ptolemy/vergil/vergilApplet.jar,ptolemy/domains/sdf/sdf.jar" \
            width = "600" \
            height = "200" \
            > \
            <PARAM NAME = "NAME" VALUE = "composite" > \
	    <PARAM NAME = "background" VALUE = "#ffffff" > \
	    <PARAM NAME = "modelURL" VALUE = "composite.xml" > \
            <a href="composite.xml">MoML specification for this model.</a> \
        </APPLET> \
        ');
//--></SCRIPT>
<!-- /HTML CONVERTER -->
</CENTER>
<p>
They contain an adder that adds the current input to the
previous output, in a feedback loop.  This illustrates the Giotto
semantic property that on each arc, the output value from the
previous iteration is available.
<p>
The composite has a parameter, <i>internalFrequency</i>, which
sets the frequency of each adder.  The upper composite has this
frequency set to 3, and the lower has it set to 2.  Because of this,
each invocation of the upper composite adds 3 to the running sum,
and each invocation of the bottom composite adds 2 to its running
sum.  The upper composite is invoked half as often as the plotter,
which is why its output values are each plotted twice.
</body>
</html>
