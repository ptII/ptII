<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="Ball Drop v9" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="8.1.devel">
    </property>
    <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="5.0">
        </property>
        <property name="stopWhenQueueIsEmpty" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-40.0, 170.0]">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={83, 13, 1037, 723}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[822, 616]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{307.7845643939394, 412.624053030303}">
    </property>
    <property name="defaultDiscRate" class="ptolemy.data.expr.Parameter" value="8.0 * 2.0 * pi">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-85.0, 220.0]">
        </property>
    </property>
    <property name="maxDiscRate" class="ptolemy.data.expr.Parameter" value="25.0 * 2.0 * pi">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-85.0, 235.0]">
        </property>
    </property>
    <property name="minDiscRate" class="ptolemy.data.expr.Parameter" value="0.001 * 2.0 * pi">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-85.0, 250.0]">
        </property>
    </property>
    <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Simulate a ball dropping towards a rotating disc. The disc has a hole (or door)&#10;that will allow the ball to drop through if the disc is properly aligned at the&#10;time of impact (zero rotation).&#10;&#10;Ball drops are detected by a photosensor, which reports the time at which the&#10;ball was detected, as well as its initial velocity. The controller adjusts the&#10;speed of the disc to ensure the door is directly below the ball at the time of&#10;impact.&#10;&#10;Following the initial ball drop (t=0), the next ball will drop after a small&#10;delay. Between ball drops, the disc should return to its default speed.&#10;&#10;All units used in this model are SI (meters, seconds, radians).">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[185.0, 135.0]">
        </property>
    </property>
    <property name="initialAltitude" class="ptolemy.data.expr.Parameter" value="10.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-85.0, 265.0]">
        </property>
    </property>
    <property name="encoderTicksPerRevolution" class="ptolemy.data.expr.Parameter" value="360.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-85.0, 280.0]">
        </property>
    </property>
    <class name="Ball Kinematics" extends="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-25.0, 630.0]">
        </property>
        <property name="g" class="ptolemy.data.expr.Parameter" value="9.80665">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 10.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1192, 623}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[977, 516]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{616.1006944444443, -40.1199494949495}">
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Simple kinematics model for a dropping ball. Given initial altitude, initial&#10;velocity, and the time at which these values were valid (t0), calculate&#10;the final velocity and time of impact (with respect to global time).&#10;&#10;impactTime = (sqrt(initialVelocity^2 + 2*g*initialAltitude) - initialVelocity) / g&#10;impactVelocity = initialVelocity + g*impactTime&#10;&#10;These equations are effectively calculated by the actor network below.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, -260.0]">
            </property>
        </property>
        <port name="dropEvent" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[55.0, -70.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="impactEvent" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[1035.0, -50.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="MultiplyDivide" class="ptolemy.actor.lib.MultiplyDivide">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[775.0, 10.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </entity>
        <entity name="UnaryMathFunction" class="ptolemy.actor.lib.UnaryMathFunction">
            <property name="function" class="ptolemy.data.expr.StringParameter" value="square">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[375.0, -55.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </entity>
        <entity name="UnaryMathFunction2" class="ptolemy.actor.lib.UnaryMathFunction">
            <property name="function" class="ptolemy.data.expr.StringParameter" value="sqrt">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[560.0, -40.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </entity>
        <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[470.0, -40.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </entity>
        <entity name="AddSubtract2" class="ptolemy.actor.lib.AddSubtract">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 0.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </entity>
        <entity name="AddSubtract3" class="ptolemy.actor.lib.AddSubtract">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[855.0, -65.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </entity>
        <entity name="Const2" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="g">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[725.0, 20.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </entity>
        <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[150.0, -90.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <port name="t0" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="initialVelocity" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="RecordAssembler" class="ptolemy.actor.lib.RecordAssembler">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[985.0, -70.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <port name="impactTime" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="impactVelocity" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="initialAltitude * 2.0 * g">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[340.0, -15.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </entity>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation11" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
            </property>
            <vertex name="vertex1" value="[630.0, -40.0]">
            </vertex>
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
            <vertex name="vertex1" value="[705.0, 0.0]">
            </vertex>
        </relation>
        <relation name="relation12" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation14" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[230.0, -55.0]">
            </vertex>
        </relation>
        <relation name="relation13" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[230.0, 10.0]">
            </vertex>
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="dropEvent" relation="relation3"/>
        <link port="impactEvent" relation="relation14"/>
        <link port="MultiplyDivide.multiply" relation="relation9"/>
        <link port="MultiplyDivide.divide" relation="relation8"/>
        <link port="MultiplyDivide.output" relation="relation10"/>
        <link port="UnaryMathFunction.input" relation="relation2"/>
        <link port="UnaryMathFunction.output" relation="relation4"/>
        <link port="UnaryMathFunction2.input" relation="relation11"/>
        <link port="UnaryMathFunction2.output" relation="relation5"/>
        <link port="AddSubtract.plus" relation="relation4"/>
        <link port="AddSubtract.plus" relation="relation"/>
        <link port="AddSubtract.output" relation="relation11"/>
        <link port="AddSubtract2.plus" relation="relation5"/>
        <link port="AddSubtract2.minus" relation="relation13"/>
        <link port="AddSubtract2.output" relation="relation9"/>
        <link port="AddSubtract3.plus" relation="relation6"/>
        <link port="AddSubtract3.plus" relation="relation10"/>
        <link port="AddSubtract3.output" relation="relation12"/>
        <link port="Const2.output" relation="relation8"/>
        <link port="Const2.trigger" relation="relation9"/>
        <link port="RecordDisassembler.input" relation="relation3"/>
        <link port="RecordDisassembler.t0" relation="relation6"/>
        <link port="RecordDisassembler.initialVelocity" relation="relation2"/>
        <link port="RecordAssembler.output" relation="relation14"/>
        <link port="RecordAssembler.impactTime" relation="relation12"/>
        <link port="RecordAssembler.impactVelocity" relation="relation5"/>
        <link port="Const.output" relation="relation"/>
        <link port="Const.trigger" relation="relation13"/>
        <link relation1="relation2" relation2="relation13"/>
    </class>
    <entity name="Servo Model" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[505.0, 455.0]">
        </property>
        <property name="Continuous Director" class="ptolemy.domains.continuous.kernel.ContinuousDirector">
            <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="stopTime" class="ptolemy.data.expr.Parameter" value="Infinity">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 85.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 182, 1350, 457}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1135, 350]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{510.154356060606, 195.6247632575758}">
        </property>
        <property name="A" class="ptolemy.data.expr.Parameter" value="[ -1.775e4,0,-16.77; 0,0,1 ; 2.30e4,0,0.472]">
        </property>
        <property name="B" class="ptolemy.data.expr.Parameter" value="[92.46 / .039 ; 0 ; 0]">
        </property>
        <property name="C" class="ptolemy.data.expr.Parameter" value="[0,1,0]">
        </property>
        <property name="D" class="ptolemy.data.expr.Parameter" value="[0.0]">
        </property>
        <property name="initialStates" class="ptolemy.data.expr.Parameter" value="[0,0,0]">
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Continuous model of the disc motor response. The actual rate of the motor is&#10;clipped to reflect saturation, and drives a discrete clock (Pulse Generator)&#10;that emits encoder ticks according to the resolution of the servo encoder.&#10;&#10;TODO: Implement an actual IIR controller response.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[105.0, 50.0]">
            </property>
        </property>
        <port name="controlSignal" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-25.0, 195.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="encoderTick" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[975.0, 175.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="Pulse Generator" class="ptolemy.actor.lib.DiscreteClock">
            <property name="period" class="ptolemy.actor.parameters.PortParameter" value="1.0 / (defaultDiscRate * encoderTicksPerRevolution / (2.0 * pi) )">
            </property>
            <doc>Create periodic timed events.</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[895.0, 175.0]">
            </property>
            <port name="period" class="ptolemy.actor.parameters.ParameterPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Rate Bound" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="min({max({desiredRate, minDiscRate}),maxDiscRate})">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[340.0, 195.0]">
            </property>
            <port name="desiredRate" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="false">
                </property>
            </port>
        </entity>
        <entity name="rate to period" class="ptolemy.actor.lib.MultiplyDivide">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[805.0, 185.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
        </entity>
        <entity name="ticks / rad" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="encoderTicksPerRevolution / (2.0 * pi)">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[640.0, 165.0]">
            </property>
        </entity>
        <entity name="Hacked Plant Response" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 195.0]">
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Add some noise (Gaussian), slow the response (MovingAverage),&#10;and attenuate the control signal to force steady-state error.">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 355.0}">
                </property>
            </property>
            <port name="controlSignal" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="false">
                </property>
            </port>
            <port name="actualRate" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 295.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="false">
                </property>
            </port>
            <entity name="MovingAverage" class="ptolemy.actor.lib.MovingAverage">
                <property name="maxPastInputsToAverage" class="ptolemy.data.expr.Parameter" value="100">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[165.0, 200.0]">
                </property>
            </entity>
            <entity name="Scale" class="ptolemy.actor.lib.Scale">
                <property name="factor" class="ptolemy.data.expr.Parameter" value="0.98">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[270.0, 200.0]">
                </property>
            </entity>
            <entity name="Gaussian" class="ptolemy.actor.lib.Gaussian">
                <property name="resetOnEachRun" class="ptolemy.actor.parameters.SharedParameter" value="true">
                </property>
                <property name="mean" class="ptolemy.actor.parameters.PortParameter" value="0.0">
                </property>
                <property name="standardDeviation" class="ptolemy.actor.parameters.PortParameter" value="(maxDiscRate - minDiscRate) / 8000.0">
                </property>
                <doc>Create a sequence of gaussian random variables</doc>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 285.0]">
                </property>
            </entity>
            <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[350.0, 295.0]">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </entity>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="{85.0, 200.0}">
                </vertex>
            </relation>
            <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="controlSignal" relation="relation4"/>
            <link port="actualRate" relation="relation5"/>
            <link port="MovingAverage.input" relation="relation4"/>
            <link port="MovingAverage.output" relation="relation2"/>
            <link port="Scale.input" relation="relation2"/>
            <link port="Scale.output" relation="relation3"/>
            <link port="Gaussian.output" relation="relation"/>
            <link port="Gaussian.trigger" relation="relation4"/>
            <link port="AddSubtract.plus" relation="relation3"/>
            <link port="AddSubtract.plus" relation="relation"/>
            <link port="AddSubtract.output" relation="relation5"/>
        </entity>
        <entity name="Actual Disc Rate" class="ptolemy.actor.lib.gui.TimedPlotter">
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1441, 17, 508, 348}, maximized=false}">
            </property>
            <property name="_plotSize" class="ptolemy.actor.gui.SizeAttribute" value="[500, 300]">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 235.0]">
            </property>
            <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>Actual Disc Rate</title>
<xRange min="0.0067042051" max="4.9997324089"/>
<yRange min="47.122484461680635" max="54.3571100700152"/>
</plot>?>
            </configure>
        </entity>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
            <vertex name="vertex1" value="[520.0, 195.0]">
            </vertex>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="controlSignal" relation="relation"/>
        <link port="encoderTick" relation="relation2"/>
        <link port="Pulse Generator.output" relation="relation2"/>
        <link port="Pulse Generator.period" relation="relation4"/>
        <link port="Rate Bound.output" relation="relation5"/>
        <link port="Rate Bound.desiredRate" relation="relation6"/>
        <link port="rate to period.divide" relation="relation3"/>
        <link port="rate to period.divide" relation="relation5"/>
        <link port="rate to period.output" relation="relation4"/>
        <link port="ticks / rad.output" relation="relation3"/>
        <link port="ticks / rad.trigger" relation="relation5"/>
        <link port="Hacked Plant Response.controlSignal" relation="relation"/>
        <link port="Hacked Plant Response.actualRate" relation="relation6"/>
        <link port="Actual Disc Rate.input" relation="relation5"/>
    </entity>
    <entity name="Control Delay" class="ptolemy.domains.de.lib.TimedDelay">
        <property name="delay" class="ptolemy.data.expr.Parameter" value="1.0 / maxDiscRate">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[355.0, 650.0]">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
        </property>
    </entity>
    <entity name="Drop Sensor" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="{70.0, 445.0}">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={31, 165, 1169, 725}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[954, 618]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{460.4444444444446, -206.7272727272728}">
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Trigger a ball drop sensor event; drop event occurs at time t0 (current time)&#10;and ball has initial velocity determined by a uniform distribution.&#10;&#10;Generate a new ball drop event following the impact of the previous ball.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, -285.0]">
            </property>
        </property>
        <port name="nextDrop" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[570.0, -95.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[55.0, -160.0]">
            </property>
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="dropEvent" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[570.0, -150.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="CurrentTime" class="ptolemy.actor.lib.CurrentTime">
            <doc>Output the current time.</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[180.0, -160.0]">
            </property>
        </entity>
        <entity name="Uniform Velocity" class="ptolemy.actor.lib.Uniform">
            <property name="upperBound" class="ptolemy.actor.parameters.PortParameter" value="5.0">
            </property>
            <doc>Create a sequence of uniformly distributed random numbers</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[195.0, -80.0]">
            </property>
        </entity>
        <entity name="RecordAssembler" class="ptolemy.actor.lib.RecordAssembler">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[330.0, -170.0]">
            </property>
            <port name="t0" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="initialVelocity" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Generate Next Drop" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[450.0, -95.0]">
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={285, 196, 995, 457}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[780, 350]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{700.4870580808083, -17.4992897727273}">
            </property>
            <port name="dropEvent" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[345.0, -65.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="nextDrop" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, -45.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <entity name="Ball Kinematics" class="Ball Kinematics">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{460.0, -65.0}">
                </property>
            </entity>
            <entity name="VariableDelay" class="ptolemy.domains.de.lib.VariableDelay">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[850.0, -45.0]">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="delay" class="ptolemy.actor.parameters.ParameterPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
            </entity>
            <entity name="Const" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <doc>Create a constant sequence.</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[740.0, -55.0]">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </entity>
            <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{555.0, -85.0}">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <port name="impactTime" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="impactVelocity" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
            </entity>
            <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[740.0, 15.0]">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </entity>
            <entity name="Const2" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="1.0">
                </property>
                <doc>Create a constant sequence.</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[630.0, -20.0]">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </entity>
            <entity name="CurrentTime" class="ptolemy.actor.lib.CurrentTime">
                <doc>Output the current time.</doc>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[630.0, 70.0]">
                </property>
            </entity>
            <entity name="Display Events" class="ptolemy.actor.TypedCompositeActor">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[590.0, -150.0]">
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1574, 112, 911, 363}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[781, 625]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{382.4272411616162, -24.0628156565656}">
                </property>
                <port name="dropEvent" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[10.0, -190.0]">
                    </property>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="impactEvent" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[10.0, -115.0]">
                    </property>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <entity name="Display" class="ptolemy.actor.lib.gui.Display">
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1950, 365, 633, 231}, maximized=false}">
                    </property>
                    <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[625, 183]">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[615.0, -175.0]">
                    </property>
                    <port name="input" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{Infinity}">
                        </property>
                    </port>
                </entity>
                <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[510.0, -175.0]">
                    </property>
                    <port name="plus" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="StringConst" class="ptolemy.actor.lib.StringConst">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="t0=">
                    </property>
                    <doc>Create a constant sequence with a string value.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="80">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, -220.0]">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <port name="trigger" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="StringConst2" class="ptolemy.actor.lib.StringConst">
                    <property name="value" class="ptolemy.data.expr.Parameter" value=" v0=">
                    </property>
                    <doc>Create a constant sequence with a string value.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="80">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{245.0, -175.0}">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <port name="trigger" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="StringConst4" class="ptolemy.actor.lib.StringConst">
                    <property name="value" class="ptolemy.data.expr.Parameter" value=" tI=">
                    </property>
                    <doc>Create a constant sequence with a string value.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="80">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, -85.0]">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <port name="trigger" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="StringConst5" class="ptolemy.actor.lib.StringConst">
                    <property name="value" class="ptolemy.data.expr.Parameter" value=" vF=">
                    </property>
                    <doc>Create a constant sequence with a string value.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="80">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[250.0, -135.0]">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <port name="trigger" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[110.0, -210.0]">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <port name="input" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                    <port name="t0" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="initialVelocity" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                </entity>
                <entity name="RecordDisassembler2" class="ptolemy.actor.lib.RecordDisassembler">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, -135.0]">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <port name="input" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                    <port name="impactTime" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="impactVelocity" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" value="[210.0, -200.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" value="[210.0, -150.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" value="[210.0, -60.0]">
                    </vertex>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" value="[210.0, -105.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="dropEvent" relation="relation4"/>
                <link port="impactEvent" relation="relation5"/>
                <link port="Display.input" relation="relation"/>
                <link port="AddSubtract.plus" relation="relation2"/>
                <link port="AddSubtract.plus" relation="relation3"/>
                <link port="AddSubtract.plus" relation="relation6"/>
                <link port="AddSubtract.plus" relation="relation8"/>
                <link port="AddSubtract.plus" relation="relation7"/>
                <link port="AddSubtract.plus" relation="relation14"/>
                <link port="AddSubtract.plus" relation="relation9"/>
                <link port="AddSubtract.plus" relation="relation11"/>
                <link port="AddSubtract.output" relation="relation"/>
                <link port="StringConst.output" relation="relation2"/>
                <link port="StringConst.trigger" relation="relation3"/>
                <link port="StringConst2.output" relation="relation6"/>
                <link port="StringConst2.trigger" relation="relation8"/>
                <link port="StringConst4.output" relation="relation9"/>
                <link port="StringConst4.trigger" relation="relation11"/>
                <link port="StringConst5.output" relation="relation7"/>
                <link port="StringConst5.trigger" relation="relation14"/>
                <link port="RecordDisassembler.input" relation="relation4"/>
                <link port="RecordDisassembler.t0" relation="relation3"/>
                <link port="RecordDisassembler.initialVelocity" relation="relation8"/>
                <link port="RecordDisassembler2.input" relation="relation5"/>
                <link port="RecordDisassembler2.impactTime" relation="relation11"/>
                <link port="RecordDisassembler2.impactVelocity" relation="relation14"/>
            </entity>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="[600.0, 5.0]">
                </vertex>
            </relation>
            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="[520.0, -65.0]">
                </vertex>
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="[395.0, -160.0]">
                </vertex>
            </relation>
            <link port="dropEvent" relation="relation2"/>
            <link port="nextDrop" relation="relation6"/>
            <link port="Ball Kinematics.dropEvent" relation="relation2"/>
            <link port="Ball Kinematics.impactEvent" relation="relation10"/>
            <link port="VariableDelay.input" relation="relation"/>
            <link port="VariableDelay.output" relation="relation6"/>
            <link port="VariableDelay.delay" relation="relation4"/>
            <link port="Const.output" relation="relation"/>
            <link port="Const.trigger" relation="relation3"/>
            <link port="RecordDisassembler.input" relation="relation10"/>
            <link port="RecordDisassembler.impactTime" relation="relation8"/>
            <link port="RecordDisassembler.impactVelocity" relation="relation3"/>
            <link port="AddSubtract.plus" relation="relation7"/>
            <link port="AddSubtract.plus" relation="relation8"/>
            <link port="AddSubtract.minus" relation="relation9"/>
            <link port="AddSubtract.output" relation="relation4"/>
            <link port="Const2.output" relation="relation7"/>
            <link port="Const2.trigger" relation="relation8"/>
            <link port="CurrentTime.output" relation="relation9"/>
            <link port="CurrentTime.trigger" relation="relation8"/>
            <link port="Display Events.dropEvent" relation="relation2"/>
            <link port="Display Events.impactEvent" relation="relation10"/>
        </entity>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
            <vertex name="vertex1" value="[110.0, -160.0]">
            </vertex>
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
            <vertex name="vertex1" value="[365.0, -150.0]">
            </vertex>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="nextDrop" relation="relation3"/>
        <link port="trigger" relation="relation7"/>
        <link port="dropEvent" relation="relation2"/>
        <link port="CurrentTime.output" relation="relation"/>
        <link port="CurrentTime.trigger" relation="relation7"/>
        <link port="Uniform Velocity.output" relation="relation6"/>
        <link port="Uniform Velocity.trigger" relation="relation7"/>
        <link port="RecordAssembler.output" relation="relation2"/>
        <link port="RecordAssembler.t0" relation="relation"/>
        <link port="RecordAssembler.initialVelocity" relation="relation6"/>
        <link port="Generate Next Drop.dropEvent" relation="relation2"/>
        <link port="Generate Next Drop.nextDrop" relation="relation3"/>
    </entity>
    <entity name="SingleEvent" class="ptolemy.domains.de.lib.SingleEvent">
        <property name="_location" class="ptolemy.kernel.util.Location" value="{-60.0, 445.0}">
        </property>
    </entity>
    <entity name="Controller" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="{225.0, 465.0}">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={184, 191, 1143, 595}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[928, 488]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{500.3431186868687, -99.3124210858587}">
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="When a ball drop is detected (an event is present on the dropEvent port), record the initial time&#10;and velocity of the ball and determine when the ball will impact the disc. These values are stored&#10;in registers and used as controller parameters.&#10;&#10;When disc state changes, the servo encoder receives a tick event. These events are frequent and&#10;pseudo-periodic, and are the driving signal of the controller. The Disc Control composite actor&#10;adjusts the servo control signal in order to align the disc door at the time of impact.&#10;&#10;It is important to note that the encoder signal directly sets the controller rate. If a high-&#10;precision controller is used (more ticks per rotation), or the default disc rate is high, then&#10;the controller will operate at a higher frequency.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, -235.0]">
            </property>
        </property>
        <property name="Ptides Basic Director" class="ptolemy.domains.ptides.kernel.PtidesBasicDirector">
            <property name="_location" class="ptolemy.kernel.util.Location" value="{150, -200}">
            </property>
        </property>
        <port name="dropEvent" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[115.0, 15.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="encoderTick" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[115.0, 100.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="controlSignal" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[795.0, 35.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="error" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[600.0, 100.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="Disc Kinematics" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="{460.0, 25.0}">
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={139, 262, 1108, 457}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[893, 268]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{256.4303977272726, 148.3399621212121}">
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="As disc state changes, output the time until impact and the&#10;projected angle of the disc at impact. The desired angle of&#10;the disc is zero degrees.">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-150.0, 0.0]">
                </property>
            </property>
            <port name="timeToImpact" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 100.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="angleError" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 150.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="impactEvent" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-135.0, 110.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="discState" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-135.0, 160.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <entity name="RecordDisassembler2" class="ptolemy.actor.lib.RecordDisassembler">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 90.0]">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="impactTime" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="impactVelocity" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
            </entity>
            <entity name="Time to Impact" class="ptolemy.actor.TypedCompositeActor">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{230.0, 100.0}">
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Return the physical time until impact, or zero if impact has occured.">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{45.0, 125.0}">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={312, 196, 815, 507}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{300.0, 200.0}">
                </property>
                <port name="impactTime" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                    </property>
                </port>
                <port name="timeToImpact" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[530.5, 200.0]">
                    </property>
                </port>
                <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[315.5, 210.0]">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <port name="plus" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                    <port name="minus" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="Maximum" class="ptolemy.actor.lib.Maximum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[455.5, 210.0]">
                    </property>
                    <port name="input" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0, 0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[385.5, 190.0]">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <port name="trigger" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="SimulatedPhysicalTime" class="ptolemy.domains.ptides.lib.SimulatedPhysicalTime">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[160.0, 255.0]">
                    </property>
                    <port name="trigger" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" value="[110.0, 200.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                    </property>
                    <vertex name="vertex1" value="[355.5, 210.0]">
                    </vertex>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="impactTime" relation="relation"/>
                <link port="timeToImpact" relation="relation4"/>
                <link port="AddSubtract.plus" relation="relation"/>
                <link port="AddSubtract.minus" relation="relation3"/>
                <link port="AddSubtract.output" relation="relation5"/>
                <link port="Maximum.input" relation="relation2"/>
                <link port="Maximum.input" relation="relation5"/>
                <link port="Maximum.maximumValue" relation="relation4"/>
                <link port="Const.output" relation="relation2"/>
                <link port="Const.trigger" relation="relation5"/>
                <link port="SimulatedPhysicalTime.output" relation="relation3"/>
                <link port="SimulatedPhysicalTime.trigger" relation="relation"/>
            </entity>
            <entity name="Angle at Impact" class="ptolemy.actor.TypedCompositeActor">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{415.0, 150.0}">
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={248, 241, 1032, 472}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[817, 365]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{393.4867424242424, 303.9933712121212}">
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Given the current disc state (position &amp; rate), determine the angle of the&#10;disc at the time of impact. If an impact has already occured, return zero.">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 145.0]">
                    </property>
                </property>
                <port name="timeToImpact" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 355.0]">
                    </property>
                </port>
                <port name="discState" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 230.0]">
                    </property>
                </port>
                <port name="angleAtImpact" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[690.0, 355.0]">
                    </property>
                </port>
                <entity name="MultiplyDivide" class="ptolemy.actor.lib.MultiplyDivide">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[200.0, 265.0]">
                    </property>
                    <port name="multiply" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0, 0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[100.0, 210.0]">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <port name="input" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                    <port name="discAngle" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="discRate" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                </entity>
                <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{330.0, 275.0}">
                    </property>
                    <port name="plus" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0, 0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="Remainder" class="ptolemy.actor.lib.Remainder">
                    <property name="divisor" class="ptolemy.data.expr.Parameter" value="2.0*pi">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 275.0]">
                    </property>
                    <port name="input" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="Comparator" class="ptolemy.actor.lib.logic.Comparator">
                    <property name="comparison" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                        <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                            <property name="gt" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                            </property>
                            <property name="ge" class="ptolemy.kernel.util.StringAttribute" value="&gt;=">
                            </property>
                            <property name="lt" class="ptolemy.kernel.util.StringAttribute" value="&lt;">
                            </property>
                            <property name="le" class="ptolemy.kernel.util.StringAttribute" value="&lt;=">
                            </property>
                            <property name="eq" class="ptolemy.kernel.util.StringAttribute" value="==">
                            </property>
                        </property>
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="comparison">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[215.0, 365.0]">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <port name="left" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                    <port name="right" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 415.0]">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <port name="trigger" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="multiport"/>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                </entity>
                <entity name="BooleanMultiplexor" class="ptolemy.actor.lib.BooleanMultiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[585.0, 355.0]">
                    </property>
                    <port name="trueInput" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                    <port name="falseInput" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                    <port name="select" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                        <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                        </property>
                    </port>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" value="[280.0, 220.0]">
                    </vertex>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                    </property>
                    <vertex name="vertex1" value="[95.0, 355.0]">
                    </vertex>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                    <vertex name="vertex1" value="[170.0, 415.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="timeToImpact" relation="relation9"/>
                <link port="discState" relation="relation"/>
                <link port="angleAtImpact" relation="relation8"/>
                <link port="MultiplyDivide.multiply" relation="relation2"/>
                <link port="MultiplyDivide.multiply" relation="relation9"/>
                <link port="MultiplyDivide.output" relation="relation4"/>
                <link port="RecordDisassembler.input" relation="relation"/>
                <link port="RecordDisassembler.discAngle" relation="relation7"/>
                <link port="RecordDisassembler.discRate" relation="relation2"/>
                <link port="AddSubtract.plus" relation="relation7"/>
                <link port="AddSubtract.plus" relation="relation4"/>
                <link port="AddSubtract.output" relation="relation3"/>
                <link port="Remainder.input" relation="relation3"/>
                <link port="Remainder.output" relation="relation5"/>
                <link port="Comparator.left" relation="relation9"/>
                <link port="Comparator.right" relation="relation10"/>
                <link port="Comparator.output" relation="relation6"/>
                <link port="Const.output" relation="relation10"/>
                <link port="Const.trigger" relation="relation9"/>
                <link port="BooleanMultiplexor.trueInput" relation="relation5"/>
                <link port="BooleanMultiplexor.falseInput" relation="relation10"/>
                <link port="BooleanMultiplexor.select" relation="relation6"/>
                <link port="BooleanMultiplexor.output" relation="relation8"/>
            </entity>
            <entity name="Register" class="ptolemy.domains.de.lib.Register">
                <property name="initialValue" class="ptolemy.data.expr.Parameter" value="{impactTime=0.0, impactVelocity=0.0}">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-20.0, 110.0]">
                </property>
                <property name="_highlightColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 1.0, 1.0, 1.0}">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[-35.0, 160.0]">
                </vertex>
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="[345.0, 100.0]">
                </vertex>
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="timeToImpact" relation="relation4"/>
            <link port="angleError" relation="relation2"/>
            <link port="impactEvent" relation="relation3"/>
            <link port="discState" relation="relation7"/>
            <link port="RecordDisassembler2.input" relation="relation5"/>
            <link port="RecordDisassembler2.impactTime" relation="relation"/>
            <link port="Time to Impact.impactTime" relation="relation"/>
            <link port="Time to Impact.timeToImpact" relation="relation4"/>
            <link port="Angle at Impact.timeToImpact" relation="relation4"/>
            <link port="Angle at Impact.discState" relation="relation7"/>
            <link port="Angle at Impact.angleAtImpact" relation="relation2"/>
            <link port="Register.input" relation="relation3"/>
            <link port="Register.output" relation="relation5"/>
            <link port="Register.trigger" relation="relation7"/>
        </entity>
        <entity name="Servo Sensor" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="{270.0, 100.0}">
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={194, 35, 1055, 457}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[840, 316]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{480.5994318181818, 158.8923611111111}">
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Convert the servo encoder signal into the absolute disc rate&#10;and angle. Each tick event corresponds to a fractional degree&#10;of rotation; the time delay between these ticks is inversely&#10;proportional to the rate.">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 35.0]">
                </property>
            </property>
            <port name="encoderTick" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[90.0, 190.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="discState" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[850.0, 190.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <entity name="TimeGap" class="ptolemy.domains.de.lib.TimeGap">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[185.0, 190.0]">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="MultiplyDivide" class="ptolemy.actor.lib.MultiplyDivide">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[545.0, 180.0]">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="Integrator" class="ptolemy.actor.lib.Accumulator">
                <property name="init" class="ptolemy.data.expr.Parameter" value="0">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[565.0, 255.0]">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="RecordAssembler" class="ptolemy.actor.lib.RecordAssembler">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[730.0, 170.0]">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <port name="discRate" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="discAngle" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="Remainder" class="ptolemy.actor.lib.Remainder">
                <property name="divisor" class="ptolemy.data.expr.Parameter" value="2.0 * pi">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[655.0, 255.0]">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="rad / tick" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="2.0 * pi / encoderTicksPerRevolution">
                </property>
                <doc>Create a constant sequence.</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[365.0, 170.0]">
                </property>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                    </property>
                </property>
                <vertex name="vertex1" value="[245.0, 190.0]">
                </vertex>
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="[490.0, 170.0]">
                </vertex>
            </relation>
            <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="encoderTick" relation="relation3"/>
            <link port="discState" relation="relation8"/>
            <link port="TimeGap.input" relation="relation3"/>
            <link port="TimeGap.output" relation="relation7"/>
            <link port="MultiplyDivide.multiply" relation="relation"/>
            <link port="MultiplyDivide.divide" relation="relation7"/>
            <link port="MultiplyDivide.output" relation="relation5"/>
            <link port="Integrator.input" relation="relation"/>
            <link port="Integrator.output" relation="relation2"/>
            <link port="RecordAssembler.output" relation="relation8"/>
            <link port="RecordAssembler.discRate" relation="relation5"/>
            <link port="RecordAssembler.discAngle" relation="relation4"/>
            <link port="Remainder.input" relation="relation2"/>
            <link port="Remainder.output" relation="relation4"/>
            <link port="rad / tick.output" relation="relation"/>
            <link port="rad / tick.trigger" relation="relation7"/>
        </entity>
        <entity name="Disc Control" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="{655.0, 35.0}">
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Simple proportional-integral (PI) control for the disc. Given the&#10;projected error in disc alignment, adjust the rate of the disc&#10;based on the current (proportional) and accumulated (integral)&#10;errors. As the controller adjusts the rate, the error should&#10;converge to zero.&#10;&#10;If an impact has occured and no ball is in the air, (timeToImpact&#10;is less than or equal to zero), then output the default rate.&#10;This will also reset the integral controller for the next drop&#10;event.">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[10.0, 10.0]">
                </property>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={102, 20, 1057, 657}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[842, 550]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{322.2843276515152, 383.1273674242424}">
            </property>
            <port name="controlSignal" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[560.0, 310.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="timeToImpact" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, 505.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="angleError" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{30.0, 310.0}">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="discState" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{30.0, 240.0}">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{130.0, 220.0}">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="discAngle" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="discRate" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
            </entity>
            <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[330.0, 260.0]">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <port name="plus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="minus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0, 0.0}">
                    </property>
                </port>
            </entity>
            <entity name="Default Rate" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="defaultDiscRate">
                </property>
                <doc>Create a constant sequence.</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[180.0, 470.0]">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="Comparator" class="ptolemy.actor.lib.logic.Comparator">
                <property name="comparison" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                    <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                        <property name="gt" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                        </property>
                        <property name="ge" class="ptolemy.kernel.util.StringAttribute" value="&gt;=">
                        </property>
                        <property name="lt" class="ptolemy.kernel.util.StringAttribute" value="&lt;">
                        </property>
                        <property name="le" class="ptolemy.kernel.util.StringAttribute" value="&lt;=">
                        </property>
                        <property name="eq" class="ptolemy.kernel.util.StringAttribute" value="==">
                        </property>
                    </property>
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="comparison">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 515.0]">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <port name="left" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="right" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="Const" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="0.0">
                </property>
                <doc>Create a constant sequence.</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 525.0]">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="BooleanMultiplexor" class="ptolemy.actor.lib.BooleanMultiplexor">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[460.0, 310.0]">
                </property>
                <port name="trueInput" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="falseInput" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="select" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="Kp" class="ptolemy.actor.lib.Scale">
                <property name="factor" class="ptolemy.data.expr.Parameter" value="0.5">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[155.0, 310.0]">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="Accumulator" class="ptolemy.actor.lib.Accumulator">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[155.0, 380.0]">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="reset" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="Ki" class="ptolemy.actor.lib.Scale">
                <property name="factor" class="ptolemy.data.expr.Parameter" value=".003">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{250.0, 380.0}">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="LogicalNot" class="ptolemy.actor.lib.logic.LogicalNot">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 435.0]">
                </property>
                <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="[100.0, 505.0]">
                </vertex>
            </relation>
            <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation10" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation11" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="[345.0, 435.0]">
                </vertex>
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="[85.0, 310.0]">
                </vertex>
            </relation>
            <relation name="relation12" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="controlSignal" relation="relation10"/>
            <link port="timeToImpact" relation="relation8"/>
            <link port="angleError" relation="relation13"/>
            <link port="discState" relation="relation"/>
            <link port="RecordDisassembler.input" relation="relation"/>
            <link port="RecordDisassembler.discRate" relation="relation2"/>
            <link port="AddSubtract.plus" relation="relation2"/>
            <link port="AddSubtract.minus" relation="relation11"/>
            <link port="AddSubtract.minus" relation="relation9"/>
            <link port="AddSubtract.output" relation="relation5"/>
            <link port="Default Rate.output" relation="relation7"/>
            <link port="Default Rate.trigger" relation="relation8"/>
            <link port="Comparator.left" relation="relation8"/>
            <link port="Comparator.right" relation="relation6"/>
            <link port="Comparator.output" relation="relation4"/>
            <link port="Const.output" relation="relation6"/>
            <link port="Const.trigger" relation="relation8"/>
            <link port="BooleanMultiplexor.trueInput" relation="relation5"/>
            <link port="BooleanMultiplexor.falseInput" relation="relation7"/>
            <link port="BooleanMultiplexor.select" relation="relation4"/>
            <link port="BooleanMultiplexor.output" relation="relation10"/>
            <link port="Kp.input" relation="relation13"/>
            <link port="Kp.output" relation="relation11"/>
            <link port="Accumulator.input" relation="relation13"/>
            <link port="Accumulator.output" relation="relation3"/>
            <link port="Accumulator.reset" relation="relation12"/>
            <link port="Ki.input" relation="relation3"/>
            <link port="Ki.output" relation="relation9"/>
            <link port="LogicalNot.input" relation="relation4"/>
            <link port="LogicalNot.output" relation="relation12"/>
        </entity>
        <entity name="Ball Kinematics" class="Ball Kinematics">
            <property name="_location" class="ptolemy.kernel.util.Location" value="{270.0, 15.0}">
            </property>
            <entity name="MultiplyDivide" class="ptolemy.actor.lib.MultiplyDivide">
                <port name="multiply" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="divide" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="UnaryMathFunction" class="ptolemy.actor.lib.UnaryMathFunction">
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="UnaryMathFunction2" class="ptolemy.actor.lib.UnaryMathFunction">
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                <port name="plus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0, 0.0}">
                    </property>
                </port>
            </entity>
            <entity name="AddSubtract2" class="ptolemy.actor.lib.AddSubtract">
                <port name="plus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="minus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="AddSubtract3" class="ptolemy.actor.lib.AddSubtract">
                <port name="plus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0, 0.0}">
                    </property>
                </port>
            </entity>
            <entity name="Const2" class="ptolemy.actor.lib.Const">
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                    </property>
                </property>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="RecordAssembler" class="ptolemy.actor.lib.RecordAssembler">
                <port name="impactTime" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
                <port name="impactVelocity" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
            <entity name="Const" class="ptolemy.actor.lib.Const">
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="minDelay" class="ptolemy.data.expr.Parameter" value="{0.0}">
                    </property>
                </port>
            </entity>
        </entity>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
            <vertex name="vertex1" value="{370.0, 100.0}">
            </vertex>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
            <vertex name="vertex1" value="[560.0, 35.0]">
            </vertex>
        </relation>
        <link port="dropEvent" relation="relation2"/>
        <link port="encoderTick" relation="relation10"/>
        <link port="controlSignal" relation="relation5"/>
        <link port="error" relation="relation6"/>
        <link port="Disc Kinematics.timeToImpact" relation="relation4"/>
        <link port="Disc Kinematics.angleError" relation="relation6"/>
        <link port="Disc Kinematics.impactEvent" relation="relation3"/>
        <link port="Disc Kinematics.discState" relation="relation7"/>
        <link port="Servo Sensor.encoderTick" relation="relation10"/>
        <link port="Servo Sensor.discState" relation="relation7"/>
        <link port="Disc Control.controlSignal" relation="relation5"/>
        <link port="Disc Control.timeToImpact" relation="relation4"/>
        <link port="Disc Control.angleError" relation="relation6"/>
        <link port="Disc Control.discState" relation="relation7"/>
        <link port="Ball Kinematics.dropEvent" relation="relation2"/>
        <link port="Ball Kinematics.impactEvent" relation="relation3"/>
    </entity>
    <entity name="Control Signal" class="ptolemy.actor.lib.gui.TimedScope">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1441, 364, 495, 320}, maximized=false}">
        </property>
        <property name="_plotSize" class="ptolemy.actor.gui.SizeAttribute" value="[487, 272]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[420.0, 575.0]">
        </property>
        <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>Control Signal</title>
<xRange min="0.0067042051" max="4.9997324089"/>
<yRange min="48.04948483961992" max="55.45140638085831"/>
<wrap/>
<default marks="pixels"/>
</plot>?>
        </configure>
    </entity>
    <entity name="Disc Angle Error" class="ptolemy.actor.lib.gui.TimedPlotter">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1949, 19, 508, 348}, maximized=false}">
        </property>
        <property name="_plotSize" class="ptolemy.actor.gui.SizeAttribute" value="[500, 300]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[305.0, 575.0]">
        </property>
        <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>Disc Angle Error</title>
<xRange min="0.0067042051" max="4.9997324089"/>
<yRange min="-2.300266230655218" max="0.9268898628284461"/>
</plot>?>
        </configure>
    </entity>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="{145.0, 390.0}">
        </vertex>
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[25.0, 390.0]">
        </vertex>
    </relation>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[390.0, 455.0]">
        </vertex>
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="Servo Model.controlSignal" relation="relation8"/>
    <link port="Servo Model.encoderTick" relation="relation3"/>
    <link port="Control Delay.input" relation="relation3"/>
    <link port="Control Delay.output" relation="relation2"/>
    <link port="Drop Sensor.nextDrop" relation="relation5"/>
    <link port="Drop Sensor.trigger" relation="relation7"/>
    <link port="Drop Sensor.trigger" relation="relation6"/>
    <link port="Drop Sensor.dropEvent" relation="relation"/>
    <link port="SingleEvent.output" relation="relation6"/>
    <link port="Controller.dropEvent" relation="relation"/>
    <link port="Controller.encoderTick" relation="relation2"/>
    <link port="Controller.controlSignal" relation="relation8"/>
    <link port="Controller.error" relation="relation4"/>
    <link port="Control Signal.input" relation="relation8"/>
    <link port="Disc Angle Error.input" relation="relation4"/>
    <link relation1="relation5" relation2="relation7"/>
</entity>
