<!-- $Id$ -->
<html>
<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<title>CT & FSM domain demo -  Thermostat System</title>
<link href="../../../../../doc/default.css" rel="stylesheet" type="text/css">
</head>
<body>
<H1>CT & FSM domain demo -  Thermostat System</h1>
<P>
 <!-- All of the controls of the applet should be visible when the
applet is displayed on a XGA screen-->
<center>

<!-- The HTML below is for the Java Plugin.  The first
     section is for IE, the second is for Netscape
 -->
<!-- HTML CONVERTER -->
<SCRIPT LANGUAGE="JavaScript"><!--
    var _info = navigator.userAgent; 
    var _ns = false; 
    var _ns6 = false;
    var _ie = (_info.indexOf("MSIE") > 0 && _info.indexOf("Win") > 0 && _info.indexOf("Windows 3.1") < 0);
//--></SCRIPT>
    <COMMENT>
        <SCRIPT LANGUAGE="JavaScript1.1"><!--
        var _ns6 = (_info.indexOf("Mozilla/5") >= 0);
        var _ns = (navigator.appName.indexOf("Netscape") >= 0 && ((_info.indexOf("Win") > 0     && _info.indexOf("Win16") < 0 && java.lang.System.getProperty("os.version").indexOf("3.5") < 0) || (_info.indexOf("Sun") > 0) || (_info.indexOf("Linux") > 0) || (_info.indexOf("AIX") > 0) || (_info.indexOf("OS/2") > 0) || (_info.indexOf("IRIX") > 0 )));
//--></SCRIPT>
    </COMMENT>

<SCRIPT LANGUAGE="JavaScript"><!--
    if (_ie == true) document.writeln('\
        <OBJECT \
            classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" \
            width = "600" \
            height = "400"  \
            codebase="http://java.sun.com/products/plugin/autodl/jinstall-1_4_2-windows-i586.cab#Version=1,4,2"> \
            <PARAM NAME = "code" \
                   VALUE = "ptolemy.actor.gui.MoMLApplet" > \
	    <PARAM NAME = "codebase"   VALUE = "../../../../.." > \
	    <PARAM NAME = "archive" \
                   VALUE = "ptolemy/ptsupport.jar,lib/diva.jar,ptolemy/domains/ct/ct.jar,ptolemy/domains/fsm/fsm.jar,ptolemy/domains/ct/demo/Thermostat/Thermostat.jar" > \
            <PARAM NAME = "type" \
                   VALUE = "application/x-java-applet;version=1.4.2" > \
            <PARAM NAME = "progressbar" VALUE = "true"> \
            <PARAM NAME = "scriptable" VALUE = "false" > \
            <PARAM NAME = "background" VALUE = "#ffffff" > \
	    <PARAM NAME = "model" VALUE = "Thermostat.xml"> \
	    <PARAM NAME = "controls" VALUE = "buttons" > \
	    <PARAM NAME = "name" VALUE = "LorenzApplet" > \
            <a href="Thermostat.xml">MoML specification for this model.</a> \
        </OBJECT> \
        ');
    else if (_ns == true || _ns6 == true)
         document.writeln('\
        <COMMENT> \
          <EMBED \
            type = "application/x-java-applet;version=1.4.2" \
            code = "ptolemy.actor.gui.MoMLApplet" \
            codebase = "../../../../.." \
            archive = "ptolemy/ptsupport.jar,lib/diva.jar,ptolemy/domains/ct/ct.jar,ptolemy/domains/fsm/fsm.jar,ptolemy/domains/ct/demo/Thermostat/Thermostat.jar" \
            width = "600" \
            height = "400" \
            background = "#ffffff" model = "Thermostat.xml" controls = "buttons" name = "LorenzApplet"  \
            progressbar = "true" \
            scriptable = "false" \
            pluginspage = "http://java.sun.com/j2se/1.4.2/download.html"> \
              <NOEMBED> \
              <a href="Thermostat.xml">MoML specification for this model.</a> \
              </NOEMBED> \
           </EMBED> \
        <COMMENT> \
        ');
    else document.writeln('\
        <APPLET \
            code = "ptolemy.actor.gui.MoMLApplet" \
            codebase = "../../../../.." \
            archive = "ptolemy/ptsupport.jar,lib/diva.jar,ptolemy/domains/ct/ct.jar,ptolemy/domains/fsm/fsm.jar,ptolemy/domains/ct/demo/Thermostat/Thermostat.jar" \
            width = "600" \
            height = "400" \
            > \
            <PARAM NAME = "background" VALUE = "#ffffff" > \
	    <PARAM NAME = "model" VALUE = "Thermostat.xml"> \
	    <PARAM NAME = "controls" VALUE = "buttons" > \
	    <PARAM NAME = "name" VALUE = "LorenzApplet" > \
            <a href="Thermostat.xml">MoML specification for this model.</a> \
        </APPLET> \
        ');
//--></SCRIPT>
<!-- /HTML CONVERTER -->
</center>

<H2>Introduction</H2>
This applet shows a simple thermostat system, a classic (albeit
slightly silly) hybrid system example. The temperature of the room
is controlled between 0 and 0.2
<p>
The system has two states, heating and cooling, as shown in the figure
below.  In the heating state, the temperature of the room is increased
linearly,
<pre>
<code>    dx/dt = 1</code>
</pre>
where <code>x</code> is temperature.
In the cooling state, the temperature is dropped linearly, i.e.
<pre>
<code>    dx/dt = -1</code>
</pre>
The control rule is that if the temperature reaches 0.2 degree, then switch
the controller to the cooling state; if the temperature decreases to 0 degree
then switch the controller to the heating state.
We use this example to illustrate the accuracy of detecting events, and the
ability to simulate hybrid systems in Ptolemy II.  In particular, the
time at which the temperature thresholds are detected is precise,
irrespective of the underlying simulation sample rate.
The simulator will iterate if necessary, and backtrack if necessary,
to accurately determine the time at which events occur.
<p>
<CENTER><img src="Thermostat.gif"></CENTER>
<P>
</BODY>
</HTML>
