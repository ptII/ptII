<html>
<head>
<title>Demonstrations for JNI interface</title>
</head>
<body>
<h1>Demonstrations for JNI interface</h1>

<center>
<table border="1">
 <tr><td><b>NOTE: THE JNI UI IS BROKEN</b>
    <br>The steps below worked when we last checked, but the JNI UI has bugs.
  </td></tr>
</table>
</center>
See <a href="../../package.html"><code>$PTII/jni/package.html</code></a>
for limitations and other details.
<br>See <a href="../../doc/JNIActorHelp.pdf#in_browser"><code>$PTII/jni/doc/JNIActorHep.pdf</code></a> for further documentation.

<p>To run the JNI demos:
<ol>
<li> run <code>make all</code>
<br>which will create the shared libraries
<li> run <code>make demo</code>
<br>which will start up Vergil with the proper classpath and path
<br>Note that under Windows with Cygwin, JNI requires that java be started from th <code>launcher.exe</code> program.  Thus, running the JNI demos from
Eclipse probably won't work
<li> Go to the <a href="meaningOfLife.xml"><code>meaningLife.xml</code></a> -
  Simple model that answers the question to 
  "the meaning of life, the universe, and everything", see
  <a href="meaningOfLife.c"><code>meaningOfLife.c</code></a>  

<li> <b>BUG</b>: The user interface is broken, so for each actor
you must configure the arguments.  To do this, double click
on the JNI actor, select "Configure", then "Configure Arguments", click
the "Add" button and add the appropriate arguments.
<br>Note that you may get NameDuplication error messages,
which can be ignored.  Set the arguments:

  <dl>
  <dt>Name:
  <dd><code>output</code>
  <dt>C or C++ Type:
  <dd><code>double</code>
  <dt>Kind:
  <dd><code>return</code>
  </dl>   
Then click "Commit"
<li> Double click on the blue JNICodeGenerator icon
<br>which will bring up the JNI Code Generator UI.
<li>Click on "Generate", which will create the interface code in the
<a href="jni"><code>jni</code></a> directory
and compile it. 
<br>If you have problems compiling, see the
<a href="../../../doc/codeDoc/jni/JNIUtilities.html">JNIUtilities documentation</a> for suggestions.
<li>Close the JNI Code Generator by hitting the red x in the upper right.

<li> Click Run.  You should see the answer: <code>42.0</code>.
<br> Note that because of a bug that deletes all the relations,
the easiest thing to do is to exit vergil and 
restart using <code>make demo</code>.  
<br>An alternative is 
to close and reopen each model.
<br>Another alternative is to redraw the connections
from the JNI actor to the other actors.  To do this,
select each connection from the JNI actor, delete it
(you may see an exception, if so, click ok) and redraw
the connection.

</ol>

<h3>Description of the other models</h3>
  <ul>
  <li> <a href="testDeux.xml"><code>testDeux.xml</code></a> -
  Interface to a function that takes an int and a float and
  returns a double.  The float is both an input and an output
  <a href="testDeux.c"><code>testDeux.c</code></a>
  <br>PROBLEM: The user interface allows the user to add one argument,
  but not two. 
  <li> <a href="testTrois.xml"><code>testQuatre.xml</code></a> -
  Interface to a function that takes two arrays of longs.
  The second argument is both an input and an output.
  <a href="testTrois.c"><code>testTrois.c</code></a>
  <li> <a href="testQuatre.xml"><code>testQuatre.xml</code></a> -
  Uses testDeux and testTrois.
  </ul>


<h3>Resources</h3>
<ul>
<li><a href="../../../doc/codeDoc/jni/JNIUtilities.html">JNIUtilities documentation</a>
<li><a href="../../../doc/codeDoc/jni/GenericJNIActor.html">GenericJNIActor documentation</a>
</ul>

</body>
</html>
