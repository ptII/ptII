<!-- $Id$ -->
<html>
<head>
<title>jni</title>
</head>
<body>
An interface between native C code and Ptolemy.

<p>This package provides a draft implementation of a way to create
actors that call native C code.  In Java, the Java Native Interface
(JNI) is used to interface with C code.  This package and subpackages
provide glue code that make it easier to create actors that call C
functions.

<p>Under Windows, JNI has problems with recent versions of Cygwin
and GCC after gcc3.2.x.  One workaround is to use Microsoft Visual C.
Another workaround is to invoke Ptolemy by using
the launcher program written in C, which is found at
$PTII/jni/launcher.

<p>The launcher program is from 
<a href="http://elliotth.blogspot.com/2005/08/porting-jni-code-to-win32-with-cygwin.html#in_browser">http://elliotth.blogspot.com/2005/08/porting-jni-code-to-win32-with-cygwin.html</a>

<p>The .cpp and .h files in the launcher directory are from salma-hayek, found at
<a href="http://software.jessies.org/terminator/#in_browser">http://software.jessies.org/terminator/</a>
salma-hayek is LGPL'd, see the COPYING.txt file.

<p>If you invoke <code>$PTII/bin/vergil -jni</code>, then the launcher
program will be invoked for you.  If you do not use the launcher program
under Windows with Cygwin, the Ptolemy is likely to exit when you run
a model that tries to load a JNI shared object.
 
<p>Another alternative is to install the version of Cygwin
that shipped with Ptolemy II 4.0, see
<a href="http://ptolemy.eecs.berkeley.edu/ptolemyII/ptII4.0/cygwin.htm">http://ptolemy.eecs.berkeley.edu/ptolemyII/ptII4.0/cygwin.htm</a>

<p>The Interface to C actors using the Java Native Interface is not
available via the Windows Installer (or Web Start). To use the
JNI/Ptolemy II interface, you must download Ptolemy II as source files
and compile.

<p>To build under Windows, you may need to edit <code>jni_md.h</code>,
see
<a href="JNIUtilities.html">JNIUtilities.html (javadoc, if present)</a>
or
<a href="JNIUtilities.java">JNIUtilities.java (source, if present)</a>.

<p>Under Windows with Cygwin, you may need to create 
<code>/usr/bin/gmake</code>:
<pre>
cp /usr/bin/make /usr/bin/gmake
</pre>

<p> A demo can be found in 
<code>$PTII/jni/demo/jni</code>
See the <code>README.html</code> file in that directory.  To run
the demo, you should start vergil in that directory.

<p> JNI will not work with Hierarchical classes, subclasses, and inner
classes. 

<menu>
<li> <a
href="http://www-128.ibm.com/developerworks/java/library/j-jnidebug/index.html">IBM
page about debugging JNI</a>
</menu>

<p>
    @since Ptolemy II 0.2
</body>
</html>
